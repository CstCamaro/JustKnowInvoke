window.cronJobs=(function(){var a=null;return{getCronInstance:function(){if(!a){a=new __.FnCronLoader()}return a}}})();(function(){var a="__.qsUtility",b={formatNum:function(h,g){h=String(h).split(".");var d=[];for(var e=0,c=h[0].length;e<c;e++){var f=h[0].charAt(c-e-1);e%3==0&&f>=0&&f<=9&&d.length&&d.push(",");d.push(f)}h[0]=d.reverse().join("");if(h[1]){d=[];for(var e=0,c=h[1].length;e<c;e++){var f=h[1].charAt(e);e%3==0&&f>=0&&f<=9&&d.length&&d.push(",");d.push(f)}h[1]=d.join("")}return h.join(".")},trimString:function(k,f,g){g=g&&true;var m=0,d=/^[\u4e00-\u9fa5]+$/,h=[],l=0,e,j;for(e=0;e<k.length;e++){j=k.charAt(e);if(d.test(j)){m+=2}else{m+=1}if(m<=f){h.push(j)}}if(h.length===f){return h.join("")+(g?"...":"")}else{return h.join("")}},addNoBorderClass:function(e,d,c){if(c+1===d){__.dom.addClass(e,"noborder")}},getColor:function(e,c,d){d=d===false?false:true;return c>0?'<span class="fc3">'+e+"</span>":(c<0?'<span class="fc4">'+e+"</span>":(d?'<span style="color:#000">'+e+"</span>":e))},getColorPercent:function(d,c){if(__.lang.isNumber(Number(d))&&d!==""&&d!=="-"){var e=d>0?"+":"";return __.qsUtility.getColor(e+d+"%",d,c)}else{return"--"}},isIndexCode:function(c){if(c.substr(0,4)==="sh00"||c.substr(0,4)==="sz39"){return true}else{return false}},convert_code:function(f){var d=null;var c=null;try{var d=f.split("_")[0];var c=f.split("_")[1];if(d.indexOf(".")!=-1){d=d.split(".")[0]}}catch(g){}if(d!==null){d=this.get_code_mkt(d,c)}return d},getMarket:function(c){var d={"00":"sz","30":"sz","60":"sh","20":"sz","90":"sh"};if(c){return d[c.substr(0,2)]}},get_code_mkt:function(d,c){if(!!d){switch(c){case"1":d="sh"+d;break;case"51":d="sz"+d;break;case"100":d="hk"+d;break;case"200":d="us"+d;break;case"350":d="qh"+d;break;default:d="jj"+d;break}}return d},getStockName:function(d,c){return c[1]},getQtKeys:function(d){var c=[];__.each(d,function(e){if(e.indexOf("hk")===0){c.push("s_r_"+e)}else{if(e.indexOf("jj")!==-1){}else{c.push(e)}}});return c},getQtValue:function(c){if(c.indexOf("hk")===0){return window["v_s_r_"+c]}else{if(c.indexOf("jj")!==-1){}else{return window["v_"+c]}}},getChangeMount:function(d,e){var c=d.substr(0,2);switch(c){case"us":case"sh":case"sz":case"r_":return e[31];break;case"gz":return e[4];break;case"s_":return e[4];break;case"fq":return e[6];break;case"wh":return e[3]-e[6];break;case"hf":return e[0]-e[7];break}},getNewCost:function(d,e){var c=d.substr(0,2);switch(c){case"fq":return e[5];break;case"hf":return e[0];break;default:return e[3];break}},getChangeRank:function(d,e){var c=d.substr(0,2);switch(c){case"us":case"r_":case"sh":case"sz":return e[32];break;case"gz":return e[5];break;case"s_":return e[5];break;case"fq":return((e[6])/(e[5]-e[6]))*100;break;case"wh":return((e[3]-e[6])/e[6])*100;break;case"hf":return e[1];break}},bindThatToFn:function(c,d){return function(){return c.apply(d,arguments)}},findTriggler:function(c,e,d){e=e||"xxxxxxxxx";d=d||4;do{if(__.dom.hasClass(c,e)||(c.nodeType==1&&c.nodeName=="LI")){return c}else{c=c.parentNode}}while(d--&&c);return null},changeStates:function(j,k,l){l=l||{};l.navType=l.navType||"tag",l.nav=l.nav||"li";l.containnerId=l.containnerId||"data4";l.activeClass=l.activeClass||"on";l.difClass=l.difClass||"dif";if(l.navType==="class"){var f=__.dom.$("."+l.nav,l.containnerId)}else{if(l.navType==="tag"){var f=__.dom.f(l.containnerId).getElementsByTagName("li")}}var c=__.dom.f("."+j)||__.dom.f(j);var d=null;for(var e=0,g=f.length;e<g;e++){d=f[e];if(f[e]!==c){__.dom.remClass(f[e],l.activeClass)}else{__.dom.addClass(f[e],l.activeClass)}}if(d===c){__.dom.remClass(d,l.difClass)}else{__.dom.addClass(d,l.difClass)}for(e in k){if(k.hasOwnProperty(e)){var h=__.dom.f(k[e]);if(e===j){if(h.nodeType==1&&h.nodeName=="IMG"){h.style.display="inline"}else{h.style.display="block"}}else{h.style.display="none"}}}}};__.set(a,b)})();function MemoBase(c,a,b){this.interfaceUrl=c||"http://ifzq.gtimg.cn/stock/doctor/qs/gg?_var=gpysValue&codes=";this.returnName=a||"gpysValue";this.refreshTimeSpan=b||1000*60*60;this.keysValue={};this.refresh()}MemoBase.prototype.refresh=function(){var a=this;setInterval(function(){var b=__.lang.keys(a.keysValue);a.keysValue={};a.getValues(b,null)},this.refreshTimeSpan)};MemoBase.prototype.parseReturnData=function(d,e){var a=window[this.returnName];if(a.code===0){var b=a.data;for(var c in b){if(b.hasOwnProperty(c)){e&&e(c,b[c]);this.keysValue[c]=b[c]}}}};MemoBase.prototype.getValues=function(f,h,g){g=g||"";var e=[],d=this,c=[];for(var b=0,a=f.length;b<a;b++){if(this.keysValue[f[b]]){h&&h(f[b],this.keysValue[f[b]])}else{c.push(g+f[b]);e.push(f[b])}}if(e.length>0){__.load(d.interfaceUrl+c.join(","),function(i){d.parseReturnData(e,h)})}};(function(){__.fnTable.processors.GET_COLOR=__.qsUtility.getColor;__.fnTable.processors.GET_PERCENT=__.qsUtility.getColorPercent})();Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}};(function(){var a="__.Tabs";var b=function(c){this.cfg={triggerType:"mouseover",elementId:"#ybxg_c1",indentifyClassToContainnerMap:{mbzfzd:"tab2_content1",pjzg:"tab2_content2",jgscgz:"tab2_content3",gzdzggg:"tab2_content4",gzdzghy:"tab2_content5"},tabConDataActionMap:{mbzfzd:null,pjzg:null,jgscgz:null,gzdzggg:null,gzdzghy:null}};__.extend(this.cfg,c);var d=__.dom.f(this.cfg.elementId);var e=this;function f(j,i){i=i||200;var h;function k(l){if(e.cfg.triggerType==="mouseover"){k.stop();h=setTimeout(function(){j(l)},i)}else{j(l)}}k.stop=function(){if(h){clearTimeout(h);h=0}};return k}var g=function(p){var m=p.target;var l=__.qsUtility.findTriggler(m);if(l){var r=l.className;var q=r;var j=["on","dif"];for(var k=0,n=j.length;k<n;k++){var h=new RegExp(j[k],"ig");q=q.replace(h,"")}q=q.replace(/\s*/ig,"");__.qsUtility.changeStates(q,e.cfg.indentifyClassToContainnerMap,{containnerId:e.cfg.elementId,navType:"tag",nav:"li"});e.cfg.tabConDataActionMap[q]()}};__.event.on(d,this.cfg.triggerType,f(g))};__.set(a,b)})();(function(){function a(f){var e=b(f);e.init()}var b=(function(){var e=americaObj=europeObj=futuresObj=forexObj=null;return function(f){switch(f){case"asian":if(!e){e=new c({containnerId:"fin_Tab0",codes:["s_sh000001","s_sz399001","s_r_hkHSI","gzN225"],hasImageCodes:["s_sh000001","s_sz399001","s_r_hkHSI"],codesImageMap:{s_sh000001:"http://img.gtimg.cn/images/hq_parts_little3/hushen/indexs/000001.png?",s_sz399001:"http://img.gtimg.cn/images/hq_parts_little3/hushen/indexs/399001.png?",s_r_hkHSI:"http://img.gtimg.cn/images/hq_parts_little3/hk/indexs/HSI.png?"},indentifyIdToContainnerMap:{chinazs_s_sh000001:"chinaImage_s_sh000001",chinazs_s_sz399001:"chinaImage_s_sz399001",chinazs_s_r_hkHSI:"chinaImage_s_r_hkHSI"}})}return e;break;case"america":if(!americaObj){americaObj=new c({containnerId:"fin_Tab1",codes:["usDJI","usIXIC","usINX","gzGSPTSE"],hasImageCodes:["usDJI","usIXIC"],codesImageMap:{usDJI:"http://img.gtimg.cn/images/hq_parts_little3/as/stocks/DJI.png?",usIXIC:"http://img.gtimg.cn/images/hq_parts_little3/as/stocks/IXIC.png?",usINX:"http://img.gtimg.cn/images/hq_parts_little3/as/stocks/INX.png?"},indentifyIdToContainnerMap:{chinazs_usDJI:"chinaImage_usDJI",chinazs_usIXIC:"chinaImage_usIXIC"}})}return americaObj;break;case"europe":if(!europeObj){europeObj=new c({containnerId:"fin_Tab2",codes:["gzFTSE","gzGDAXI","gzFCHI","gzSSMI","gzMIBTEL","gzSMSI","gzISEQ","gzAEX","gzIBEX"],hasImageCodes:[]})}return europeObj;break;case"futures":if(!futuresObj){futuresObj=new c({containnerId:"fin_Tab3",codes:["fqUS_CL_1","fqUS_GC_1","fqUS_HG_1","fqUS_S_1","fqJP_IR_1","fqUS_OJ_1","fqJP_IS_1","hf_DJS","hf_NAS"],hasImageCodes:[]})}return futuresObj;break;case"forex":if(!forexObj){forexObj=new c({containnerId:"fin_Tab4",codes:["whEURUSD","whGBPUSD","whUSDJPY","whAUDUSD","whUSDCHF","whUSDCAD","whUSDHKD","whUSDCNY","whSGDUSD"],hasImageCodes:[],precision:4})}return forexObj;break}}})();function c(e){this.codes=e&&e.codes;this.codesImageMap=e&&e.codesImageMap;this.indentifyIdToContainnerMap=e&&e.indentifyIdToContainnerMap;this.containnerId=e&&e.containnerId;this.hasImageCodes=e&&e.hasImageCodes||[];this.precision=e&&e.precision||2;this.jobId=null;this.inited=false;if(this.hasImageCodes.length>0){this.addEventHandle()}}c.prototype.addEventHandle=function(){var e=__.dom.f(this.containnerId);var f=this;__.event.on(e,"mouseover",function(j){var g=j.target;var i=__.qsUtility.findTriggler(g);if(i){var h=i.id;if(f.indentifyIdToContainnerMap[h]){__.qsUtility.changeStates(h,f.indentifyIdToContainnerMap,{containnerId:f.containnerId})}}})};c.prototype.fillQtField=function(){var j=this;function p(){for(var u=0,t=j.codes.length;u<t;u++){if(__.lang.inArray(j.codes[u],j.hasImageCodes)){var v=__.dom.f("chinaImage_"+j.codes[u]);v.src=j.codesImageMap[j.codes[u]]+Math.random()}}}for(var h=0,l=this.codes.length;h<l;h++){var f=__.dom.f("chinazs_"+this.codes[h]);var r=window["v_"+this.codes[h]];if(r&&f){var m=f.getElementsByTagName("span");if(!!m&&m.length==4){var k=r.split("~"),s="fc3";if(k.length===1){k=r.split(",")}var q=this.getFirstFieldValue(this.codes[h],k);var e=this.getSecondFieldValue(this.codes[h],k);var g=this.getThirdFieldValue(this.codes[h],k);var n=g>=0?"+":"";if(e<0){s="fc4"}__.dom.addClass(f,s);m[1].innerHTML=isNaN(q)?"--":(Number(q).toFixed(this.precision));m[2].innerHTML=isNaN(e)?"--":n+(Number(e).toFixed(this.precision));m[3].innerHTML=isNaN(g)?"--":n+(Number(g).toFixed(this.precision))+"%"}}}p()};c.prototype.init=function(){var e=this;if(!e.inited){e.inited=true;this.jobId=window.cronJobs.getCronInstance().addJob({type:2,interval:10,keys:e.codes,onData:e.fillQtField.bind(e),noWait:true})}};c.prototype.cancleJob=function(){if(this.jobId){window.cronJobs.getCronInstance().remJob(this.jobId);this.jobId=0}};c.prototype.getFirstFieldValue=function(f,e){return __.qsUtility.getNewCost(f,e)};c.prototype.getSecondFieldValue=function(f,e){return __.qsUtility.getChangeMount(f,e)};c.prototype.getThirdFieldValue=function(f,e){return __.qsUtility.getChangeRank(f,e)};var d=new __.Tabs({triggerType:"mouseover",elementId:"#fin_Tab",indentifyClassToContainnerMap:{asianNav:"fin_Tab0",americaNav:"fin_Tab1",europeNav:"fin_Tab2",futuresNav:"fin_Tab3",forexNav:"fin_Tab4"},tabConDataActionMap:{asianNav:function(){a("asian")},americaNav:function(){a("america")},europeNav:function(){a("europe")},futuresNav:function(){a("futures")},forexNav:function(){a("forex")}}});a("asian")})();__.set("__.qs");function StockStateManager(b,a){this.cfg={logoutClassName:"stockLogout",hasNoDataClassName:"stockHasNoData",hasDataClassName:"stockHasData"};__.extend(this.cfg,a);this.containnerId=b||"";this.init()}StockStateManager.prototype.init=function(a){this.containnerDom=__.dom.f(this.containnerId);this.changeStockState("logout")};StockStateManager.prototype.changeStockState=function(a){if(this.containnerDom){switch(a){case"logout":this.containnerDom.className=this.cfg.logoutClassName;break;case"hasNoData":this.containnerDom.className=this.cfg.hasNoDataClassName;break;case"hasData":this.containnerDom.className=this.cfg.hasDataClassName;break;default:break}}};__.qs.mostRecentVisited=function(a,b,c){this.cookieName="RECENT_CODE";this.showCount=a||5;this.jobId=null;this.keys=[];this.tableId=b||"recentTable";this.tableTrId=c||"recentTmp";this.init()};__.qs.mostRecentVisited.prototype.getListCode=function(){var c=__.cookie.get(this.cookieName);var b=[];if(c){b=c.split("|");for(var d=0,a=b.length;d<a;d++){var f=b[d];var e=__.qsUtility.convert_code(f);if(e.indexOf("qh")!==-1||e.indexOf("hk")!==-1||e.indexOf("us")!==-1&&!__.qsUtility.isIndexCode(o[0])){b.splice(d,1);d--;a--;continue}if(e!==null&&!!e){b[d]=e}else{b.splice(d,1);d--;a--}}}return b};__.qs.mostRecentVisited.prototype.fillQtData=function(){var f=this;var q=this.keys;var l=[];for(var d=0,g=q.length;d<g;d++){var n=window["v_"+q[d]];if(n){n=n.split("~");var b=q[d];var m=__.qsUtility.getNewCost(q[d],n);var a=__.qsUtility.getStockName(q[d],n);var j=__.qsUtility.getChangeRank(q[d],n);var c=__.qsUtility.getChangeMount(q[d],n);var p=[];p.push(b);p.push(a);p.push(m);p.push(j);p.push(c);p.push(n[0]);l.push(p)}}var h=__.dom.f(this.tableTrId),e=__.dom.f(this.tableId);var k=f.keys.length;__.fnTable.fill(l,h,[function(s,i,u,r){var t=s[0];if(s[5]=="100"){t=t.substr(t.lastIndexOf("_")+1)}t=t.substr(2);__.qsUtility.addNoBorderClass(u,k,r);return __.fnTable.processors.GET_TITLE(t,s[5],s[1],8,"_blank")},function(s,i,t,r){__.qsUtility.addNoBorderClass(t,k,r);return __.fnTable.processors.GET_PERCENT(s[3])},function(s,i,t,r){__.qsUtility.addNoBorderClass(t,k,r);return __.fnTable.processors.GET_COLOR(s[2],s[3])},function(s,i,t,r){t.className="";__.qsUtility.addNoBorderClass(t,k,r);__.dom.addClass(t,"gppj_"+s[0]);__.dom.addClass(t,"doctor_align_left_padding")}]);this.fillDoctorData()};__.qs.mostRecentVisited.prototype.fillDoctorData=function(){function b(j,h){var l=__.qsUtility.getMarket(j)+j;var k=__.dom.$(".gppj_"+l);for(var g=0,f=k.length;g<f;g++){k[g].innerHTML=h[0]}}var e=[],d=this.keys;for(var c=0,a=d.length;c<a;c++){if(d[c].substr(0,2)==="sz"||d[c].substr(0,2)==="sh"){e.push(d[c].substr(2))}}__.qs.zxDoctorData.getValues(e,b)};__.qs.mostRecentVisited.prototype.init=function(){var a=this.getListCode();this.keys=__.qsUtility.getQtKeys(a);this.keys=this.keys.slice(0,Math.min(this.showCount,this.keys.length));var b=this;__.load("qt.gtimg.cn/r="+Math.random()+"&q="+this.keys,function(){b.fillQtData()})};__.qs.hot=function(){__.qs.mostRecentVisited.apply(this,arguments)};__.inherits(__.qs.hot,__.qs.mostRecentVisited);__.qs.hot.prototype.getListCode=function(){return["sh601857","sh600005","sh601919","sh600050","sz000002","sh601398","sh601600","sh600036","sh600837","sh600028","sh600030"]};__.qs.zixuangu=function(){this.recentCodeList=[];this.canGetUser=false;__.qs.mostRecentVisited.apply(this,arguments)};__.inherits(__.qs.zixuangu,__.qs.mostRecentVisited);__.qs.zixuangu.prototype.getListCode=function(d){var c=this;var a=this.showCount;var b=(__.cookie.get("uin")||__.cookie.get("luin")).replace(/o0*/,"");if(b){this.canGetUser=true;__.load("http://stockapp.finance.qq.com/panel/qq_stk.php?printtype=js&action=show&check=2&uin="+b+"&r="+Math.random(),function(){var e=window.stockInfo;if(e&&e.code==0&&e.data){__.each(e.data.stock.split("|"),function(f){f=f.split("~");if(f[3]&&f[3]=="stka"||f[3]=="stkb"){c.recentCodeList.push(f[0])}});d&&d.apply(c,arguments)}})}else{this.canGetUser=false}};__.qs.zixuangu.prototype.init=function(){var a=this.getListCode(this.fetch)};__.qs.zixuangu.prototype.fetch=function(){this.keys=__.qsUtility.getQtKeys(this.recentCodeList);this.keys=this.keys.slice(0,Math.min(this.showCount,this.keys.length));var a=this;__.load("qt.gtimg.cn/r="+Math.random()+"&q="+this.keys,function(){a.fillQtData();try{if(a.keys.length===0){__.qs.stockStateManager.changeStockState("hasNoData")}else{__.qs.stockStateManager.changeStockState("hasData")}}catch(b){}})};__.qs.fillZixuanModule=(function(){var b=false;function a(){var c=function(e){var d=__.dom.f("#aliasName");if(d){d.innerHTML=e}};__.set("__.app.recentCode.loginInfo");if(__.app.recentCode.loginInfo.data){c(decodeURIComponent(__.app.recentCode.loginInfo.data.nickname))}else{__.load("http://stockapp.finance.qq.com/pstock/view/pstkapi.php?appn=index&action=show&r="+Math.random(),function(){if(__.app.recentCode.loginInfo.data){c(decodeURIComponent(__.app.recentCode.loginInfo.data.nickname))}})}}return function(){if(b){return}else{b=true;__.qs.stockStateManager=new StockStateManager("zxg_Tab3");var c=function(){var d=new __.qs.zixuangu(7,"dzixuan2","zixuanTmp2");if(d.canGetUser){}else{__.qs.stockStateManager.changeStockState("logout");if(window.login&&window.login["loginOut"]&&typeof(window.login["loginOut"])=="function"){window.login["loginOut"]()}}};c();setInterval(c,5000);__.event.on(__.dom.f("dlzxg"),"click",function(){try{window.userLogin()}catch(d){__.load("widget.login",function(){__.widget.login.open(function(e){var f=new __.qs.zixuangu(7,"dzixuan2","zixuanTmp2")})})}});__.event.on(__.dom.f("#zixuanLogout"),"click",function(){var d=__.cookie;try{__.app.recentCode.loginInfo.data=null}catch(f){}d.del("uin","/",".qq.com");d.del("skey","/",".qq.com");d.del("luin","/",".qq.com");d.del("lkey","/",".qq.com");c()})}}})();__.qs.fillRecentModule=(function(){var a=false;__.set("__.qs.doctorData");return function(){if(a){return}else{a=true;var b=function(){var f=new __.qs.mostRecentVisited(8);var d=8;var e=f.keys;var g=e.length;if(g==0){__.dom.addClass(__.dom.f("recentTable"),"undis")}else{__.dom.remClass(__.dom.f("recentTable"),"undis")}if(d-g>1){__.dom.remClass(__.dom.f("hotTable"),"undis");var c=new __.qs.hot(d-g-1,"hotTable","hotTmp")}else{__.dom.addClass(__.dom.f("hotTable"),"undis")}};b();setInterval(b,5000)}}})();(function(){__.qs.zxDoctorData=new MemoBase();__.qs.fillRecentModule();__.recentVisitedTabs=new __.Tabs({triggerType:"mouseover",elementId:"#zixuanguList",indentifyClassToContainnerMap:{recentStock:"zxg_Tab0",myStock:"zxg_Tab3"},tabConDataActionMap:{recentStock:__.qs.fillRecentModule,myStock:__.qs.fillZixuanModule}})})();(function(){var b=new StockStateManager("zxg_Tab3");function a(c,d){if(typeof(c)=="function"){return function(){c();d()}}}window.login=window.login||{};window.login["loginSuccess"]=a(window.login["loginSuccess"],function(){var c=new __.qs.zixuangu(7,"dzixuan2","zixuanTmp2")});window.login["loginOut"]=a(window.login["loginOut"],function(){b.changeStockState("logout")})})();
/*  |xGv00|e28369f72976ecd50db76bfb721d5405 */
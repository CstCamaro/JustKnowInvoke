!function(){define("config.data",[],function(){return{seasonID:"",seasonText:"",seasonType:"",range:[]}}),function(t){var e={stringJoint:function(t){if(0==arguments.length)return"";var e=Array.prototype.slice.call(arguments,1);return t.replace(/\{(\d+)\}/g,function(t,a){return e[a]})},Url:{parse:function(t){t=t||window.location.href;var e=document.createElement("a");return e.href=t,{href:t,protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,path:e.pathname+e.search,pathname:e.pathname,search:function(){var t={},a=e.search.substring(1).split("&");for(var i in a){var n=a[i].toString().split("=");t[n[0]]=n[1]}return t}(),query:e.search,hash:e.hash}},format:function(t){}},getUrlParam:function(t,e){return this.Url.parse(e).search[t]},Cookie:{getItem:function(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,a,i,n,s){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var o="";if(a)switch(a.constructor){case Number:o=a===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+a;break;case String:o="; expires="+a;break;case Date:o="; expires="+a.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+o+(n?"; domain="+n:"")+(i?"; path="+i:"")+(s?"; secure":""),!0},removeItem:function(t,e,a){return!(!t||!this.hasItem(t))&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:"")+(e?"; path="+e:""),!0)},hasItem:function(t){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=decodeURIComponent(t[e]);return t}}};"function"==typeof define?define("tools",[],function(){return e}):t.Tools=e}(window),!function(){function t(t,e){return(/string|function/.test(typeof e)?r:o)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return f[t]}function i(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function n(t,e){if(m(t))for(var a=0,i=t.length;a<i;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function s(t,e){var a=/(\/)[^\/]+\1\.\.\1/,i=("./"+t).replace(/[^\/]+$/,""),n=i+e;for(n=n.replace(/\/\.\//g,"/");n.match(a);)n=n.replace(a,"/");return n}function o(e,a){var i=t.get(e)||c({filename:e,name:"Render Error",message:"Template not found"});return a?i(a):i}function r(t,e){if("string"==typeof e){var a=e;e=function(){return new d(a)}}var i=l[t]=function(a){try{return new e(a,t)+""}catch(i){return c(i)()}};return i.prototype=e.prototype=h,i.toString=function(){return e+""},i}function c(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var i in t)a+="<"+i+">\n"+t[i]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var l=t.cache={},d=this.String,f={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},m=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},h=t.utils={$helpers:{},$include:function(t,e,a){return t=s(a,t),o(t,e)},$string:e,$escape:i,$each:n},u=t.helpers=h.$helpers;t.get=function(t){return l[t.replace(/^\.\//,"")]},t.helper=function(t,e){u[t]=e},"function"==typeof define?define("templateModule",[],function(){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("dateHeader",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$escape),n=t.startDate,s=(t.d,t.g,t.endDate),o="";return o+='<a href="javascript:;"class="forward" bosszone="SC_cB7">&lt;&nbsp;\u524d\u4e03\u5929</a> <span class="date">',o+=i(n.replace(/^(\d{4}\-)/g,"")),o+=" \u81f3 ",o+=i(s.replace(/^(\d{4}\-)/g,"")),o+='</span> <a href="javascript:;"class="backward" bosszone="SC_cA7">\u540e\u4e03\u5929&nbsp;&gt;</a> ',new d(o)}),t("dateMatchList",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$each),n=t.data,s=(t.$value,t.$index,a.$escape),o=(t.g,t.item,t.idx,"");return i(n,function(t,e){o+=' <div class="item"> <div class="',o+=s(/\u4eca\u5929/g.test(t.date)?"today":"date"),o+='"> ',o+=s(t.date),o+=' </div> <div class="list-time"> <div class="row"> <div class="time">\u65f6\u95f422</div> <div class="status">\u72b6\u6001</div> <div class="visit">\u5ba2\u961f</div> <div class="goal">\u6bd4\u5206</div> <div class="home">\u4e3b\u961f</div> <div class="jj">\u96c6\u9526</div> <div class="sj">\u6570\u636e</div> <div class="qz-zb">\u524d\u77bb/\u6218\u62a5</div> <div class="zb-hf">\u76f4\u64ad/\u56de\u653e</div> </div> ',i(t.data,function(t,e){o+=" ","\u5df2\u7ed3\u675f"===t.matchPeriod?(o+=" ",t.leftGoal-0>t.rightGoal-0?(o+=' <div class="row left-win ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '):t.leftGoal-0<t.rightGoal-0?(o+=' <div class="row right-win ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '):(o+=' <div class="row ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '),o+=" "):(o+=' <div class="row ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '),o+=' <div class="time" data-mid="',o+=s(t.mid),o+='"> ',o+=s(t.startTime),o+=" ","1"===t.isPay&&(o+='<span class="vip">\u4f1a\u5458</span>'),o+=' </div> <div class="status">',o+=s("\u76f4\u64ad\u4e2d"===t.matchPeriod?t.quarter:t.matchPeriod),o+="</div> ","4"!==t.matchType?(o+=' <div class="visit"> <a href="http://nba.stats.qq.com/team/?id=',o+=s(t.leftId),o+='" target="_blank" bosszone="SC_cTeam"> <span class="chname">',o+=s(t.leftName),o+='</span> <img src="',o+=s(t.leftBadge),o+='" alt="36x36" class="logo"> </a> </div> <div class="goal"> ',"\u672a\u5f00\u59cb"===t.matchPeriod?(o+=" ",t.leftId<=30&&t.rightId<=30?(o+=' <a class="link" bosszone="SC_cdb" target="_blank" href="http://nba.stats.qq.com/compare/index.htm?type=team&teamId=',o+=s(t.leftId),o+=",",o+=s(t.rightId),o+='">\u5bf9\u6bd4</a> <span class="strike"></span> '):o+=' <span class="strike" style="display: inline-block;"></span> ',o+=" "):"\u6bd4\u8d5b\u5ef6\u671f"===t.matchPeriod?o+=' <span class="yanqi">VS</span> ':(o+=' <span class="visit">',o+=s(t.leftGoal),o+='</span><span>-</span><span class="home">',o+=s(t.rightGoal),o+="</span> "),o+=' </div> <div class="home"> <a href="http://nba.stats.qq.com/team/?id=',o+=s(t.rightId),o+='" target="_blank" bosszone="SC_cTeam"> <span class="chname">',o+=s(t.rightName),o+='</span> <img src="',o+=s(t.rightBadge),o+='" alt="36x36" class="logo"> </a> </div> '):(o+=' <div class="visit" style="width: 550px;"> <a href="http://nba.stats.qq.com/team/?id=',o+=s(t.leftId),o+='" target="_blank" bosszone="SC_cTeam"> <span style="width: 406px;" class="chname">',o+=s(t.leftName),o+='</span> <img src="',o+=s(t.leftBadge),o+='" alt="36x36" class="logo"> </a> </div> '),o+=' <div class="jj"> ',t.jj&&(o+=' <a href="',o+=s(t.jj),o+='" target="_blank" bosszone="SC_cCol">\u96c6\u9526</a> '),o+=' </div> <div class="sj"> ',"\u672a\u5f00\u59cb"!==t.matchPeriod&&"3"!==t.matchType&&"4"!==t.matchType&&(o+=' <a href="http://nba.stats.qq.com/nbascore/?mid=',o+=s(t.mid.replace(/^100000\:/g,"")),o+='" target="_blank" bosszone="SC_cStats">\u6570\u636e</a> '),o+=' </div> <div class="qz-zb"> ',t.latestNews&&(o+=" ","1"===t.latestNews.articleType?(o+=' <a href="',o+=s(t.latestNews.url),o+='" target="_blank" bosszone="SC_czb">\u6218\u62a5</a> '):"7"===t.latestNews.articleType&&(o+=' <a href="',o+=s(t.latestNews.url),o+='" target="_blank" bosszone="SC_cqz">\u524d\u77bb</a> '),o+=" "),o+=' </div> <div class="zb-hf"> ',"\u5df2\u7ed3\u675f"===t.matchPeriod?(o+=" ",t.hf&&(o+=' <a href="',o+=s(t.hf),o+='" target="_blank" class="btn end" data-mid="',o+=s(t.mid),o+='" bosszone="SC_cReplay"><i></i>\u89c6\u9891\u56de\u653e</a> '),o+=" "):"\u672a\u5f00\u59cb"===t.matchPeriod?(o+=" ","1"===t.liveType?(o+=' <a href="javascript:;" class="btn pic-coming" data-mid="',o+=s(t.mid),o+='" bosszone="SC_cLive2"><i></i>\u56fe\u6587\u76f4\u64ad</a> '):"3"===t.liveType&&(o+=' <a href="javascript:;" class="btn video-coming" data-mid="',o+=s(t.mid),o+='" bosszone="SC_cLive1"><i></i>\u89c6\u9891\u76f4\u64ad</a> '),o+=" "):"\u6bd4\u8d5b\u5ef6\u671f"===t.matchPeriod?(o+=" ",t.hf&&(o+=' <a href="',o+=s(t.hf),o+='" target="_blank" class="btn end" data-mid="',o+=s(t.mid),o+='" bosszone="SC_cReplay"><i></i>\u89c6\u9891\u56de\u653e</a> '),o+=" "):"\u76f4\u64ad\u4e2d"===t.matchPeriod&&(o+=" ","1"===t.liveType?(o+=' <a href="http://kbs.sports.qq.com/kbsweb/game.htm?mid=',o+=s(t.mid),o+='" target="_blank" class="btn pic-living" data-mid="',o+=s(t.mid),o+='"><i></i>\u6b63\u5728\u76f4\u64ad</a> '):"3"===t.liveType&&(o+=' <a href="http://kbs.sports.qq.com/kbsweb/game.htm?mid=',o+=s(t.mid),o+='" target="_blank" class="btn video-living" data-mid="',o+=s(t.mid),o+='"><i></i>\u6b63\u5728\u76f4\u64ad</a> '),o+=" "),o+=" </div> </div> "}),o+=" </div> </div> "}),o+=" ",new d(o)}),t("teamHeader",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$each),n=t.data,s=(t.$value,t.$index,a.$escape),o="";return i(n,function(t,e){o+=" ",0==e?(o+=' <a href="javascript: ;" target="_self" class="month current" bosszone="SC_tcMonth">',o+=s(t.date),o+="</a> "):(o+=' <a href="javascript: ;" target="_self" class="month" bosszone="SC_tcMonth">',o+=s(t.date),o+="</a> "),o+=" "}),o+=" ",new d(o)}),t("teamMatchList",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$each),n=t.data,s=(t.$value,t.$index,a.$escape),o=(t.$,t.g,t.item,t.idx,"");return i(n,function(t,e){o+=' <div class="item" id="m',o+=s(t.date.replace(/\u6708$/g,"")),o+='"> <div class="',o+=s(/\u4eca\u5929/g.test(t.date)?"today":"date"),o+='"> ',o+=s(t.date),o+=' </div> <div class="list-team"> <div class="row"> <div class="time">\u65f6\u95f4</div> <div class="visit">\u5ba2\u961f</div> <div class="goal">\u6bd4\u5206</div> <div class="home">\u4e3b\u961f</div> <div class="status">\u8d5b\u679c</div> <div class="jj">\u96c6\u9526</div> <div class="sj">\u6570\u636e</div> <div class="qz-zb">\u524d\u77bb/\u6218\u62a5</div> <div class="zb-hf">\u76f4\u64ad/\u56de\u653e</div> </div> ',i(t.data,function(t,e){o+=" ","\u5df2\u7ed3\u675f"===t.matchPeriod?(o+=" ",t.leftGoal-0>t.rightGoal-0?(o+=' <div class="row left-win ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '):t.leftGoal-0<t.rightGoal-0?(o+=' <div class="row right-win ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '):(o+=' <div class="row ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '),o+=" "):(o+=' <div class="row ',o+=s(e%2===0?"odd":"even"),o+='" data-mid="',o+=s(t.mid),o+='"> '),o+=' <div class="time" data-mid="',o+=s(t.mid),o+='"> ',o+=s(t.startTime),o+=" ","1"==t.isPay&&(o+=' <span class="vip">\u4f1a\u5458</span> '),o+=' </div> <div class="visit"> <a href="http://nba.stats.qq.com/team/?id=',o+=s(t.leftId),o+='" target="_blank" bosszone="SC_tcTeam"> <span class="chname">',o+=s(t.leftName),o+='</span> <img src="',o+=s(t.leftBadge),o+='" alt="36x36" class="logo"> </a> </div> <div class="goal"> ',"\u672a\u5f00\u59cb"===t.matchPeriod?(o+=' <a class="link" bosszone="SC_cdb" target="_blank" href="http://nba.stats.qq.com/compare/index.htm?type=team&teamId=',o+=s(t.leftId),o+=",",o+=s(t.rightId),o+='">\u5bf9\u6bd4</a> <span class="strike"></span> '):(o+=' <span class="visit">',o+=s(t.leftGoal),o+='</span><span>-</span><span class="home">',o+=s(t.rightGoal),o+="</span> "),o+=' </div> <div class="home"> <a href="http://nba.stats.qq.com/team/?id=',o+=s(t.rightId),o+='" target="_blank" bosszone="SC_tcTeam"> <span class="chname">',o+=s(t.rightName),o+='</span> <img src="',o+=s(t.rightBadge),o+='" alt="36x36" class="logo"> </a> </div> <div class="status" data-status="',o+=s(t.matchPeriod),o+='">',o+=s(t.status),o+='</div> <div class="jj"> ',t.coverCollection&&(o+=' <a href="',o+=s(t.coverCollection.playUrl),o+='" target="_blank" bosszone="SC_tcCol">\u96c6\u9526</a> '),o+=' </div> <div class="sj"> ',"\u672a\u5f00\u59cb"!==t.matchPeriod&&"3"!==t.matchType&&(o+=' <a href="http://nba.stats.qq.com/nbascore/?mid=',o+=s(t.mid.replace(/^100000\:/g,"")),o+='" target="_blank" bosszone="SC_tcStats">\u6570\u636e</a> '),o+=' </div> <div class="qz-zb"> ',t.latestNews&&(o+=" ","1"===t.latestNews.articleType?(o+=' <a href="',o+=s(t.latestNews.url),o+='" target="_blank" bosszone="SC_tczb">\u6218\u62a5</a> '):"7"===t.latestNews.articleType&&(o+=' <a href="',o+=s(t.latestNews.url),o+='" target="_blank" bosszone="SC_tcqz">\u524d\u77bb</a> '),o+=" "),o+=' </div> <div class="zb-hf"> ',"\u5df2\u7ed3\u675f"===t.matchPeriod?(o+=" ",t.coverPlayback&&(o+=' <a href="',o+=s(t.coverPlayback.playUrl),o+='" target="_blank" class="btn end" data-mid="',o+=s(t.mid),o+='" bosszone="SC_tcReplay"><i></i>\u89c6\u9891\u56de\u653e</a> '),o+=" "):"\u672a\u5f00\u59cb"===t.matchPeriod?(o+=" ","1"==t.liveType?(o+=' <a href="javascript:;" class="btn pic-coming" data-mid="',o+=s(t.mid),o+='" bosszone="SC_tcLive2"><i></i>\u56fe\u6587\u76f4\u64ad</a> '):"3"==t.liveType&&(o+=' <a href="javascript:;" class="btn video-coming" data-mid="',o+=s(t.mid),o+='" bosszone="SC_tcLive1"><i></i>\u89c6\u9891\u76f4\u64ad</a> '),o+=" "):"\u76f4\u64ad\u4e2d"===t.matchPeriod&&(o+=" ","1"==t.liveType?(o+=' <a href="http://kbs.sports.qq.com/kbsweb/game.htm?mid=',o+=s(t.mid),o+='" target="_blank" class="btn pic-living" data-mid="',o+=s(t.mid),o+='"><i></i>\u6b63\u5728\u76f4\u64ad</a> '):"3"==t.liveType&&(o+=' <a href="http://kbs.sports.qq.com/kbsweb/game.htm?mid=',o+=s(t.mid),o+='" target="_blank" class="btn video-living" data-mid="',o+=s(t.mid),o+='"><i></i>\u6b63\u5728\u76f4\u64ad</a> '),o+=" "),o+=" </div> </div> "}),o+=" </div> </div> "}),o+=" ",new d(o)})}(),define("dataCtrl",["promise","moment","config.data"],function(t,e,a){var i,n,s=!1,o=function(t,e,a,i){s=!0,$.ajax({type:"get",async:!0,url:t,dataType:"jsonp",jsonpCallback:i||"ajaxExec",success:function(t){e(t)},error:function(){a()}})},r=function(t){switch(t){case"76ers":t="sixers";break;case"Trail Blazers":t="blazers"}return(t+"").toLowerCase()},c=function(t,e,a,i,n){e/=1,i/=1;var s;return n==t?(s=e,s>i?"\u80dc":"\u8d1f"):(s=i,s>e?"\u80dc":"\u8d1f")},l=function(t){var a="//matchweb.sports.qq.com/kbs/calendar?from=NBA_PC&columnId=100000&from=sporthp";i?t(i):o(a,function(a){if(0!==a.code)throw s=!1,new Error("calendar's interface exception.");""==defaulttime&&(defaulttime="2016-10-02"),e(defaulttime).isAfter(e(a.data.today))&&(a.data.today=defaulttime),i=a.data,t(i),s=!1},function(){})},d=function(e,a,c){s=!0;var l=new t(function(t,e){if(n)t(n);else{if(0!==window.wdata.code)throw e(),new Error("fetch 15 days interface exception.");n=window.wdata.data,t(n)}}),d=new t(function(t,i){var n="//matchweb.sports.qq.com/kbs/list?from=NBA_PC&columnId=100000&startTime="+e+"&endTime="+a+"&from=sporthp";o(n,function(e){if(console.log(e),0!==e.code)throw i(),new Error("calendar's interface exception.");t(e.data)},function(t){i()})});t.all([l,d]).then(function(t){var e=t[0],a=t[1],n=function(t){switch(t){case"\u661f\u671f\u4e00":t="\u5468\u4e00";break;case"\u661f\u671f\u4e8c":t="\u5468\u4e8c";break;case"\u661f\u671f\u4e09":t="\u5468\u4e09";break;case"\u661f\u671f\u56db":t="\u5468\u56db";break;case"\u661f\u671f\u4e94":t="\u5468\u4e94";break;case"\u661f\u671f\u516d":t="\u5468\u516d";break;case"\u661f\u671f\u65e5":t="\u5468\u65e5";break;default:t=""}return t},o=[];$.each(a,function(t,a){var s={},c=[];e?e[t]:void 0;$.each(a,function(t,e){for(var a=["mid","startTime","matchPeriod","matchType","quarter","leftBadge","leftName","leftEnName","leftGoal","leftId","rightBadge","rightGoal","rightName","rightEnName","rightId","isPay","latestNews","week","liveType"],i={},s=0,o=a.length;s<o;s++){var l=a[s];"startTime"===l?i[l]=e[l].split(" ")[1].replace(/(\:\d{2})$/g,""):"matchPeriod"===l?0==e[l]?i[l]="\u672a\u5f00\u59cb":1==e[l]?i[l]="\u8fdb\u884c\u4e2d":2==e[l]?i[l]="\u5df2\u7ed3\u675f":3==e[l]&&(i[l]="\u6bd4\u8d5b\u5ef6\u671f"):"latestNews"===l?e[l]&&(i[l]=e[l]):"week"===l?i[l]=n(e[l]):/EnName/g.test(l)?i[l]=r(e[l]):(i[l]=e[l],i.jj="//kbs.sports.qq.com/kbsweb/game.htm?mid="+e.mid,i.hf="//kbs.sports.qq.com/kbsweb/game.htm?mid="+e.mid+"&replay=1")}c.push(i)});var l=t.split("-");c.length>0?s.date=l[1]+"\u6708"+l[2]+"\u65e5 "+c[c.length-1].week:s.date=l[1]+"\u6708"+l[2]+"\u65e5",t===i.today&&(s.date=s.date+"\uff08\u4eca\u5929\uff09"),s.data=c,o.push(s)}),s=!1,c(o)})},f=function(t,e){var i="//mat1.gtimg.com/apps/hpage2/nbateammatchlist_"+t+".json",n=["startTime","isPay","leftId","leftBadge","leftName","leftEnName","leftGoal","rightId","rightGoal","rightName","rightEnName","rightBadge","matchPeriod","matchType","mid","liveType","latestNews","coverCollection","coverPlayback"];o(i,function(i){var o=[];$.each(i,function(e,i){if(parseInt(e.split("-").join(""))>=a.range[0].replace("-","").substring(0,6)-0){var s={};s.date=e.replace(/^(\d{4}\-)/g,"")+"\u6708",console.log(s.date),s.data=[],$.each(i,function(e,a){for(var i={},o=0,l=n.length;o<l;o++){var d=n[o];"startTime"===d?i[d]=a[d].replace(/^(\d{4}\-)/g,"").replace(/(\:\d{2})$/g,""):"matchPeriod"===d?(i[d]="0"==a[d]?"\u672a\u5f00\u59cb":"1"==a[d]?"\u76f4\u64ad\u4e2d":"\u5df2\u7ed3\u675f","\u5df2\u7ed3\u675f"===i[d]?i.status=c(a.leftId,a.leftGoal,a.rightId,a.rightGoal,t):i.status=""):"latestNews"===d||"coverCollection"===d||"coverPlayback"===d?a[d]&&(i[d]=a[d]):/EnName/g.test(d)?i[d]=r(a[d]):i[d]=a[d]}s.data.push(i)}),o.push(s)}}),s=!1,e(o)},function(t){s=!1},"getCastData")},m={};$.each(_QQNBA_TEAM_IDS,function(t,e){m[e.kbs_id]=e.ch_name});var h=function(t){return m[t]};return{isLoading:function(){return s},getTodayDate:l,getTeamMatchData:f,getTeamNameById:h,getMatchesByDate:d}}),define("subscriber",[],function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var a;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return-1;var s=+e||0;if(Math.abs(s)===1/0&&(s=0),s>=n)return-1;for(a=Math.max(s>=0?s:n-Math.abs(s),0);a<n;){if(a in i&&i[a]===t)return a;a++}return-1}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),a=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],n=arguments.length>=2?arguments[1]:void 0,s=0;s<a;s++)if(s in e){var o=e[s];t.call(n,o,s,e)&&i.push(o)}return i});var t={_data:[],getSubInfo:function(t){if(this._data.length)t&&t(this._data);else{var e=this;$.ajax({url:"//matchweb.sports.qq.com/kbs/attendMids",type:"GET",dataType:"jsonp",data:{from:"NBA_PC"},success:function(a){0==a.code?e._data=a.data:e._data=[],t&&t(e._data)},error:function(){t&&t([])}})}},isSub:function(t){return!!this._data.length&&this._data.indexOf(t)>-1},addSub:function(t,e){if(this._data.indexOf(t)===-1){var a=this;$.ajax({url:"//matchweb.sports.qq.com/kbs/attend",type:"GET",dataType:"jsonp",data:{type:"attend",mid:t,form:"NBA_PC"},success:function(i){0===i.code?(a._data.push(t),e(!0,t)):e(!1,t)}})}else e(!0,t)},delSub:function(t,e){var a=this._data.indexOf(t);if(a!=-1){var i=this;$.ajax({url:"//matchweb.sports.qq.com/kbs/attend",type:"GET",dataType:"jsonp",data:{type:"cancel",mid:t,form:"NBA_PC"},success:function(n){if(0===n.code){var s=i._data.slice();delete s[a],i._data=s.filter(function(t){return t}),e(!0,t)}else e(!1,t)}})}else e(!0,t)}};return t}),define("util",["subscriber"],function(t){var e=function(t){return $(t).parents(".row").find(".time").find(".order").size()>0};return{throttle:function(t,e,a){var i,n,s,o=null,r=0;a||(a={});var c=function(){r=a.leading===!1?0:(new Date).getTime(),o=null,s=t.apply(i,n),o||(i=n=null)};return function(){var l=(new Date).getTime();r||a.leading!==!1||(r=l);var d=e-(l-r);return i=this,n=arguments,d<=0||d>e?(o&&(clearTimeout(o),o=null),r=l,s=t.apply(i,n),o||(i=n=null)):o||a.trailing===!1||(o=setTimeout(c,d)),s}},wordChanging:function(a,i,n){if("\u672a\u5f00\u59cb"===a){var s="";return s=t.isSub(i)||e(n)?"\u53d6\u6d88\u9884\u7ea6":"\u9884\u7ea6"}}}}),define("account",["tools"],function(t){var e=function(){return t.Cookie.getItem("skey")&&t.Cookie.getItem("uin")};return{isLogin:e}}),define("matchList",["dataCtrl","templateModule","util","subscriber","account"],function(t,e,a,i,n){var s=$(".stream");s.on("mouseenter",".zb-hf",function(t){var e=$(this).parents(".row").find(".status").text()||$(this).parents(".row").find(".status").attr("data-status");if("\u672a\u5f00\u59cb"===e){var i=$(this).find("a").attr("data-mid"),n=$(this).find("a").html(),s=a.wordChanging(e,i,this);$(this).find("a").addClass("clock").html("<i></i>"+s).data("beforeTxt",n)}}),s.on("mouseleave",".zb-hf",function(t){var e=$(this).parents(".row").find(".status").text()||$(this).parents(".row").find(".status").attr("data-status");if("\u672a\u5f00\u59cb"===e){var a=$(this).find("a").data("beforeTxt");$(this).find("a").removeClass("clock").html(a)}}),s.on("click",".zb-hf",function(t){t.stopPropagation();var e=$(this),s=$(this).parents(".row").find(".status").text()||$(this).parents(".row").find(".status").attr("data-status"),o=$(this).find("a").text(),r=$(this).find("a").attr("data-mid"),c=$(this).find("a").attr("bosszone");registerZone2({bossZone:c},"manual"),"\u672a\u5f00\u59cb"===s&&(n.isLogin()?"\u9884\u7ea6"===o?(i.addSub(r,function(t,i){e.parent().find(".time").prepend('<i class="order"></i>'),word=a.wordChanging("\u672a\u5f00\u59cb",r,e),e.find("a").html("<i></i>"+word)}),registerZone2({bossZone:"SC_cyy"},"manual")):"\u53d6\u6d88\u9884\u7ea6"===o&&(i.delSub(r,function(t,i){e.parent().find(".time .order").remove(),word=a.wordChanging("\u672a\u5f00\u59cb",r,e),e.find("a").html("<i></i>"+word)}),registerZone2({bossZone:"SC_cqxyy"},"manual")):sportsWebApi.userLogin())}),s.on("click",".row",function(t){var e=$(this).attr("data-mid");e&&window.open("//kbs.sports.qq.com/kbsweb/game.htm?mid="+e),$(this).removeClass("hover")}),s.on("mouseenter",".row",function(t){$(this).addClass("hover")}),s.on("mouseleave",".row",function(t){$(this).removeClass("hover")}),s.on("click",".row .visit a,.row .goal a, .row .home a, .row .jj a, .row .sj a, .row .qz-zb a",function(t){t.stopPropagation();var e=$(t.target).attr("bosszone");registerZone2({bossZone:e},"manual")});var o=$(".prompt"),r=function(a,i){t.getMatchesByDate(a,i,function(t){t.length?(o.hide(),s.css("min-height","1000px").html(e("dateMatchList",{data:t})),$(".row").find('a[href="http://nba.stats.qq.com/team/?id=west"],a[href="http://nba.stats.qq.com/team/?id=east"],a[href="http://nba.stats.qq.com/team/?id=world"],a[href="http://nba.stats.qq.com/team/?id=usa"],a[href="http://nba.stats.qq.com/team/?id=undefined"],a[href="http://nba.stats.qq.com/team/?id=west all-stars"],a[href="http://nba.stats.qq.com/team/?id=east all-stars"]').attr("href","javascript:;").css("cursor","default")):(s.css("min-height","0px").html(""),o.show())})},c=function(t){t.length?(o.hide(),s.css("min-height","1000px").html(e("teamMatchList",{data:t})),n.isLogin()&&l()):(s.css("min-height","0px").html(""),o.show())},l=function(){n.isLogin()&&i.getSubInfo(function(t){var e=$(".stream .item .row .time");$.each(e,function(e,a){var i=$(a).attr("data-mid");i&&t.indexOf(i)>-1&&$(a).prepend('<i class="order"></i>')})})};return $(window).on("login",function(){l()}),$(window).on("logout",function(){}),{rendererByDate:r,rendererByTeam:c}}),define("Goto",[],function(){var t={util:{getXYScroll:function(){var e=[],a=[];return $.each(t.scrollTarget,function(t,i){var n;n=void 0===$(i).scrollLeft()?0:$(i).scrollLeft(),e.push(n),n=void 0===$(i).scrollTop()?0:$(i).scrollTop(),a.push(n)}),{x:e[0]===e[1]?e[0]:e[0]>e[1]?e[0]:e[1],y:a[0]===a[1]?a[0]:a[0]>a[1]?a[0]:a[1]}},getViewPosition:function(t){if(null===t||void 0===t)return null;var e=document.getElementById(t),a=e.getBoundingClientRect(),i={};return i.left=a.left||0,i.top=a.top||0,i.right=a.right||0,i.bottom=a.bottom||0,i.width=a.width||a.right-a.left,i.height=a.height||a.bottom-a.top,i}},ctrl:{init:function(e){t.scrollTarget=$("html, body"),t.timing=e.timing,t.offsetTop=e.offsetTop||0,t.offsetLeft=e.offsetLeft||0},"goto":function(e,a){t.containerId=e||null;var i,n,s=t.util.getXYScroll().y;if(e?(i=t.util.getViewPosition(e).top-t.offsetTop,n=s+i):n=0,a){var o=$.Deferred();o.done(a),t.scrollTarget.animate({scrollTop:n},t.timing,function(){o.resolve()})}else t.scrollTarget.animate({scrollTop:n},t.timing)}}};return t}),define("headline",["templateModule","dataCtrl","util","matchList","Goto","moment","config.data"],function(t,e,a,i,n,s,o){function r(t){$.each(w,function(t,e){return e-$(window).scrollTop()>=0?($(".page-month .month").removeClass("current"),$($(".page-month .month")[t>=1?t-1:0]).addClass("current"),!1):($(".page-month .month").removeClass("current"),void $($(".page-month .month")[w.length-1]).addClass("current"))})}var c,l,d,f=$(".headline .title"),m=$("#seasonType"),h=($(".headline .page"),$(".headline .links .team")),u=$(".headline .links .calendar"),p=$(".headline .links .all"),g=$(".headline .links .teams"),v=$(".headline .links .goBack");h.click(function(t){t.stopPropagation(),registerZone2({bossZone:"SC_cTeamSch"},1),"none"===g.css("display")?g.show():g.hide()}),$("body").on("click",function(t){g.hide()}),u.click(function(t){registerZone2({bossZone:"SC_cCalendar"},1);var e={elem:"#datepicker",isclear:!1,istoday:!1,issure:!1,choose:function(t){l.startDate!==t&&(l={startDate:t,endDate:s(t).add(6,"days").format("YYYY-MM-DD")},b(l),n.ctrl.init({timing:0,offsetTop:63,offsetLeft:0}),n.ctrl["goto"](),c===l.startDate?v.hide():v.show())}};g.hide(),laydate(e),$("#laydate_box").on("click","#laydate_today",function(t){v.trigger("click")})}),p.click(function(t){T("date"),ExposureBoss(null,"SC_eAll"),n.ctrl.init({timing:0,offsetTop:63,offsetLeft:0}),n.ctrl["goto"]()}),v.click(function(t){c!==l.startDate&&(l={startDate:d,endDate:s(d).add(6,"days").format("YYYY-MM-DD")},b(l),v.hide(),n.ctrl.init({timing:0,offsetTop:63,offsetLeft:0}),n.ctrl["goto"]())}),g.on("click",".cont a",function(t){t.stopPropagation();var e=$(this).attr("data-tid");v.hide(),T("team",e),ExposureBoss(null,"SC_eTeamSch"),g.hide(),n.ctrl.init({timing:0,offsetTop:63,offsetLeft:0}),n.ctrl["goto"]()});var b=function(e){$(".headline .page").html(t("dateHeader",e)).removeClass("page-month"),i.rendererByDate(e.startDate,e.endDate),$(window).off("scroll",r)},w=[],y=function(a){e.getTeamMatchData(a,function(e){$(".headline .page").html(t("teamHeader",{data:e})).addClass("page-month"),i.rendererByTeam(e),w=[],$(".stream .item").each(function(t,e){var a=$(e);w.push(a.offset().top-160)}),$(window).on("scroll",r)})},T=function(t,a){setTimeout(function(){"team"!=t?f.text(o.seasonText):f.text(o.seasonText+"-"+e.getTeamNameById(a)),o.seasonType?m.text(o.seasonType):m.hide()},400);"team"===t?(u.hide(),p.show(),y(a),$(".headline .page").on("click","a.month",function(t){$(".headline .month").removeClass("current"),$(this).addClass("current");var e="m"+$(this).text().replace(/\u6708$/g,"");n.ctrl.init({timing:1e3,offsetTop:113,offsetLeft:0}),n.ctrl["goto"](e)})):"date"===t&&(u.show(),p.hide(),e.getTodayDate(function(t){c=t.today,d=c,setTimeout(function(){s(c).isBefore(o.range[0])?c=o.range[0]:s(c).isAfter(o.range[1])&&(c=o.range[1])},400),l={startDate:c,endDate:s(c).add(6,"days").format("YYYY-MM-DD")},b(l),$(".headline .page").on("click",".forward",function(t){e.isLoading()||(l={startDate:s(l.startDate).subtract(7,"days").format("YYYY-MM-DD"),endDate:s(l.startDate).subtract(1,"days").format("YYYY-MM-DD")},b(l),c===l.startDate?v.hide():v.show(),n.ctrl.init({timing:0,offsetTop:63,offsetLeft:0}),n.ctrl["goto"]())}),$(".headline .page").on("click",".backward",function(t){e.isLoading()||(l={startDate:s(l.endDate).add(1,"days").format("YYYY-MM-DD"),endDate:s(l.endDate).add(7,"days").format("YYYY-MM-DD")},b(l),c===l.startDate?v.hide():v.show(),n.ctrl.init({timing:0,offsetTop:63,offsetLeft:0}),n.ctrl["goto"]())})}));var i=$(".headline");$(window).scroll(function(){$(window).scrollTop()>=160?"fixed"!==i.css("position")&&i.css({position:"fixed",top:50,left:"50%",zIndex:1,marginLeft:-620}):i.css({position:"static",marginLeft:"auto"})})};return{init:T}}),define("lift",[],function(){var t={util:{getXYScroll:function(){var e=[],a=[];return $.each(t.scrollTarget,function(t,i){var n;n=void 0===$(i).scrollLeft()?0:$(i).scrollLeft(),e.push(n),n=void 0===$(i).scrollTop()?0:$(i).scrollTop(),a.push(n)}),{x:e[0]===e[1]?e[0]:e[0]>e[1]?e[0]:e[1],y:a[0]===a[1]?a[0]:a[0]>a[1]?a[0]:a[1]}},getViewPosition:function(t){if(null===t||void 0===t)return null;var e=document.getElementById(t),a=e.getBoundingClientRect(),i={};return i.left=a.left||0,i.top=a.top||0,i.right=a.right||0,i.bottom=a.bottom||0,i.width=a.width||a.right-a.left,i.height=a.height||a.bottom-a.top,i}},ctrl:{init:function(e){t.scrollTarget=$("html, body"),t.timing=e.timing||1e3,t.offsetTop=e.offsetTop||0,t.offsetLeft=e.offsetLeft||0},"goto":function(e){t.containerId=e||null;var a,i,n=t.util.getXYScroll().y;e?(a=t.util.getViewPosition(e).top-t.offsetTop,i=n+a):(a=n-t.offsetTop,i=0),t.scrollTarget.animate({scrollTop:i},t.timing)}}},e={redirect:function(t){t=t||"//sports.qq.com/nba/",win.location.href=t},throttle:function(t,e,a){var i,n,s,o=null,r=0;a||(a={});var c=function(){r=a.leading===!1?0:(new Date).getTime(),o=null,s=t.apply(i,n),o||(i=n=null)};return function(){var l=(new Date).getTime();r||a.leading!==!1||(r=l);var d=e-(l-r);return i=this,n=arguments,d<=0||d>e?(o&&(clearTimeout(o),o=null),r=l,s=t.apply(i,n),o||(i=n=null)):o||a.trailing===!1||(o=setTimeout(c,d)),s}}},a={init:function(){this.render()},render:function(){this.bind()},bind:function(){$(".lift .list").on("mouseenter","li.app",function(t){$(this).find(".code").css("display","block")}),$(".lift .list").on("mouseleave","li.app",function(t){$(this).find(".code").css("display","none")}),$(".lift .list").on("click","li.arrow",function(e){t.ctrl.init({}),t.ctrl["goto"]()})}};a.init();var i=function(){var t=$(".lift"),e=$(window).scrollTop();$(window).scrollLeft();e>=260?t.find(".arrow").css("visibility","visible"):t.find(".arrow").css("visibility","hidden")},n=e.throttle(i,100,{leading:!1});$(window).scroll(function(){n()})}),require(["config.data","tools","headline","lift"],function(t,e,a){$.ajax({type:"get",url:"//mat1.gtimg.com/apps/hpage2/web_pass_15_day_match.json",async:!1,dataType:"jsonp",jsonpCallback:"getCastData",success:function(i){window.wdata=i;var n=i.data,s=[],o=!0;for(var r in n){s.push(r);var c=s[0],l=s.length,d=s[l-1],f=parseInt(s[0].substring(0,4));parseInt(s[0].substring(0,4))+1;for(var m in n[r]){var h=n[r][m];if("NBA\u5e38\u89c4\u8d5b"==h.matchDesc){t.seasonID=f,t.seasonText="NBA\u8d5b\u7a0b",t.seasonType=h.matchDesc.substring(3),t.range=[c,d];break}if("NBA\u5b63\u540e\u8d5b"==h.matchDesc){t.seasonID=f,t.seasonText="NBA\u8d5b\u7a0b",t.seasonType=h.matchDesc.substring(3),t.range=[c,d];break}if("NBA\u5e38\u89c4\u8d5b"!=h.matchDesc&&"NBA\u5b63\u540e\u8d5b"!=h.matchDesc){t.seasonID=f,t.seasonText="NBA\u8d5b\u7a0b",t.seasonType="",t.range=[c,d];break}}}for(var r in n){for(var m in n[r])if("function"!=typeof n[r][m]&&n[r][m].matchDesc.search("\u5b63\u540e\u8d5b")>0){o=!1;break}if(!o)break}var u=e.getUrlParam("team")||"";if(u){var p=_QQNBA_TEAM_IDS[u].kbs_id;a.init("team",p)}else a.init("date");ExposureBoss(null,"SC_eAll")}})}),define("main",function(){}),require.config({baseUrl:"./scripts/",paths:{promise:"//mat1.gtimg.com/statsnba/libs/bluebird.min",moment:"//mat1.gtimg.com/statsnba/libs/moment.min",tools:"common/tools",account:"common/account",lift:"common/lift"},shim:{echarts:{exports:"echarts"}}}),require(["main"]),define("config",function(){})}();
//# sourceMappingURL=main-b431ee6522.js.map

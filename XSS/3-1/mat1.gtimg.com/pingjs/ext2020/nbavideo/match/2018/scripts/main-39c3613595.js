!function(){define("ButtonBar",[],function(){var t=function(t,e){this.btns=$(t).find(e.btn||".btn"),this.selectIndex=e.selectIndex||0,this.selectedClass=e.selectedClass||"on",this.change=e.change,this._init()};return t.prototype._init=function(){var t=this;this.selectIndex>=0&&(this.curBtn=$(this.btns[this.selectIndex]),this.curBtn.addClass(this.selectedClass),this._triggerChange()),this.btns.click(function(e){t.curBtn=$(this);var a=t.btns.index(this);t.setSelectIndex(a)})},t.prototype._triggerChange=function(){this.change&&this.change(this.selectIndex,this.curBtn)},t.prototype.setSelectIndex=function(t,e){t==-1&&(this.curBtn.removeClass(this.selectedClass),this.selectIndex=-1),this.selectIndex!=t&&(this.btns.removeClass(this.selectedClass),$(this.btns[t]).addClass(this.selectedClass),this.selectIndex=t,(e||"undefined"==typeof e)&&this._triggerChange())},t}),define("dataCtrl",["promise","moment","promise"],function(t,e,t){var a={};$.each(_QQNBA_TEAM_IDS,function(t,e){a[e.ch_name]=t});var n=function(t,e,a,n){$.ajax({type:"get",async:!0,url:t,dataType:"jsonp",success:function(t){e(t)},error:function(){a()}})},i=new t(function(t,e){n("//matchweb.sports.qq.com/kbs/calendar?columnId=100000",function(a){0==a.code?t(a.data):e()},function(t){e()})}),s=function(){return i},o=function(t,e,i){var s="//matchweb.sports.qq.com/kbs/list?columnId=100000&startTime="+t+"&endTime="+e;n(s,function(t){0===t.code&&($.each(t.data,function(t,e){$.each(e,function(t,e){e.leftEnName=a[e.leftName],e.rightEnName=a[e.rightName]})}),i(t.data))},function(t){isLoading=!1})},r=function(e){var a="//matchweb.sports.qq.com/kbs/matchVideo?mid=100000:"+e;return new t(function(t,e){n(a,function(e){t(0==e.code?e.data:null)},function(t){e()})})},c=function(e,i){i/=2;var s="//matchweb.sports.qq.com/kbs/matchStat?&mid=100000:"+e;return new t(function(t,o){n(s,function(n){0==n.code?(n=n.data,n.matchId=e,n.playerStats&&n.playerStats.left&&n.playerStats.right?n.playerStats=n.playerStats.left.slice(1,1+i).concat(n.playerStats.right.slice(1,1+i)):n.playerStats=[],n.teamInfo.leftEnName=a[n.teamInfo.leftName],n.teamInfo.rightEnName=a[n.teamInfo.rightName],t(n)):t(null)},function(t){o()})})},l=function(e,a,n){n=n||6;var i=[];$.each(e,function(e,a){i.push(new t(function(e,i){t.all([r(a),c(a,n)]).then(function(t){var a={};t[0]&&t[1]&&(a.matchInfo=t[1],a.videos=t[0]),e(a)},function(t){i({})})}))}),t.all(i).then(function(t){a(t)})},d=function(t,e){var a="//matchweb.sports.qq.com/player/baseInfo?from=web&playerId="+t;n(a,function(t){0==t.code&&e(t.data)})},m=function(t,e){var a="//matchweb.sports.qq.com/team/matchList?competitionId=100000&from=editornbavideo&teamId="+t;n(a,function(t){0==t.code&&e(t.data)})},h=function(t,a,n){var i=[];m(t,function(t){var s={};t[a]&&($.each(t[a],function(t,a){if(0!=a.matchPeriod){var n=a.mid.split(":")[1];s[n]=e(a.startTime).format("YYYY\u5e74MM\u6708DD\u65e5"),i.push(n)}}),l(i,function(t){$.each(t,function(t,e){e.matchInfo.matchDate=s[e.matchInfo.matchId]}),n(t)},4))})},f=function(t,e){var a="//matchweb.sports.qq.com/team/matchList?competitionId=100000&from=editornbavideo&teamId="+t;n(a,function(t){0==t.code&&e(t.data)})};return{getMatchDate:s,getScheduleByDate:o,getTeamListData:h,getPlayerInfo:d,getMatchParade:f,getGameDataListData:l}}),!function(){function t(t,e){return(/string|function/.test(typeof e)?r:o)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return m[t]}function n(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function i(t,e){if(h(t))for(var a=0,n=t.length;a<n;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function s(t,e){var a=/(\/)[^\/]+\1\.\.\1/,n=("./"+t).replace(/[^\/]+$/,""),i=n+e;for(i=i.replace(/\/\.\//g,"/");i.match(a);)i=i.replace(a,"/");return i}function o(e,a){var n=t.get(e)||c({filename:e,name:"Render Error",message:"Template not found"});return a?n(a):n}function r(t,e){if("string"==typeof e){var a=e;e=function(){return new d(a)}}var n=l[t]=function(a){try{return new e(a,t)+""}catch(n){return c(n)()}};return n.prototype=e.prototype=f,n.toString=function(){return e+""},n}function c(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var n in t)a+="<"+n+">\n"+t[n]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var l=t.cache={},d=this.String,m={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},h=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},f=t.utils={$helpers:{},$include:function(t,e,a){return t=s(a,t),o(t,e)},$string:e,$escape:n,$each:i},u=t.helpers=f.$helpers;t.get=function(t){return l[t.replace(/^\.\//,"")]},t.helper=function(t,e){u[t]=e},"function"==typeof define?define("templateModule",[],function(){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("collectionVideoList",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$each),i=t.data,s=(t.$value,t.$index,a.$escape),o=function(n,i){i=i||t;var s=a.$include(n,i,e);return r+=s},r="";return n(i,function(t,e){r+=' <li data-matchid="',r+=s(t.matchId),r+='" data-vid="',r+=s(t.vid),r+='"> ',o("./video",t),r+=" </li> "}),new d(r)}),t("floatMatchDateList",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$each),i=t.data,s=(t.$value,t.$index,t.today),o=a.$escape,r="";return n(i,function(t,e){r+=" ",t.date==s?(r+=' <a data-date="',r+=o(t.date),r+='" class="item today" href="javascript:;"> '):(r+=' <a data-date="',r+=o(t.date),r+='" class="item" href="javascript:;"> '),r+=" <li> <p>",r+=o(t.date.substring(8)),r+="</p> <p>",r+=o(t.weekday.replace("\u661f\u671f","\u5468")),r+="</p> </li> </a> "}),r+=" ",new d(r)}),t("gameVideoList",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$each),i=t.data,s=(t.$value,t.$index,a.$escape),o=function(n,i){i=i||t;var s=a.$include(n,i,e);return r+=s},r="";return n(i,function(t,e){r+=" ",t.matchInfo&&t.videos&&(r+=' <li class="game-item" id="',r+=s(t.matchInfo.matchId),r+='"> ',o("./matchInfo",t.matchInfo),r+=" ",t.videos.totalList.length&&(r+=" ",o("./matchVideo",t.videos),r+=' <div class="number-ctrl"> <a href="javascript:;" class="btn btn-more">\u66f4\u591a</a> <a href="javascript:;" class="btn btn-pack-up">\u6536\u8d77</a> </div> '),r+=" </li> "),r+=" "}),new d(r)}),t("matchDateList",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$each),i=t.data,s=(t.$value,t.$index,t.today),o=a.$escape,r="";return n(i,function(t,e){r+=" ",t.date==s?(r+=' <a data-date="',r+=o(t.date),r+='" bosszone="VM_match_date_choose" class="item today" href="javascript:;"> '):(r+=' <a data-date="',r+=o(t.date),r+='" bosszone="VM_match_date_choose" class="item" href="javascript:;"> '),r+=" <li> <p>",r+=o(t.date.substring(5).replace("-",".")),r+="</p> <p>",r+=o(t.weekday.replace("\u661f\u671f","\u5468")),r+="</p> <p>",r+=o(t.number),r+="\u573a</p> </li> </a> "}),r+=" ",new d(r)}),t("matchInfo",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.matchDate,s=t.teamInfo,o=a.$each,r=t.periodGoals,c=(t.val,t.idx,t.playerStats),l="";return l+='<p class="game-title"> <span class="match-date">',l+=n(i),l+="</span> <span>",l+=n(s.leftName),l+=' </span> <span class="game-score">',l+=n(s.leftGoal),l+='</span> VS <span class="game-score">',l+=n(s.rightGoal),l+=" </span><span>",l+=n(s.rightName),l+='</span> </p> <div bosszone="VM_match_bfqy" class="score-list"> <table class="tb-score"> <tr class="left"> <td class="team"> <a target="_blank" href="http://nba.stats.qq.com/team/?id=',l+=n(s.leftId),l+='"> <img class="icon" src="',l+=n(s.leftBadge),l+='">',l+=n(s.leftName),l+=" </a> </td> ",o(r.rows[0],function(t,e){l+=" ","-"!=t&&9!=e&&(l+=" <td>",l+=n(t),l+="</td> "),l+=" "}),l+=' <td class="total">',l+=n(s.leftGoal),l+='</td> </tr> <tr class="right"> <td class="team"> <a target="_blank" href="http://nba.stats.qq.com/team/?id=',l+=n(s.rightId),l+='"> <img class="icon" src="',l+=n(s.rightBadge),l+='">',l+=n(s.rightName),l+=" </a> </td> ",o(r.rows[1],function(t,e){l+=" ","-"!=t&&9!=e&&(l+=" <td>",l+=n(t),l+="</td> "),l+=" "}),l+=' <td class="total">',l+=n(s.rightGoal),l+='</td> </tr> </table> <ul class="li-player"> ',o(c,function(t,e){l+=' <li class="player"> <a href="javascript:void(0);" data-playerid="',l+=n(t.playerId),l+='" target="_blank" data-loaded="0"> <img class="icon" src="',l+=n(t.pic||"//img1.gtimg.com/sports/pics/hv1/115/128/1939/126116230.png"),l+='"/> <p class="name">',l+=n(t.row[0]),l+="</p> </a> </li> "}),l+=" </ul> </div> ",new d(l)}),t("matchVideo",function(t,e){"use strict";var a=this,n=(a.$helpers,t.totalList),i=a.$escape,s=function(n,i){i=i||t;var s=a.$include(n,i,e);return c+=s},o=a.$each,r=t.playbackList,c=(t.$value,t.$index,"");return c+='<div class="video-container"> <ul bosszone="VM_match_video" class="videos" > ',n.length&&(c+=' <li class="video-first" data-matchid="',c+=i(n[0].matchId),c+='" data-vid="',c+=i(n[0].vid),c+='"> ',s("./video",n[0]),c+=" </li> ",o(r.concat(n.slice(1)),function(t,e){c+=' <li data-matchid="',c+=i(t.matchId),c+='" data-vid="',c+=i(t.vid),c+='"> ',s("./video",t),c+=" </li> "}),c+=" "),c+=" </ul> </div> ",new d(c)}),t("playerTips",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.logo,s=t.cnName,o=t.enName,r=t.jerseyNum,c=t.position,l=t.height,m=t.weight,h="";return h+='<div class="player-window"> <img class="player-pic" src="',h+=n(i),h+='"/> <div class="ch-name">',h+=n(s),h+='</div> <div class="en-name">',h+=n(o),h+='</div> <div class="info">#',h+=n(r),h+=" ",h+=n(c),h+=" | ",h+=n(l),h+=", ",h+=n(m),h+='</div>  <div class="followed"> <img src="//mat1.gtimg.com/sports/test/john/nbagame/followed.jpg"/> <span>\u53d6\u6d88</span> </div> <a bosszone="VM_match_qygd" target="_blank" class="moreinfo" /> </div> ',new d(h)}),t("schedule",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$each),i=t.schedules,s=(t.schedule,t.$index,a.$escape),o=(t.$value,"");return n(i,function(t,e){o+=' <li class="schedules"> <div class="date-title"><span>',o+=s(t.date),o+='</span></div> <ul class="future-game-list "> ',n(t.data,function(t,e){o+=' <li class="schedule"> <div class="startTime">',o+=s(t.startTime.substring(10,16)),o+='</div> <div class="roundName">',o+=s(t.matchDesc),o+="</div> ",0==t.matchPeriod?o+=' <a data-subscribe="no"><img class="btn subscribe" src="//mat1.gtimg.com/sports/test/john/nbagame/subscribe.jpg"></a> <div class="ct-vs-info todo"> ':1==t.matchPeriod?(o+=' <a class="btn live" target="_blank" href="http://sports.qq.com/kbsweb/game.htm?mid=',o+=s(t.mid),o+='"></a> <div class="ct-vs-info doing"> '):2==t.matchPeriod&&(o+=' <a class="jijin btn" href="#',o+=s(t.mid.split(":")[1]),o+='">\u89c6\u9891\u96c6\u9526</a> <div class="ct-vs-info done"> '),o+=" ",""==t.leftName||t.rightName?""!=t.leftName&&""!=t.rightName&&(o+=' <div class="home"> <a target="_blank" href="http://nba.stats.qq.com/team/?id=',o+=s(t.leftId),o+='"><img class="team-logo" src="',o+=s(t.leftBadge),o+='" /></a> <a target="_blank" href="http://nba.stats.qq.com/team/?id=',o+=s(t.leftId),o+='"><span class="team-name">',o+=s(t.leftName),o+='</span></a> <span class="goal">',o+=s(t.leftGoal),o+='</span> </div> <span class="middle-line" /> <div class="away"> <span class="goal">',o+=s(t.rightGoal),o+='</span> <a target="_blank" href="http://nba.stats.qq.com/team/?id=',o+=s(t.rightId),o+='"><span class="team-name">',o+=s(t.rightName),o+='</span></a> <a target="_blank" href="http://nba.stats.qq.com/team/?id=',o+=s(t.rightId),o+='"><img class="team-logo" src="',o+=s(t.rightBadge),o+='" /></a> </div> '):(o+=' <div class="home left_home"> <a target="_blank" href="',o+=s(t.webUrl),o+='"><img class="team-logo" src="',o+=s(t.leftBadge),o+='" /></a> <a target="_blank" href="',o+=s(t.webUrl),o+='"><span class="team-name">',o+=s(t.leftName),o+="</span></a> </div> "),o+=" </div> </li> "}),o+=" </ul> </li> "}),o+=" ",new d(o)}),t("teams",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$each),i=t.unions,s=(t.union,t.$index,a.$escape),o=(t.area,t.team,"");return n(i,function(t,e){o+=' <div class="ct-union"> <div class="ct-title"> <img class="logo" src="',o+=s(t.logo),o+='"> <h2 class="title">',o+=s(t.name),o+="</h2> </div> ",n(t.areas,function(t,e){o+=' <div class="ct-areas"> <h3 class="area-title">',o+=s(t.name),o+='</h3> <ul class="li-teams"> ',n(t.teams,function(t,e){o+=' <li class="team btn" data-kbs-id="',o+=s(t.kbsId),o+='"> <img class="team-logo" src="',o+=s(t.logo),o+='" /> <span class="team-name">',o+=s(t.name),o+="</span> </li> "}),o+=" </ul> </div> "}),o+=" </div> "}),o+=" ",new d(o)}),t("timeList",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$each),i=t.years,s=(t.year,t.$index,a.$escape),o=(t.$value,"");return n(i,function(t,e){o+=' <li class="year"> <p class="year-name btn"> <a href="javascript:;" bosszone="VM_team_year">',o+=s(t.year),o+='</a> </p> <ol class="months"> ',n(t.months,function(e,a){o+=' <li class="month" data-year="',o+=s(t.year),o+='" data-month="',o+=s(e),o+='"> <a href="javascript:;" bosszone="VM_team_month">',o+=s(e),o+="\u6708</a> </li> "}),o+=" </ol> </li> "}),o+=" ",new d(o)}),t("video",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.playUrl,s=t.pic2,o=t.duration,r=t.view,c=t.title,l="";return l+='<div class="video-item" > <a href="',l+=n(i),l+='" target="_blank"> <img class="preview" src="',l+=n(s),l+='"/> <p class="info"> <span class="time">',l+=n(o),l+='</span> <span class="view">',l+=n(r),l+='</span> </p> <div class="hover"></div> <p class="title">',l+=n(c),l+="</p> </a> </div> ",new d(l)})}(),define("Slider",[],function(){var t=function(t,e){this.main=$(t).find(e.main||".slider-cont"),this.btnPrev=$(t).find(e.btnPrev||".btn-prev"),this.btnNext=$(t).find(e.btnNext||".btn-next"),this.partSize=e.partSize,this.ctWidth=0,this.curPos=-e.offsetLeft||0,this.offsetLeft=e.offsetLeft||0,this.offsetRight=e.offsetRight||0,this.duration=e.duration||1200,this._init()};return t.prototype._init=function(){this._initPrototype(),this._initEvent()},t.prototype._initPrototype=function(){var t=this;$.each(this.main.children(),function(e,a){t.ctWidth+=$(a).outerWidth(!0)}),this.main.width(this.ctWidth).css("left",t.curPos),this.ctWidth>this.partSize?this.range=[-this.ctWidth+this.partSize+this.offsetRight-this.offsetLeft,0-this.offsetLeft]:this.range=[this.offsetRight-this.offsetLeft,0-this.offsetLeft],this._resetBtn()},t.prototype._initEvent=function(){var t=this;this.btnPrev.unbind("click").click(function(e){if(!$(this).hasClass("off")){t._lockBtn();var a=t.curPos+t.partSize+t.offsetRight;t.to(a)}}),this.btnNext.unbind("click").click(function(e){if(!$(this).hasClass("off")){t._lockBtn();var a=t.curPos-t.partSize-t.offsetRight;t.to(a)}})},t.prototype._lockBtn=function(){this.btnPrev.addClass("off"),this.btnNext.addClass("off")},t.prototype._resetBtn=function(){this.curPos>=this.range[1]?this.btnPrev.addClass("off"):this.btnPrev.removeClass("off"),this.curPos<=this.range[0]?this.btnNext.addClass("off"):this.btnNext.removeClass("off")},t.prototype.refresh=function(){this.ctWidth=0,this._initPrototype(),this.to(this.range[1])},t.prototype.to=function(t){var e=this;t<e.range[0]?e.curPos=e.range[0]:t>e.range[1]?e.curPos=e.range[1]:e.curPos=t,e._lockBtn(),e.main.css("left",e.curPos),setTimeout(function(){e._resetBtn()},this.duration)},t}),define("calendar",["dataCtrl","templateModule","Slider","moment"],function(t,e,a,n){function i(){var t=w.find(".today").index();$(window).width()>1260?h.to(-(60*(t-8))):h.to(-(60*(t-6)))}function s(){var t=_.find(".today").index();$(window).width()>1260?f.to(-(60*(t-3))):f.to(-(60*(t-1)))}function o(t){var e=v[t];e&&(b.text(n(t).format("YYYY\u5e74MM\u6708DD\u65e5")),y.text("\u6bd4\u8d5b\u89c6\u9891(\u5171"+e.number+"\u573a)"))}function r(n){u=n,t.getMatchDate().then(function(t){var n=t.data;m=t.today,N[0]=n[0].date,N[1]=n[n.length-1].date,$.each(n,function(t,e){v[e.date]=e}),w.empty().html(e("matchDateList",t)),_.empty().html(e("floatMatchDateList",t));var r,l;$(window).width()>1260?(r=960,l=360):(r=720,l=240),h=new a($("#ct-match-date-list"),{partSize:r}),f=new a($("#ct-match-date-list-float"),{partSize:l}),i(),s(),o(m),c(),u(m)})}function c(){p=w.find(".item"),g=_.find(".item"),p.click(function(t){var e=$(this).attr("data-date");d(e),s()}),g.click(function(t){var e=$(this).attr("data-date");d(e),i()}),$(".ct-ctrl-date .yesterday").click(function(t){d(l(m,!1,-1)),s(),i()}),$(".ct-ctrl-date .tomorrow").click(function(t){d(l(m,!0,1)),s(),i()}),$(".calendar .calendar-more").click(function(t){if(t.stopPropagation(),k)$("#laydate_box").hide(),k=!1;else{k=!0,$("#laydate_box").show();var e={elem:"#datepicker",isclear:!1,istoday:!1,issure:!1,min:N[0],max:N[1],choose:function(t){d(t),i(),s(),k=!1}};laydate(e)}}),$(".scroll-fixed .calendar-more").click(function(t){if(t.stopPropagation(),k)$("#laydate_box").hide(),k=!1;else{k=!0,$("#laydate_box").show();var e={elem:"#datepicker-float",isclear:!1,istoday:!1,issure:!1,min:N[0],max:N[1],choose:function(t){d(t),i(),s(),k=!1}};laydate(e)}}),$(document).click(function(t){$("#laydate_box").hide(),k=!1})}function l(t,e,a){return a&&(t=n(t).add(a,"days").format("YYYY-MM-DD")),v[t]?t:e?l(n(t).add(1,"days").format("YYYY-MM-DD"),e):l(n(t).subtract(1,"days").format("YYYY-MM-DD"),e)}function d(t){m=l(t),p.removeClass("today").filter("[data-date="+m+"]").addClass("today"),g.removeClass("today").filter("[data-date="+m+"]").addClass("today"),o(m),u(m)}var m,h,f,u,p,g,v={},b=$(".tab .tab-date"),y=$(".tab .tab-gamenum"),w=$("#slider-cont-big"),_=$(".small-calendar-list"),k=!1,N=[];return{currentDay:m,scheduleData:v,hideDatePicker:function(){$("#laydate_box").hide(),k=!1},init:r}}),define("schedule",["dataCtrl","moment","templateModule"],function(t,e,a){function n(){$(".future-game-list li .subscribe").hover(function(){"yes"==$(this).attr("data-subscribe")?$(this).attr("src","//mat1.gtimg.com/sports/test/john/nbagame/remove_subscribe.jpg"):$(this).attr("src","//mat1.gtimg.com/sports/test/john/nbagame/subscribe_hover.jpg")},function(){"yes"==$(this).attr("data-subscribe")?$(this).attr("src","//mat1.gtimg.com/sports/test/john/nbagame/subscribed.jpg"):$(this).attr("src","//mat1.gtimg.com/sports/test/john/nbagame/subscribe.jpg")}),$(".future-game-list li .subscribe").on("click",function(){"\u767b\u5f55"==$(".login a.avatar").html()?window.login.openLogin():"yes"==$(this).attr("data-subscribe")?($(this).attr("data-subscribe","no"),$(this).attr("src","//mat1.gtimg.com/sports/test/john/nbagame/subscribe.jpg")):($(this).attr("data-subscribe","yes"),$(this).attr("src","//mat1.gtimg.com/sports/test/john/nbagame/subscribed.jpg"))})}var i=$(".future-date"),s=function(s,o){t.getScheduleByDate(s,s,function(t){if(t=t[s]){var r={schedules:[{data:t,date:e(s).format("MM\u6708DD\u65e5")}]};i.html(a("schedule",r)),i.show(),n(),o&&o(t)}})};return{loadSchedule:s}}),define("commonUtil",[],function(){function t(t){if(t){if(/^\d{2}:\d{2}$/.test(t))return t;var e="02:00";if(t.length<5){var a=Math.floor(parseInt(t)/60);a<10&&(a="0"+a);var n=parseInt(t)%60;return n<10&&(n="0"+n),e=a+":"+n}var i=t.split(":");return e=i[1]+":"+i[2]}return"02:00"}function e(t){if(t){if(t>1e4){var e=parseInt(t/1e4)+"\u4e07";return e}return t}return"10\u4e07"}return{durationFormat:t,viewTimesformat:e}}),define("gameList",["dataCtrl","templateModule","commonUtil","Slider"],function(t,e,a,n){function i(){c.find(".player .icon").hover(function(){var a=$(this).parent(),n=a.attr("data-playerid");0==a.attr("data-loaded")&&t.getPlayerInfo(n,function(t){a.attr("href","//nba.stats.qq.com/player/?id="+n),a.prepend(e("playerTips",t)),a.attr("data-loaded","1"),a.find(".follow").click(function(t){t.stopPropagation(),t.preventDefault(),"\u767b\u5f55"==$(".login a.avatar").html()?window.login.openLogin():(console.log(a.attr("data-followed")),a.attr("data-followed","yes"),$(this).hide(),a.find(".followed").show());try{ExposureBoss(null,"VM_match_qygd")}catch(t){}}),a.find(".followed").click(function(t){t.stopPropagation(),t.preventDefault(),"\u767b\u5f55"==$(".login a.avatar").html()?window.login.openLogin():(a.attr("data-followed","no"),$(this).hide(),a.find(".follow").show())})})},function(){}),$.each(c.find(".game-item"),function(t,e){var a=$(e);a.find(".videos").children().length>9&&a.addClass("has-more")}),c.find(".has-more .btn-more").click(function(t){$(this).parent().parent().addClass("load-more")}),c.find(".has-more .btn-pack-up").click(function(t){$(this).parent().parent().removeClass("load-more")})}var s,o=$("#ct-collection #list"),r=$("#ct-collection .btn"),c=$("#game-list");s=$(window).width()>1260?6:5;var l,d=function(d){t.getGameDataListData(d,function(t){$.each(t,function(t,e){e.videos&&e.videos.totalList&&$.each(e.videos.totalList,function(t,e){e.duration=a.durationFormat(e.duration),e.view=a.viewTimesformat(e.view)}),e.videos&&e.videos.playbackList&&$.each(e.videos.playbackList,function(t,e){e.duration=a.durationFormat(e.duration),e.view=a.viewTimesformat(e.view)})});var d={data:[]};$.each(t,function(t,e){if(e.videos&&e.videos.totalList){var a=e.videos.totalList;a.length&&d.data.push(a[0])}}),o.html(e("collectionVideoList",d)).show(),l?l.refresh():l=new n($("#ct-collection"),{partSize:210*(s-1)}),d.data.length<6?r.hide():r.show(),c.html(e("gameVideoList",{data:t})),i()},2*Math.floor(s/2))};return{load:d}}),define("mainDate",["calendar","schedule","gameList"],function(t,e,a){t.init(function(t){e.loadSchedule(t,function(t){var e=t.filter(function(t){return 0!=t.matchPeriod}).map(function(t){return t.mid.split(":")[1]});e.length?($("#ct-collection,#game-list").show(),a.load(e)):$("#ct-collection,#game-list").hide()})})}),define("teams",["templateModule","ButtonBar"],function(t,e){var a=[{name:"\u4e1c\u90e8\u8054\u76df",logo:"//mat1.gtimg.com/sports/test/john/nbagame/east_union.png",areas:[{name:"\u5927\u897f\u6d0b\u5206\u533a",teams:[{name:"\u6ce2\u58eb\u987f \u51ef\u5c14\u7279\u4eba",sortEnName:"celtics"},{name:"\u5e03\u9c81\u514b\u6797 \u7bee\u7f51",sortEnName:"nets"},{name:"\u7ebd\u7ea6 \u5c3c\u514b\u65af",sortEnName:"knicks"},{name:"\u8d39\u57ce 76\u4eba",sortEnName:"sixers"},{name:"\u591a\u4f26\u591a \u731b\u9f99",sortEnName:"raptors"}]},{name:"\u4e2d\u592e\u5206\u533a",teams:[{name:"\u829d\u52a0\u54e5 \u516c\u725b",sortEnName:"bulls"},{name:"\u514b\u5229\u592b\u5170 \u9a91\u58eb",sortEnName:"cavaliers"},{name:"\u5e95\u7279\u5f8b \u6d3b\u585e",sortEnName:"pistons"},{name:"\u5370\u7b2c\u5b89\u7eb3 \u6b65\u884c\u8005",sortEnName:"pacers"},{name:"\u5bc6\u5c14\u6c83\u57fa \u96c4\u9e7f",sortEnName:"bucks"}]},{name:"\u4e1c\u5357\u5206\u533a",teams:[{name:"\u4e9a\u7279\u5170\u5927 \u8001\u9e70",sortEnName:"hawks"},{name:"\u590f\u6d1b\u7279 \u9ec4\u8702",sortEnName:"hornets"},{name:"\u8fc8\u963f\u5bc6 \u70ed\u706b",sortEnName:"heat"},{name:"\u5965\u5170\u591a \u9b54\u672f",sortEnName:"magic"},{name:"\u534e\u76db\u987f \u5947\u624d",sortEnName:"wizards"}]}]},{name:"\u897f\u90e8\u8054\u76df",logo:"//mat1.gtimg.com/sports/test/john/nbagame/west_union.jpg",areas:[{name:"\u897f\u5317\u5206\u533a",teams:[{name:"\u4e39\u4f5b \u6398\u91d1",sortEnName:"nuggets"},{name:"\u660e\u5c3c\u82cf\u8fbe \u68ee\u6797\u72fc",sortEnName:"timberwolves"},{name:"\u5965\u514b\u62c9\u8377\u9a6c\u57ce \u96f7\u9706",sortEnName:"thunder"},{name:"\u6ce2\u7279\u5170 \u5f00\u62d3\u8005",sortEnName:"blazers"},{name:"\u72b9\u4ed6 \u7235\u58eb",sortEnName:"jazz"}]},{name:"\u592a\u5e73\u6d0b\u5206\u533a",teams:[{name:"\u91d1\u5dde \u52c7\u58eb",sortEnName:"warriors"},{name:"\u6d1b\u6749\u77f6 \u5feb\u8239",sortEnName:"clippers"},{name:"\u6d1b\u6749\u77f6 \u6e56\u4eba",sortEnName:"lakers"},{name:"\u83f2\u5c3c\u514b\u65af \u592a\u9633",sortEnName:"suns"},{name:"\u8428\u514b\u62c9\u95e8\u6258 \u56fd\u738b",sortEnName:"kings"}]},{name:"\u897f\u5357\u5206\u533a",teams:[{name:"\u8fbe\u62c9\u65af \u72ec\u884c\u4fa0",sortEnName:"mavericks"},{name:"\u4f11\u65af\u987f \u706b\u7bad",sortEnName:"rockets"},{name:"\u5b5f\u83f2\u65af \u7070\u718a",sortEnName:"grizzlies"},{name:"\u65b0\u5965\u5c14\u826f \u9e48\u9e55",sortEnName:"pelicans"},{name:"\u5723\u5b89\u4e1c\u5c3c\u5965 \u9a6c\u523a",sortEnName:"spurs"}]}]}];$.each(a,function(t,e){$.each(e.areas,function(t,e){$.each(e.teams,function(t,e){e.logo="//f.seals.qq.com/filestore/10006/da/64/87/0/sportlogo/team_2_"+_QQNBA_TEAM_IDS[e.sortEnName].kbs_id+".png",e.kbsId=_QQNBA_TEAM_IDS[e.sortEnName].kbs_id})})});var n=$("#ct-unions"),i=function(i){n.html(t("teams",{unions:a})),new e(n,{selectIndex:0,selectedClass:"btn-selected",change:function(t,e){i(e.attr("data-kbs-id"),e.find(".team-name").text())}})};return{init:i}}),define("timeCtrl",["moment","templateModule","ButtonBar"],function(t,e,a){var n,i=$("#time-list"),s=function(s){n=s;for(var o=2015,r=10,c=[],l=(t(),t().year()),d=t().month()+1,m=l;m>=o;m--){var h={};if(h.year=m,m==l)for(h.months=[];d>0;)h.months.push(d),d--;else if(m==o){h.months=[];for(var f=12;f>=r;)h.months.push(f),f--}else h.months=[12,11,10,9,8,7,6,5,4,3,2,1];c.push(h)}i.html(e("timeList",{years:c})),new a(i,{selectIndex:0,change:function(t,e){i.find(".year").removeClass("selected"),$(e).parent().addClass("selected")}}),new a(i,{btn:".month",selectIndex:0,change:function(t,e){var a=$(e),n=a.attr("data-year"),i=a.attr("data-month")>9?a.attr("data-month"):"0"+a.attr("data-month");s([n,i])}})};return{init:s}}),define("mainTeam",["teams","timeCtrl","dataCtrl","commonUtil","templateModule","moment"],function(t,e,a,n,i,s){function o(){c&&f&&a.getTeamListData(f,c,function(t){$.each(t,function(t,e){$.each(e.videos.totalList,function(t,a){a.duration=n.durationFormat(e.duration),a.view=n.viewTimesformat(e.view)})}),m.html(i("gameVideoList",{data:t})),d.show(),r()})}function r(){m.find(".player .icon").hover(function(){var t=$(this).parent(),e=t.attr("data-playerid");0==t.attr("data-loaded")&&a.getPlayerInfo(e,function(a){console.log(a),t.attr("href","//nba.stats.qq.com/player/?id="+e),t.prepend(i("playerTips",a)),t.attr("data-loaded","1"),t.find(".follow").click(function(e){e.stopPropagation(),e.preventDefault(),"\u767b\u5f55"==$(".login a.avatar").html()?window.login.openLogin():(t.attr("data-followed","yes"),$(this).hide(),t.find(".followed").show());try{ExposureBoss(null,"VM_match_qygd")}catch(e){}}),t.find(".followed").click(function(e){e.stopPropagation(),e.preventDefault(),"\u767b\u5f55"==$(".login a.avatar").html()?window.login.openLogin():(t.attr("data-followed","no"),$(this).hide(),h.html(""),t.find(".follow").show())})})},function(){}),$.each(m.find(".game-item"),function(t,e){var a=$(e);a.find(".videos").children().length>7&&a.addClass("has-more")}),m.find(".has-more .btn-more").click(function(t){$(this).parent().parent().addClass("load-more")}),m.find(".has-more .btn-pack-up").click(function(t){$(this).parent().parent().removeClass("load-more")}),$("#load-more .btn").click(function(t){a.getMatchParade(f,function(t){t=t[c].filter(function(t){return"0"==t.matchPeriod||"1"==t.matchPeriod});var e={schedules:[]},a={};$.each(t,function(t,e){var n=s(e.startTime).format("MM\u6708DD\u65e5");a[n]?a[n].data.push(e):a[n]={data:[e],date:n}}),$.each(a,function(t,a){e.schedules.push(a)}),console.log(e),h.html(i("schedule",e)),d.hide()})})}var c,l=$("#team-name .title"),d=$("#team-name #load-more"),m=$("#team-list"),h=$("#team-future-list");e.init(function(t){c=t[0]+"-"+t[1],o()});var f;t.init(function(t,e){f=t,l.text(e+"\u5168\u90e8\u6bd4\u8d5b"),o()})}),define("main",["SportsLogin","ButtonBar","mainDate","mainTeam","calendar"],function(t,e,a,n,i){t.init({root:"ct-login",onLogin:function(t){},onLogout:function(){console.log("logout")}}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),a=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],i=arguments.length>=2?arguments[1]:void 0,s=0;s<a;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&n.push(o)}return n}),Array.prototype.map||(Array.prototype.map=function(t,e){var a,n,i;if(null==this)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(a=e),n=new Array(o),i=0;i<o;){var r,c;i in s&&(r=s[i],c=t.call(a,r,i,s),n[i]=c),i++}return n});var s=$(".ct-btn-bar"),o=$("#ct-match-date"),r=$("#ct-match-team"),c=$(".ct-ctrl-date"),l=new e(s,{selectIndex:0,selectedClass:"btn-selected",change:function(t){switch(t){case 0:o.show(),c.show(),r.hide();break;case 1:d&&d.hide(),c.hide(),o.hide(),r.show()}m&&m.setSelectIndex(t,!1)}}),d=$(".ct-tab-bar-float"),m=new e(d,{selectIndex:0,selectedClass:"btn-selected",change:function(t){l.setSelectIndex(t)}}),h=!1,f=$("#time-list");$(window).scroll(function(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>360&&0==l.selectIndex?h||(i.hideDatePicker(),d.show(),h=!0):h&&(i.hideDatePicker(),d.hide(),h=!1),t>700?document.body.clientWidth<=1440?f.addClass("time-list-fix-1440"):f.addClass("time-list-fix"):document.body.clientWidth<=1440?f.removeClass("time-list-fix-1440"):f.removeClass("time-list-fix"),laydate.reset()})}),require.config({baseUrl:"./scripts/",paths:{promise:"//mat1.gtimg.com/statsnba/libs/bluebird.min",moment:"//mat1.gtimg.com/statsnba/libs/moment.min",SportsLogin:"//mat1.gtimg.com/pingjs/ext2020/sports/libs/dist/login"},shim:{}}),require(["main"]),define("config",function(){})}();
//# sourceMappingURL=main-39c3613595.js.map
/*  |xGv00|ecfe8eef5990f00dfcf444dea0ac7426 */
window.QZFL=window.QZFL||{};if(typeof QZONE=="object")QZFL=QZONE;else window.QZONE=QZFL={};QZFL.version="2.0.9.2";QZFL._qzfl=2.092;QZFL.emptyFn=function(){};QZFL.returnFn=function(a){return a};QZFL.userAgent=function(){function a(){if(!a.adjusted&&c&&c<7){try{document.execCommand("BackgroundImageCache",false,true)}catch(q){}a.adjusted=true}}var b,c,d,e,h,n,g,x,z,y,t,p,o,r,v=navigator.userAgent,f=navigator.appVersion;b=/(?:Firefox|GranParadiso|Iceweasel|Minefield).(\d+\.\d+)/i;var i=/AppleWebKit.(\d+\.\d+)/i,j=/Chrome.(\d+\.\d+)/i,k=/Version.(\d+\.\d+)/i,u=/Windows.+?(\d+\.\d+)/;c=d=e=h=n=g=x=z=NaN;y=t=p=o=false;if(window.ActiveXObject){c=9-(f.indexOf("Trident/5.0")>-1?0:1)-(window.XDomainRequest?0:1)-(window.XMLHttpRequest?0:1);b=navigator.appMinorVersion;if(c>7&&b&&b.toLowerCase().indexOf("beta")>-1)p=true}else if(document.getBoxObjectFor||typeof window.mozInnerScreenX!="undefined"){b=v.match(b);d=parseFloat(b&&b[1]||"3.3",10)}else if(navigator.taintEnabled)if(window.opera)e=parseFloat(f,10);else c=6;else{n=(b=v.match(i))&&b.length>1?parseFloat(b[1],10):document.evaluate?document.querySelector?525:420:419;if((b=f.match(j))||window.chrome){b||(b=v.match(j));x=parseFloat(b&&b[1]||"2.0",10)}if((b=f.match(k))&&!window.chrome){b||(b=v.match(k));h=parseFloat(b&&b[1]||"3.3",10)}if(v.indexOf("AdobeAIR")>-1)g=1;if(v.indexOf("iPad")>-1)o=true;if(v.indexOf("iPhone")>-1)r=true}if(v.indexOf("Windows")>-1){y=true;b=v.match(u);z=parseFloat(b&&b[1]||"5.1",10)}else if(v.indexOf("Mac OS X")>-1)t=true;else y=true;return{beta:p,firefox:d,ie:c,opera:e,air:g,safari:h,safariV:h,webkit:n,chrome:x,adjustBehaviors:a,windows:z||y,isiPad:o,isiPhone:r,macs:t}}();QZFL.object={map:function(a,b){QZFL.object.extend(b||window,a)},extend:function(){var a=arguments[0]||{},b=1,c=arguments.length,d=false,e,h,n,g;if(typeof a==="boolean"){d=a;a=arguments[1]||{};b=2}if(typeof a!=="object"&&QZFL.object.getType(a)!=="function")a={};if(c===b){a=QZFL;--b}for(;b<c;b++)if((e=arguments[b])!=null)for(h in e){n=a[h];g=e[h];if(a!==g)if(d&&g&&typeof g==="object"&&!g.nodeType){n=n?n:QZFL.lang.isArray(g)?[]:QZFL.object.getType(g)==="object"?{}:g;a[h]=QZFL.object.extend(d,n,g)}else if(g!==undefined)a[h]=g}return a},each:function(a,b){var c,d=0,e=a.length;if(e===undefined||typeof a=="function")for(c in a){if(b.call(a[c],a[c],c,a)===false)break}else for(c=a[0];d<e&&b.call(c,c,d,a)!==false;c=a[++d]);return a},getType:function(a){return a===null?"null":a===undefined?"undefined":Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},routeRE:/([\d\w_]+)/g,route:function(a,b){a=a||{};b+="";var c=QZFL.object.routeRE,d;for(c.lastIndex=0;(d=c.exec(b))!==null;){a=a[d[0]];if(a===undefined||a===null)break}return a},bind:function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var d=a||this,e=c.concat(Array.prototype.slice.call(arguments,0));if(typeof b=="string"){if(d[b])return d[b].apply(d,e)}else return b.apply(d,e)}}};QZFL.console={print:function(a,b){window.console&&console.log((b==4?new Date+":":"")+a)}};QZFL.runTime={isDebugMode:false,error:QZFL.emptyFn,warn:QZFL.emptyFn};QZFL.widget={};QZFL.namespace=QZFL.object;QZFL.config={debugLevel:0,defaultDataCharacterSet:"GB2312",DCCookieDomain:"qzone.qq.com",domainPrefix:"qq.com",gbEncoderPath:"http://imgcache.qq.com/qzone/v5/toolpages/",FSHelperPage:"http://imgcache.qq.com/qzone/v5/toolpages/fp_gbk.html",defaultShareObject:"http://imgcache.qq.com/qzone/v5/toolpages/getset.swf",staticServer:"http://imgcache.qq.com/ac/qzone/qzfl/lc/"};QZFL.string={RegExps:{trim:/^\s+|\s+$/g,ltrim:/^\s+/,rtrim:/\s+$/,nl2br:/\n/g,s2nb:/[\x20]{2}/g,URIencode:/[\x09\x0A\x0D\x20\x21-\x29\x2B\x2C\x2F\x3A-\x3F\x5B-\x5E\x60\x7B-\x7E]/g,escHTML:{re_amp:/&/g,re_lt:/</g,re_gt:/>/g,re_apos:/\x27/g,re_quot:/\x22/g},escString:{bsls:/\\/g,nl:/\n/g,rt:/\r/g,tab:/\t/g},restXHTML:{re_amp:/&amp;/g,re_lt:/&lt;/g,re_gt:/&gt;/g,re_apos:/&(?:apos|#0?39);/g,re_quot:/&quot;/g},write:/\{(\d{1,2})(?:\:([xodQqb]))?\}/g,isURL:/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i,cut:/[\x00-\xFF]/,getRealLen:{r0:/[^\x00-\xFF]/g,r1:/[\x00-\xFF]/g},format:/\{([\d\w\.]+)\}/g},commonReplace:function(a,b,c){return a.replace(b,c)},listReplace:function(a,b){if(QZFL.lang.isHashMap(b)){for(var c in b)a=QZFL.string.commonReplace(a,b[c],c);return a}else return a+""},trim:function(a){return QZFL.string.commonReplace(a+"",QZFL.string.RegExps.trim,"")},ltrim:function(a){return QZFL.string.commonReplace(a+"",QZFL.string.RegExps.ltrim,"")},rtrim:function(a){return QZFL.string.commonReplace(a+"",QZFL.string.RegExps.rtrim,"")},nl2br:function(a){return QZFL.string.commonReplace(a+"",QZFL.string.RegExps.nl2br,"<br />")},s2nb:function(a){return QZFL.string.commonReplace(a+"",QZFL.string.RegExps.s2nb,"&nbsp;&nbsp;")},URIencode:function(a){var b,c;return(a+"").replace(QZFL.string.RegExps.URIencode,function(d){if(d==" ")return"+";else if(d=="\r")return"";b=d.charCodeAt(0);c=b.toString(16);return"%"+(b<16?"0"+c:c)})},escHTML:function(a){var b=QZFL.string.RegExps.escHTML;return QZFL.string.listReplace(a+"",{"&amp;":b.re_amp,"&lt;":b.re_lt,"&gt;":b.re_gt,"&#039;":b.re_apos,"&quot;":b.re_quot})},escString:function(a){var b=QZFL.string.RegExps.escString,c=QZFL.string.RegExps.escHTML;return QZFL.string.listReplace(a+"",{"\\\\":b.bsls,"\\n":b.nl,"":b.rt,"\\t":b.tab,"\\'":c.re_apos,'\\"':c.re_quot})},restHTML:function(a){if(!QZFL.string.restHTML.__utilDiv)QZFL.string.restHTML.__utilDiv=document.createElement("div");var b=QZFL.string.restHTML.__utilDiv;b.innerHTML=a+"";return typeof b.innerText!="undefined"?b.innerText:typeof b.textContent!="undefined"?b.textContent:typeof b.text!="undefined"?b.text:""},restXHTML:function(a){var b=QZFL.string.RegExps.restXHTML;return QZFL.string.listReplace(a+"",{"<":b.re_lt,">":b.re_gt,"'":b.re_apos,'"':b.re_quot,"&":b.re_amp})},write:function(a){if(arguments.length<1||!QZFL.lang.isString(a))return"";var b=QZFL.lang.arg2arr(arguments);return b.shift().replace(QZFL.string.RegExps.write,function(c,d,e){d=parseInt(d,10);if(d<0||typeof b[d]=="undefined")return"(n/a)";else if(e)switch(e){case"x":return"0x"+b[d].toString(16);case"o":return"o"+b[d].toString(8);case"d":return b[d].toString(10);case"Q":return'"'+b[d].toString(16)+'"';case"q":return"`"+b[d].toString(16)+"'";case"b":return"<"+!!b[d]+">"}else return b[d]})},isURL:function(a){return QZFL.string.RegExps.isURL.test(a)},customEncode:function(a,b){var c;if(typeof b=="undefined")b="";switch(b.toUpperCase()){case"URICPT":c=encodeURIComponent(a);break;default:c=encodeURIComponent(a)}return c},escapeURI:function(a){if(window.encodeURIComponent)return encodeURIComponent(a);if(window.escape)return escape(a);return""},fillLength:function(a,b,c,d){a+="";if(a.length<b){b=(1<<b-a.length).toString(2).substring(1);if(c)b=b.replace("0",c);return d?a+b:b+a}else return a},cut:function(a,b,c){a+="";b-=0;c=c||"";if(isNaN(b))return a;for(var d=a.length,e=Math.min(Math.floor(b/2),d),h=QZFL.string.getRealLen(a.slice(0,e));e<d&&h<b;e++)h+=1+!QZFL.string.RegExps.cut.test(a.charAt(e));return a.slice(0,h>b?e-1:e)+(e<d?c:"")},getRealLen:function(a,b){if(typeof a!="string")return 0;if(b){var c=a.replace(QZFL.string.RegExps.getRealLen.r1,"");return a.length-c.length+encodeURI(c).length/3}else return a.replace(QZFL.string.RegExps.getRealLen.r0,"**").length},format:function(a){var b=Array.prototype.slice.call(arguments),c;a=b.shift()+"";if(b.length==1&&typeof b[0]=="object")b=b[0];QZFL.string.RegExps.format.lastIndex=0;return a.replace(QZFL.string.RegExps.format,function(d,e){c=QZFL.object.route(b,e);return c===undefined?d:c})}};QZFL.css={classNameCache:{},getClassRegEx:function(a){var b=QZFL.css.classNameCache;return b[a]||(b[a]=RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)"))},convertHexColor:function(a){a=(a||"").toString();a.charAt(0)=="#"&&(a=a.substring(1));a.length==3&&(a=a.replace(/([0-9a-f])/ig,"$1$1"));return a.length==6?["0x"+a.substr(0,2)-0,"0x"+a.substr(2,2)-0,"0x"+a.substr(4,2)-0]:[0,0,0]},styleSheets:{},getStyleSheetById:function(a){var b;return(b=QZFL.dom.get(a))&&b.sheet||(b=document.styleSheets)&&b[a]},getRulesBySheet:function(a){a=typeof a=="object"?a:QZFL.css.getStyleSheetById(a);var b={},c,d;if(a&&!(b=a.cssRules||a.rules))if(c=document.getElementsByTagName("head")[0])if(d=c.getElementsByTagName("base")[0]){QZFL.dom.removeElement(d);b=a.cssRules;c.appendChild(d)}return b},getRuleBySelector:function(a,b){var c=QZFL.css.getStyleSheetById(a),d=QZFL.css.getRulesBySheet(c);if(!d)return null;b=(b+"").toLowerCase();!c.cacheSelector&&(c.cacheSelector={});var e=c.cacheSelector[b];if(e&&d[e]&&b==(d[e].selectorText+"").toLowerCase())return d[e];e=0;for(var h=d.length;e<h;e++)if(b==(d[e].selectorText+"").toLowerCase()){c.cacheSelector[b]=e;return d[e]}return null},insertCSSLink:function(a,b){var c=document,d=(d=$(b))&&d.nodeName=="LINK"?d:null,e=c.getElementsByTagName("head")[0];if(!d){d=c.createElement("link");b&&(d.id=b);d.rel="stylesheet";d.rev="stylesheet";d.type="text/css";d.media="screen";e.appendChild(d)}a&&(d.href=a);return d.sheet||d},insertStyleSheet:function(a,b){var c=document.createElement("style");c.type="text/css";a&&(c.id=a);document.getElementsByTagName("head")[0].appendChild(c);if(b)if(c.styleSheet)c.styleSheet.cssText=b;else c.appendChild(document.createTextNode(b));return c.sheet||c},removeStyleSheet:function(a){(a=QZFL.css.getStyleSheetById(a))&&QZFL.dom.removeElement(a.owningElement||a.ownerNode)},updateClassName:function(a,b,c){if(!(!a||a.nodeType!=1)){var d=a.className;if(b&&typeof b=="string"||c&&typeof c=="string"){if(b=="*")d="";else{var e=d.split(" "),h=0,n,g=e.length,x,z;for(d={};h<g;h++)e[h]&&(d[e[h]]=true);if(c){e=c.split(" ");g=e.length;for(h=0;h<g;h++)(x=e[h])&&!d[x]&&(z=d[x]=true)}if(b){e=b.split(" ");g=e.length;for(h=0;h<g;h++)(x=e[h])&&d[x]&&(z=true)&&delete d[x]}e.length=0;for(n in d)e.push(n);d=e.join(" ")}if(z)a.className=d}return d}},hasClassName:function(a,b){return a&&(a=a.className)&&b&&(" "+a+" ").indexOf(" "+b+" ")+1},addClassName:function(a,b){QZFL.css.updateClassName(a,null,b)},removeClassName:function(a,b){QZFL.css.updateClassName(a,b)},replaceClassName:function(a,b,c){QZFL.css.swapClassName(a,b,c,true)},swapClassName:function(a,b,c,d){if(a){if(a.constructor!=Array)a=[a];for(var e,h=0,n=a.length;h<n;h++)if((e=a[h])&&e.nodeType==1)if(QZFL.css.hasClassName(e,b))QZFL.css.updateClassName(e,b,c);else!d&&QZFL.css.hasClassName(e,c)&&QZFL.css.updateClassName(e,c,b)}},toggleClassName:function(a,b){!a||a.nodeType!=1||(QZFL.css.hasClassName(a,b)?QZFL.css.updateClassName(a,b):QZFL.css.updateClassName(a,null,b))}};QZFL.dom={getById:function(a){return document.getElementById(a)},getByName:function(a,b,c){return QZFL.selector((b||"")+'[name="'+a+'"]',c)},get:function(a){return typeof a=="string"?document.getElementById(a):a},getNode:function(a){return a&&(a.nodeType||a.item)?a:typeof a=="string"?document.getElementById(a):null},removeElement:function(a){if(typeof a=="string")a=document.getElementById(a);if(a){if(a.removeNode)a.removeNode(true);else a.parentNode&&a.parentNode.removeChild(a);return null}},searchElementByClassName:function(a,b){a=QZFL.dom.get(a);if(!a)return null;for(var c=QZFL.css.getClassRegEx(b);a;){if(c.test(a.className))return a;a=a.parentNode}return null},getElementsByClassName:function(a,b,c){return QZFL.selector((b||"")+"."+a,c)},isAncestor:function(a,b){if(!a||!b)return false;if(a.contains&&b.nodeType&&!QZFL.userAgent.webkit)return a.contains(b)&&a!=b;if(a.compareDocumentPosition&&b.nodeType)return!!(a.compareDocumentPosition(b)&16);else if(b.nodeType)return!!QZFL.dom.getAncestorBy(b,function(c){return c==a});return false},getAncestorBy:function(a,b){for(;a=a.parentNode;)if(a&&a.nodeType==1&&(!b||b(a)))return a;return null},getFirstChild:function(a){a=QZFL.dom.getNode(a);if(!a)return null;return(a.firstChild&&a.firstChild.nodeType==1?a.firstChild:null)||QZFL.dom.getNextSibling(a.firstChild)},getNextSibling:function(a){a=QZFL.dom.getNode(a);if(!a)return null;for(;a;)if((a=a.nextSibling)&&a.nodeType==1)return a;return null},getPreviousSibling:function(a){a=QZFL.dom.getNode(a);if(!a)return null;for(;a;)if((a=a.previousSibling)&&a.nodeType==1)return a;return null},swapNode:function(a,b){if(a.swapNode)a.swapNode(b);else{var c=b.parentNode,d=b.nextSibling;if(d==a)c.insertBefore(a,b);else if(b==a.nextSibling)c.insertBefore(b,a);else{a.parentNode.replaceChild(b,a);c.insertBefore(a,d)}}},createElementIn:function(a,b,c,d){a=a||"div";b=QZFL.dom.get(b)||document.body;a=b.ownerDocument.createElement(a);if(d)for(var e in d)if(e=="class")a.className=d[e];else if(e=="style")a.style.cssText=d[e];else a[e]=d[e];c?b.insertBefore(a,b.firstChild):b.appendChild(a);return a},getStyle:function(a,b){a=QZFL.dom.get(a);if(!a||a.nodeType==9)return null;var c=document.defaultView&&document.defaultView.getComputedStyle,d=!c?null:document.defaultView.getComputedStyle(a,"");switch(b){case"float":b=c?"cssFloat":"styleFloat";break;case"opacity":if(c)return parseFloat((d||a.style)[b]);else{c=100;try{c=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{c=a.filters("alpha").opacity}catch(h){}}return c/100}case"backgroundPositionX":if(c)return(d||a.style).backgroundPosition.split(" ")[0];break;case"backgroundPositionY":if(c)return(d||a.style).backgroundPosition.split(" ")[1]}return c?(d||a.style)[b]:a.currentStyle[b]||a.style[b]},setStyle:function(a,b,c){if(!(a=QZFL.dom.get(a))||a.nodeType!=1)return false;var d,e=true,h=(d=document.defaultView)&&d.getComputedStyle,n=/z-?index|font-?weight|opacity|zoom|line-?height/i;if(typeof b=="string"){d=b;b={};b[d]=c}for(var g in b){c=b[g];if(g=="float")g=h?"cssFloat":"styleFloat";else if(g=="opacity"){if(!h){g="filter";c=c>=1?"":"alpha(opacity="+Math.round(c*100)+")"}}else if(g=="backgroundPositionX"||g=="backgroundPositionY"){d=g.slice(-1)=="X"?"Y":"X";if(h){var x=QZFL.dom.getStyle(a,"backgroundPosition"+d);g="backgroundPosition";typeof c=="number"&&(c+="px");c=d=="Y"?c+" "+(x||"top"):(x||"left")+" "+c}}if(typeof a.style[g]!="undefined"){a.style[g]=c+(typeof c==="number"&&!n.test(g)?"px":"");e=e&&true}else e=e&&false}return e},createNamedElement:function(a,b,c){c=c||document;var d;try{d=c.createElement("<"+a+' name="'+b+'">')}catch(e){}d||(d=c.createElement(a));if(!d.name)d.name=b;return d},getPosition:function(a){var b=QZFL.dom.getXY(a);a=QZFL.dom.getSize(a);return{top:b[1],left:b[0],width:a[0],height:a[1]}},setPosition:function(a,b){QZFL.dom.setXY(a,b.left,b.top);QZFL.dom.setSize(a,b.width,b.height)},getXY:function(a,b){var c=0,d=0;if(a)if((b||document).documentElement.getBoundingClientRect&&a.getBoundingClientRect){d=a.getBoundingClientRect();var e=a.ownerDocument,h=QZFL.userAgent.ie?2:0;c=d.top-h+QZFL.dom.getScrollTop(e);d=d.left-h+QZFL.dom.getScrollLeft(e)}else for(;a.offsetParent;){c+=a.offsetTop;d+=a.offsetLeft;a=a.offsetParent}return[d,c]},getSize:function(a){var b=[0,0];if(a){QZFL.object.each(["Left","Right","Top","Bottom"],function(c){b[c=="Left"||c=="Right"?0:1]+=(parseInt(QZFL.dom.getStyle(a,"border"+c+"Width"),10)||0)+(parseInt(QZFL.dom.getStyle(a,"padding"+c),10)||0)});return[a.offsetWidth-b[0],a.offsetHeight-b[1]]}return[-1,-1]},setXY:function(a,b,c){a=QZFL.dom.get(a);var d=parseInt(QZFL.dom.getStyle(a,"marginLeft"))||0,e=parseInt(QZFL.dom.getStyle(a,"marginTop"))||0;QZFL.dom.setStyle(a,"left",parseInt(b)-d+"px");QZFL.dom.setStyle(a,"top",parseInt(c)-e+"px")},getScrollLeft:function(a){a=a||document;return Math.max(a.documentElement.scrollLeft,a.body.scrollLeft)},getScrollTop:function(a){a=a||document;return Math.max(a.documentElement.scrollTop,a.body.scrollTop)},getScrollHeight:function(a){a=a||document;return Math.max(a.documentElement.scrollHeight,a.body.scrollHeight)},getScrollWidth:function(a){a=a||document;return Math.max(a.documentElement.scrollWidth,a.body.scrollWidth)},setScrollLeft:function(a,b){var c=b||document;c[c.compatMode=="CSS1Compat"&&!QZFL.userAgent.webkit?"documentElement":"body"].scrollLeft=a},setScrollTop:function(a,b){var c=b||document;c[c.compatMode=="CSS1Compat"&&!QZFL.userAgent.webkit?"documentElement":"body"].scrollTop=a},getClientHeight:function(a){a=a||document;return a.compatMode=="CSS1Compat"?a.documentElement.clientHeight:a.body.clientHeight},getClientWidth:function(a){a=a||document;return a.compatMode=="CSS1Compat"?a.documentElement.clientWidth:a.body.clientWidth},_SET_SIZE_RE:/^\d+(?:\.\d*)?(px|%|em|in|cm|mm|pc|pt)?$/,setSize:function(a,b,c){a=QZFL.dom.get(a);var d=QZFL.dom._SET_SIZE_RE,e;QZFL.dom.setStyle(a,"width",(e=d.exec(b))?e[1]?b:parseInt(b,10)+"px":"auto");QZFL.dom.setStyle(a,"height",(e=d.exec(c))?e[1]?c:parseInt(c,10)+"px":"auto")},getDocumentWindow:function(a){a=a||document;return a.parentWindow||a.defaultView},getElementsByTagNameNS:function(a,b,c){var d=[];if(a)if(a.getElementsByTagNameNS)return a.getElementsByTagName(b+":"+c);else if(a.getElementsByTagName)if(document.namespaces.length>0){a=a.getElementsByTagName(c);c=0;for(var e=a.length;c<e;++c)a[c].scopeName==b&&d.push(a[c])}return d},collection2Array:function(a){if(QZFL.lang.isArray(a))return a;else for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c]);return b},getElementByTagNameBubble:function(a,b){if(!isNode(a))return null;b+="";for(var c=31;a&&a.tagName&&a.tagName!=b.toUpperCase();){if(a==document.body||--c<0)return null;a=a.parentNode}return a}};QZFL.util={buildUri:function(a){return new QZFL.util.URI(a)},URI:function(a){if(QZFL.object.getType(a)!="string")return null;if(a.indexOf("://")<1)a=location.protocol+"//"+location.host+(a.indexOf("/")==0?"":location.pathname.substr(0,location.pathname.lastIndexOf("/")+1))+a;var b=a.split("://");if(QZFL.object.getType(b)=="array"&&b.length>1&&/^[a-zA-Z]+$/.test(b[0])){this.protocol=b[0].toLowerCase();var c=b[1].split("/");if(QZFL.object.getType(c)=="array"){this.host=c[0];this.pathname="/"+c.slice(1).join("/").replace(/(\?|\#).+/i,"");this.href=a;a=b[1].lastIndexOf("?");c=b[1].lastIndexOf("#");this.search=a>=0?b[1].substring(a):"";this.hash=c>=0?b[1].substring(c):"";if(this.search.length>0&&this.hash.length>0)this.search=c<a?"":b[1].substring(a,c);return this}else return null}else return null}};QZFL.lang={isString:function(a){return QZFL.object.getType(a)=="string"},isArray:function(a){return QZFL.object.getType(a)=="array"},isFunction:function(a){return QZFL.object.getType(a)=="function"},isHashMap:function(a){return QZFL.object.getType(a)=="object"},isNode:function(a){if(typeof Node=="undefined")Node=null;try{if(!a||!(Node!=undefined&&a instanceof Node||a.nodeName))return false}catch(b){return false}return true},isElement:function(a){return a&&a.nodeType==1}};QZFL.queue=function(){var a=QZFL.object,b={},c=function(e,h){if(this instanceof arguments.callee){this._qz_queuekey=e;return this}if(a.getType(h=h||[])=="array")b[e]=h;return new c(e)},d={push:function(e,h){h=this._qz_queuekey?e:h;b[this._qz_queuekey||e].push(h)},shift:function(e){if(e=b[this._qz_queuekey||e])return QZFL.queue._exec(e.shift())},getLen:function(e){return b[this._qz_queuekey||e].length},run:function(e){(e=b[this._qz_queuekey||e])&&a.each(e,QZFL.queue._exec)},timedChunk:function(e,h){var n;if(b[this._qz_queuekey||e]){n=QZFL.lang.propertieCopy(h,QZFL.queue._tcCof,null,true);setTimeout(function(){var g=+new Date;do QZFL.queue.shift(e);while(QZFL.queue.getLen(e)>0&&+new Date-g<n.runTime);if(QZFL.queue.getLen(e)>0){setTimeout(arguments.callee,n.waitTime);n.onWait()}else n.onRunEnd()},0)}},_tcCof:{runTime:50,waitTime:25,onRunEnd:QZFL.emptyFn,onWait:QZFL.emptyFn},_exec:function(e,h,n){if(!e||a.getType(e)!="function"){if(a.getType(h)=="number")n[h]=null;return false}try{return e()}catch(g){QZFL.console.print("QZFL Queue Got An Error: ["+g.name+"]  "+g.message,1)}}};a.extend(c.prototype,d);a.extend(c,d);return c}();QZFL.event={KEYS:{BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},_eventListDictionary:{},_fnSeqUID:0,_objSeqUID:0,addEvent:function(a,b,c,d){var e,h=false,n;if(!a)return h;if(!a.eventsListUID)a.eventsListUID="e"+ ++QZFL.event._objSeqUID;if(!(n=QZFL.event._eventListDictionary[a.eventsListUID]))n=QZFL.event._eventListDictionary[a.eventsListUID]={};if(!c.__elUID)c.__elUID="e"+ ++QZFL.event._fnSeqUID+a.eventsListUID;n[b]||(n[b]={});if(typeof n[b][c.__elUID]=="function")return false;e=function(g){return c.apply(a,!d?[QZFL.event.getEvent(g)]:[QZFL.event.getEvent(g)].concat(d))};if(a.addEventListener){a.addEventListener(b,e,false);h=true}else h=a.attachEvent?a.attachEvent("on"+b,e):false;if(h)n[b][c.__elUID]=e;return h},removeEvent:function(a,b,c){var d=c,e=false,h=QZFL.event._eventListDictionary,n;if(!a)return e;if(!c)return QZFL.event.purgeEvent(a,b);if(a.eventsListUID&&h[a.eventsListUID])if((h=h[a.eventsListUID][b])&&h[c.__elUID]){d=h[c.__elUID];n=h}if(a.removeEventListener){a.removeEventListener(b,d,false);e=true}else if(a.detachEvent){a.detachEvent("on"+b,d);e=true}else return false;e&&n&&n[c.__elUID]&&delete n[c.__elUID];return e},purgeEvent:function(a,b){var c;if(a.eventsListUID&&(c=QZFL.event._eventListDictionary[a.eventsListUID])&&c[b])for(var d in c[b])if(a.removeEventListener)a.removeEventListener(b,c[b][d],false);else a.detachEvent&&a.detachEvent("on"+b,c[b][d]);if(a["on"+b])a["on"+b]=null;if(c){c[b]=null;delete c[b]}return true},getEvent:function(a){a=window.event||a;var b,c;if(!a&&window.Event){b=arguments.callee;for(c=0;b;){if((a=b.arguments[0])&&typeof a.srcElement!="undefined")break;else if(c>9)break;b=b.caller;++c}}return a},getButton:function(a){a=QZFL.event.getEvent(a);if(!a)return-1;return QZFL.userAgent.ie?a.button-Math.ceil(a.button/2):a.button},getTarget:function(a){return(a=QZFL.event.getEvent(a))?a.srcElement||a.target:null},getCurrentTarget:function(a){return(a=QZFL.event.getEvent(a))?a.currentTarget||document.activeElement:null},cancelBubble:function(a){a=QZFL.event.getEvent(a);if(!a)return false;if(a.stopPropagation)a.stopPropagation();else if(!a.cancelBubble)a.cancelBubble=true},preventDefault:function(a){a=QZFL.event.getEvent(a);if(!a)return false;if(a.preventDefault)a.preventDefault();else a.returnValue=false},mouseX:function(a){a=QZFL.event.getEvent(a);return a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},mouseY:function(a){a=QZFL.event.getEvent(a);return a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},getRelatedTarget:function(a){a=QZFL.event.getEvent(a);var b=a.relatedTarget;if(!b)if(a.type=="mouseout")b=a.toElement;else if(a.type=="mouseover")b=a.fromElement;return b},onDomReady:function(a){QZFL.event.onDomReady._fn=function(){a();QZFL.event.onDomReady._fn=null};if(document.addEventListener)if(QZFL.userAgent.safari<4)var b=setInterval(function(){if(/loaded|complete/.test(document.readyState)){QZFL.event.onDomReady._fn();clearInterval(b)}},50);else document.addEventListener("DOMContentLoaded",QZFL.event.onDomReady._fn,true);else document.write('<script onreadystatechange="if(this.readyState==\'complete\'){this.parentNode.removeChild(this);QZFL.event.onDomReady._fn();}" defer="defer" src="'+(window.location.protocol=="https:"?"//:":"javascript:void(0)")+'"><\/script>')}};QZFL.event.on=QZFL.event.addEvent;QZFL.event.bind=QZFL.object.bind;(function(){var a=QZFL.ElementHandler=function(c,d){this.elements=null;this._isElementHandler=true;this._init(c,d)};a.prototype={_init:function(c,d){this.elements=QZFL.lang.isString(c)?QZFL.selector(c,d):c instanceof QZFL.ElementHandler?c.elements.slice():QZFL.lang.isArray(c)?c:c&&(c.nodeType&&c.nodeType!==3&&c.nodeType!==8||c.setTimeout)?[c]:[]},findElements:function(c){var d=[],e;this.each(function(h){e=QZFL.selector(c,h);if(e.length>0)d=d.concat(e)});return d},find:function(c){return b.get(this.findElements(c))},filter:function(c,d,e){if(e)c=":not("+c+")";return b.get(QZFL.selector.matches(c,d||this.elements))},each:function(c){QZFL.object.each(this.elements,c);return this},concat:function(c){return b.get(this.elements.concat(c._isElementHandler?c.elements:c))},get:function(c){return b.get(this.elements[c])},slice:function(){return b.get(Array.prototype.slice.apply(this.elements,arguments))}};var b=QZFL.element={get:function(c,d){return new a(c,d)},extend:function(c){QZFL.object.extend(a,c)},extendFn:function(c){QZFL.object.extend(a.prototype,c)},getVersion:function(){return a.version}}})();QZFL.element.extend({version:"1.0"});QZFL.element.extendFn({bind:function(a,b){if(typeof b!="function")return false;return this.each(function(c){QZFL.event.addEvent(c,a,b)})},unBind:function(a,b){return this.each(function(c){QZFL.event[b?"removeEvent":"purgeEvent"](c,a,b)})},onHover:function(a,b){this.onMouseOver(a);return this.onMouseOut(b)},onMouseEnter:function(a){return this.bind("mouseover",function(b){var c=QZFL.event.getRelatedTarget(b);QZFL.lang.isFunction(a)&&!QZFL.dom.isAncestor(this,c)&&a.call(this,b)})},onMouseLeave:function(a){return this.bind("mouseout",function(b){var c=QZFL.event.getRelatedTarget(b);QZFL.lang.isFunction(a)&&!QZFL.dom.isAncestor(this,c)&&a.call(this,b)})}});QZFL.object.each(["onClick","onMouseOver","onMouseMove","onMouseOut","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp"],function(a){QZFL.ElementHandler.prototype[a]=function(b){return this.bind(a.slice(2).toLowerCase(),b)}});QZFL.element.extendFn({setHtml:function(a){return this.setAttr("innerHTML",a)},getHtml:function(a){return(a=this.elements[a||0])?a.innerHTML:null},setVal:function(a){if(QZFL.object.getType(a)=="array"){var b="�"+a.join("�")+"�";this.each(function(c){if(/radio|checkbox/.test(c.type))c.checked=c.nodeType&&("�"+b.indexOf(c.value.toString()+"�")>-1||b.indexOf("�"+c.name.toString()+"�")>-1);else if(c.tagName=="SELECT")QZFL.object.each(c.options,function(d){d.selected=d.nodeType==1&&("�"+b.indexOf(d.value.toString()+"�")>-1||b.indexOf("�"+d.text.toString()+"�")>-1)});else c.value=a})}else this.setAttr("value",a);return this},getVal:function(a){a=this.elements[a||0];var b;if(a)if(a.tagName=="SELECT"){b=[];if(a.selectedIndex<0)return null;a.type=="select-one"?b.push(a.value):QZFL.object.each(a.options,function(c){c.nodeType==1&&c.selected&&b.push(c.value)})}else b=a.value;else return null;return b},hasClass:function(a){if(this.elements&&this.elements.length)return QZFL.css.hasClassName(this.elements[0],a);return false},addClass:function(a){return this.each(function(b){QZFL.css.addClassName(b,a)})},removeClass:function(a){return this.each(function(b){QZFL.css.removeClassName(b,a)})},toggleClass:function(a){return this.each(function(b){QZFL.css.toggleClassName(b,a)})},getSize:function(a){return(a=this.elements[a||0])?QZFL.dom.getSize(a):null},getXY:function(a){return(a=this.elements[a||0])?QZFL.dom.getXY(a):null},setSize:function(a,b){return this.each(function(c){QZFL.dom.setSize(c,a,b)})},setXY:function(a,b){return this.each(function(c){QZFL.dom.setXY(c,a,b)})},hide:function(){return this.each(function(a){QZFL.dom.setStyle(a,"display","none")})},show:function(a){return this.each(function(b){QZFL.dom.setStyle(b,"display",a?"block":"")})},getStyle:function(a,b){var c=this.elements[b||0];return c?QZFL.dom.getStyle(c,a):null},setStyle:function(a,b){return this.each(function(c){QZFL.dom.setStyle(c,a,b)})},setAttr:function(a,b){a=a=="class"?"className":a;return this.each(function(c){c[a]=b})},getAttr:function(a,b){a=a=="class"?"className":a;var c=this.elements[b||0];return c?c[a]||c.getAttribute(a):null}});QZFL.element.extendFn({getPrev:function(){var a=[];this.each(function(b){b=QZFL.dom.getPreviousSibling(b);a.push(b)});return QZFL.element.get(a)},getNext:function(){var a=[];this.each(function(b){b=QZFL.dom.getNextSibling(b);a.push(b)});return QZFL.element.get(a)},getChildren:function(){var a=[];this.each(function(b){for(b=QZFL.dom.getFirstChild(b);b;){b&&b.nodeType==1&&a.push(b);b=b.nextSibling}});return QZFL.element.get(a)},getParent:function(){var a=[];this.each(function(b){a.push(b.parentNode)});return QZFL.element.get(a)}});QZFL.element.extendFn({create:function(a,b){var c=[];this.each(function(d){c.push(QZFL.dom.createElementIn(a,d,false,b))});return QZFL.element.get(c)},appendTo:function(a){a=a.elements&&a.elements[0]||QZFL.dom.get(a);return this.each(function(b){a.appendChild(b)})},insertAfter:function(a){a=a.elements&&a.elements[0]||QZFL.dom.get(a);var b=a.nextSibling,c=a.parentNode;return this.each(function(d){c[!b?"appendChild":"insertBefore"](d,b)})},insertBefore:function(a){a=a.elements&&a.elements[0]||QZFL.dom.get(a);var b=a.parentNode;return this.each(function(c){b.insertBefore(c,a)})},remove:function(){return this.each(function(a){QZFL.dom.removeElement(a)})}});(function(){function a(f,i,j,k,u,q){u=f=="previousSibling"&&!q;for(var w=0,B=k.length;w<B;w++){var A=k[w];if(A){if(u&&A.nodeType===1){A.sizcache=j;A.sizset=w}A=A[f];for(var C=false;A;){if(A.sizcache===j){C=k[A.sizset];break}if(A.nodeType===1&&!q){A.sizcache=j;A.sizset=w}if(A.nodeName===i){C=A;break}A=A[f]}k[w]=C}}}function b(f,i,j,k,u,q){u=f=="previousSibling"&&!q;for(var w=0,B=k.length;w<B;w++){var A=k[w];if(A){if(u&&A.nodeType===1){A.sizcache=j;A.sizset=w}A=A[f];for(var C=false;A;){if(A.sizcache===j){C=k[A.sizset];break}if(A.nodeType===1){if(!q){A.sizcache=j;A.sizset=w}if(typeof i!=="string"){if(A===i){C=true;break}}else if(n.filter(i,[A]).length>0){C=A;break}}A=A[f]}k[w]=C}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,d=0,e=Object.prototype.toString,h=false,n=function(f,i,j,k){j=j||[];var u=i=i||document;if(i.nodeType!==1&&i.nodeType!==9)return[];if(!f||typeof f!=="string")return j;var q=[],w,B,A,C,E=true,F=r(i);for(c.lastIndex=0;(w=c.exec(f))!==null;){q.push(w[1]);if(w[2]){C=RegExp.rightContext;break}}if(q.length>1&&x.exec(f))if(q.length===2&&g.relative[q[0]])B=v(q[0]+q[1],i);else for(B=g.relative[q[0]]?[i]:n(q.shift(),i);q.length;){f=q.shift();if(g.relative[f])f+=q.shift();B=v(f,B)}else{if(!k&&q.length>1&&i.nodeType===9&&!F&&g.match.ID.test(q[0])&&!g.match.ID.test(q[q.length-1])){w=n.find(q.shift(),i,F);i=w.expr?n.filter(w.expr,w.set)[0]:w.set[0]}if(i){w=k?{expr:q.pop(),set:y(k)}:n.find(q.pop(),q.length===1&&(q[0]==="~"||q[0]==="+")&&i.parentNode?i.parentNode:i,F);B=w.expr?n.filter(w.expr,w.set):w.set;if(q.length>0)A=y(B);else E=false;for(;q.length;){var D=q.pop();w=D;if(g.relative[D])w=q.pop();else D="";if(w==null)w=i;g.relative[D](A,w,F)}}else A=[]}A||(A=B);if(!A)throw"Syntax error, unrecognized expression: "+(D||f);if(e.call(A)==="[object Array]")if(E)if(i&&i.nodeType===1)for(f=0;A[f]!=null;f++){if(A[f]&&(A[f]===true||A[f].nodeType===1&&o(i,A[f])))j.push(B[f])}else for(f=0;A[f]!=null;f++)A[f]&&A[f].nodeType===1&&j.push(B[f]);else j.push.apply(j,A);else y(A,j);if(C){n(C,u,j,k);n.uniqueSort(j)}return j};n.uniqueSort=function(f){if(p){h=false;f.sort(p);if(h)for(var i=1;i<f.length;i++)f[i]===f[i-1]&&f.splice(i--,1)}};n.matches=function(f,i){return n(f,null,null,i)};n.find=function(f,i,j){var k,u;if(!f)return[];for(var q=0,w=g.order.length;q<w;q++){var B=g.order[q];if(u=g.match[B].exec(f)){var A=RegExp.leftContext;if(A.substr(A.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");k=g.find[B](u,i,j);if(k!=null){f=f.replace(g.match[B],"");break}}}}k||(k=i.getElementsByTagName("*"));return{set:k,expr:f}};n.filter=function(f,i,j,k){for(var u=f,q=[],w=i,B,A,C=i&&i[0]&&r(i[0]);f&&i.length;){for(var E in g.filter)if((B=g.match[E].exec(f))!=null){var F=g.filter[E],D,G;A=false;if(w==q)q=[];if(g.preFilter[E])if(B=g.preFilter[E](B,w,j,q,k,C)){if(B===true)continue}else A=D=true;if(B)for(var H=0;(G=w[H])!=null;H++)if(G){D=F(G,B,H,w);var I=k^!!D;if(j&&D!=null)if(I)A=true;else w[H]=false;else if(I){q.push(G);A=true}}if(D!==undefined){j||(w=q);f=f.replace(g.match[E],"");if(!A)return[];break}}if(f==u)if(A==null)throw"Syntax error, unrecognized expression: "+f;else break;u=f}return w};var g=n.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(f){return f.getAttribute("href")}},relative:{"+":function(f,i,j){var k=typeof i==="string",u=k&&!/\W/.test(i);k=k&&!u;if(u&&!j)i=i.toUpperCase();j=0;u=f.length;for(var q;j<u;j++)if(q=f[j]){for(;(q=q.previousSibling)&&q.nodeType!==1;);f[j]=k||q&&q.nodeName===i?q||false:q===i}k&&n.filter(i,f,true)},">":function(f,i,j){var k=typeof i==="string";if(k&&!/\W/.test(i)){i=j?i:i.toUpperCase();j=0;for(var u=f.length;j<u;j++){var q=f[j];if(q){k=q.parentNode;f[j]=k.nodeName===i?k:false}}}else{j=0;for(u=f.length;j<u;j++)if(q=f[j])f[j]=k?q.parentNode:q.parentNode===i;k&&n.filter(i,f,true)}},"":function(f,i,j){var k=d++,u=b;if(!/\W/.test(i)){var q=i=j?i:i.toUpperCase();u=a}u("parentNode",i,k,f,q,j)},"~":function(f,i,j){var k=d++,u=b;if(typeof i==="string"&&!/\W/.test(i)){var q=i=j?i:i.toUpperCase();u=a}u("previousSibling",i,k,f,q,j)}},find:{ID:function(f,i,j){if(typeof i.getElementById!=="undefined"&&!j)return(f=i.getElementById(f[1]))?[f]:[]},NAME:function(f,i){if(typeof i.getElementsByName!=="undefined"){for(var j=[],k=i.getElementsByName(f[1]),u=0,q=k.length;u<q;u++)k[u].getAttribute("name")===f[1]&&j.push(k[u]);return j.length===0?null:j}},TAG:function(f,i){return i.getElementsByTagName(f[1])}},preFilter:{CLASS:function(f,i,j,k,u,q){f=" "+f[1].replace(/\\/g,"")+" ";if(q)return f;q=0;for(var w;(w=i[q])!=null;q++)if(w)if(u^(w.className&&(" "+w.className+" ").indexOf(f)>=0))j||k.push(w);else if(j)i[q]=false;return false},ID:function(f){return f[1].replace(/\\/g,"")},TAG:function(f,i){for(var j=0;i[j]===false;j++);return i[j]&&r(i[j])?f[1]:f[1].toUpperCase()},CHILD:function(f){if(f[1]=="nth"){var i=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(f[2]=="even"&&"2n"||f[2]=="odd"&&"2n+1"||!/\D/.test(f[2])&&"0n+"+f[2]||f[2]);f[2]=i[1]+(i[2]||1)-0;f[3]=i[3]-0}f[0]=d++;return f},ATTR:function(f,i,j,k,u,q){i=f[1].replace(/\\/g,"");if(!q&&g.attrMap[i])f[1]=g.attrMap[i];if(f[2]==="~=")f[4]=" "+f[4]+" ";return f},PSEUDO:function(f,i,j,k,u){if(f[1]==="not")if(c.exec(f[3]).length>1||/^\w/.test(f[3]))f[3]=n(f[3],null,null,i);else{f=n.filter(f[3],i,j,true^u);j||k.push.apply(k,f);return false}else if(g.match.POS.test(f[0])||g.match.CHILD.test(f[0]))return true;return f},POS:function(f){f.unshift(true);return f}},filters:{enabled:function(f){return f.disabled===false&&f.type!=="hidden"},disabled:function(f){return f.disabled===true},checked:function(f){return f.checked===true},selected:function(f){return f.selected===true},parent:function(f){return!!f.firstChild},empty:function(f){return!f.firstChild},has:function(f,i,j){return!!n(j[3],f).length},header:function(f){return/h\d/i.test(f.nodeName)},text:function(f){return"text"===f.type},radio:function(f){return"radio"===f.type},checkbox:function(f){return"checkbox"===f.type},file:function(f){return"file"===f.type},password:function(f){return"password"===f.type},submit:function(f){return"submit"===f.type},image:function(f){return"image"===f.type},reset:function(f){return"reset"===f.type},button:function(f){return"button"===f.type||f.nodeName.toUpperCase()==="BUTTON"},input:function(f){return/input|select|textarea|button/i.test(f.nodeName)}},setFilters:{first:function(f,i){return i===0},last:function(f,i,j,k){return i===k.length-1},even:function(f,i){return i%2===0},odd:function(f,i){return i%2===1},lt:function(f,i,j){return i<j[3]-0},gt:function(f,i,j){return i>j[3]-0},nth:function(f,i,j){return j[3]-0==i},eq:function(f,i,j){return j[3]-0==i}},filter:{PSEUDO:function(f,i,j,k){var u=i[1],q=g.filters[u];if(q)return q(f,j,i,k);else if(u==="contains")return(f.textContent||f.innerText||"").indexOf(i[3])>=0;else if(u==="not"){i=i[3];j=0;for(l=i.length;j<l;j++)if(i[j]===f)return false;return true}},CHILD:function(f,i){var j=i[1],k=f;switch(j){case"only":case"first":for(;k=k.previousSibling;)if(k.nodeType===1)return false;if(j=="first")return true;k=f;case"last":for(;k=k.nextSibling;)if(k.nodeType===1)return false;return true;case"nth":j=i[2];var u=i[3];if(j==1&&u==0)return true;var q=i[0],w=f.parentNode;if(w&&(w.sizcache!==q||!f.nodeIndex)){var B=0;for(k=w.firstChild;k;k=k.nextSibling)if(k.nodeType===1)k.nodeIndex=++B;w.sizcache=q}k=f.nodeIndex-u;return j==0?k==0:k%j==0&&k/j>=0}},ID:function(f,i){return f.nodeType===1&&f.getAttribute("id")===i},TAG:function(f,i){return i==="*"&&f.nodeType===1||f.nodeName===i},CLASS:function(f,i){return(" "+(f.className||f.getAttribute("class"))+" ").indexOf(i)>-1},ATTR:function(f,i){var j=i[1];j=g.attrHandle[j]?g.attrHandle[j](f):f[j]!=null?f[j]:f.getAttribute(j);var k=j+"",u=i[2],q=i[4];return j==null?u==="!=":u==="="?k===q:u==="*="?k.indexOf(q)>=0:u==="~="?(" "+k+" ").indexOf(q)>=0:!q?k&&j!==false:u==="!="?k!=q:u==="^="?k.indexOf(q)===0:u==="$="?k.substr(k.length-q.length)===q:u==="|="?k===q||k.substr(0,q.length+1)===q+"-":false},POS:function(f,i,j,k){var u=g.setFilters[i[2]];if(u)return u(f,j,i,k)}}},x=g.match.POS,z;for(z in g.match)g.match[z]=RegExp(g.match[z].source+/(?![^\[]*\])(?![^\(]*\))/.source);var y=function(f,i){f=Array.prototype.slice.call(f);if(i){i.push.apply(i,f);return i}return f};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(t){y=function(f,i){var j=i||[];if(e.call(f)==="[object Array]")Array.prototype.push.apply(j,f);else if(typeof f.length==="number")for(var k=0,u=f.length;k<u;k++)j.push(f[k]);else for(k=0;f[k];k++)j.push(f[k]);return j}}var p;if(document.documentElement.compareDocumentPosition)p=function(f,i){var j=f.compareDocumentPosition(i)&4?-1:f===i?0:1;if(j===0)h=true;return j};else if("sourceIndex"in document.documentElement)p=function(f,i){var j=f.sourceIndex-i.sourceIndex;if(j===0)h=true;return j};else if(document.createRange)p=function(f,i){var j=f.ownerDocument.createRange(),k=i.ownerDocument.createRange();j.selectNode(f);j.collapse(true);k.selectNode(i);k.collapse(true);j=j.compareBoundaryPoints(Range.START_TO_END,k);if(j===0)h=true;return j};(function(){var f=document.createElement("div"),i="script"+(new Date).getTime();f.innerHTML="<a name='"+i+"'/>";var j=document.documentElement;j.insertBefore(f,j.firstChild);if(document.getElementById(i)){g.find.ID=function(k,u,q){if(typeof u.getElementById!=="undefined"&&!q)return(u=u.getElementById(k[1]))?u.id===k[1]||typeof u.getAttributeNode!=="undefined"&&u.getAttributeNode("id").nodeValue===k[1]?[u]:undefined:[]};g.filter.ID=function(k,u){var q=typeof k.getAttributeNode!=="undefined"&&k.getAttributeNode("id");return k.nodeType===1&&q&&q.nodeValue===u}}j.removeChild(f);j=f=null})();(function(){var f=document.createElement("div");f.appendChild(document.createComment(""));if(f.getElementsByTagName("*").length>0)g.find.TAG=function(i,j){var k=j.getElementsByTagName(i[1]);if(i[1]==="*"){for(var u=[],q=0;k[q];q++)k[q].nodeType===1&&u.push(k[q]);k=u}return k};f.innerHTML="<a href='#'></a>";if(f.firstChild&&typeof f.firstChild.getAttribute!=="undefined"&&f.firstChild.getAttribute("href")!=="#")g.attrHandle.href=function(i){return i.getAttribute("href",2)};f=null})();document.querySelectorAll&&function(){var f=n,i=document.createElement("div");i.innerHTML="<p class='TEST'></p>";if(!(i.querySelectorAll&&i.querySelectorAll(".TEST").length===0)){n=function(k,u,q,w){u=u||document;if(!w&&u.nodeType===9&&!r(u))try{return y(u.querySelectorAll(k),q)}catch(B){}return f(k,u,q,w)};for(var j in f)n[j]=f[j];i=null}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var f=document.createElement("div");f.innerHTML="<div class='test e'></div><div class='test'></div>";if(f.getElementsByClassName("e").length!==0){f.lastChild.className="e";if(f.getElementsByClassName("e").length!==1){g.order.splice(1,0,"CLASS");g.find.CLASS=function(i,j,k){if(typeof j.getElementsByClassName!=="undefined"&&!k)return j.getElementsByClassName(i[1])};f=null}}}();var o=document.compareDocumentPosition?function(f,i){return f.compareDocumentPosition(i)&16}:function(f,i){return f!==i&&(f.contains?f.contains(i):true)},r=function(f){return f.nodeType===9&&f.documentElement.nodeName!=="HTML"||!!f.ownerDocument&&f.ownerDocument.documentElement.nodeName!=="HTML"},v=function(f,i){for(var j=[],k="",u,q=i.nodeType?[i]:i;u=g.match.PSEUDO.exec(f);){k+=u[0];f=f.replace(g.match.PSEUDO,"")}f=g.relative[f]?f+"*":f;u=0;for(var w=q.length;u<w;u++)n(f,q[u],j);return n.filter(k,j)};QZFL.selector=n;QZFL.object.makeArray=y;QZFL.dom.uniqueSort=n.uniqueSort;QZFL.dom.contains=o})();QZFL.string.parseXML=function(a){var b;if(window.ActiveXObject){b=QZFL.lang.tryThese(function(){return new ActiveXObject("MSXML2.DOMDocument.6.0")},function(){return new ActiveXObject("MSXML2.DOMDocument.5.0")},function(){return new ActiveXObject("MSXML2.DOMDocument.4.0")},function(){return new ActiveXObject("MSXML2.DOMDocument.3.0")},function(){return new ActiveXObject("MSXML2.DOMDocument")},function(){return new ActiveXObject("Microsoft.XMLDOM")});b.async="false";b.loadXML(a);if(b.parseError.reason)return null}else{b=(new DOMParser).parseFromString(a,"text/xml");if(b.documentElement.nodeName=="parsererror")return null}return b.documentElement};QZFL.string.timeFormatString=function(a,b,c){typeof a=="number"&&(a=new Date(a));if(isNaN(a)||!a instanceof Date)return"";try{a.getTime()}catch(d){return""}if(typeof b!=="string")return s+"";c=c||0;var e=QZFL.string.timeFormatString,h=e._map,n=false,g;return b.replace(e._re,function(x,z,y){(n=z.charAt(0)=="_")&&(z=z.charAt(1));if(!h[z])return x;if(n==false){g=a[h[z][0]]();z=="y"&&(g%=100);z=="M"&&g++;return g<10?QZFL.string.fillLength(g,2,y):g.toString()}else return Math.floor(Math.abs(a-c)/h[z][1])})};QZFL.string.timeFormatString._re=/\{([_yYMdhms]{1,2})(?:\:([\d\w\s]))?\}/g;QZFL.string.timeFormatString._map={y:["getYear",31104E6],Y:["getFullYear",31104E6],M:["getMonth",2592E6],d:["getDate",864E5],h:["getHours",36E5],m:["getMinutes",6E4],s:["getSeconds",1E3]};QZFL.string.StringBuilder=function(){this._strList=QZFL.lang.arg2arr(arguments)};QZFL.string.StringBuilder.prototype={append:function(a){QZFL.lang.isString(a)&&this._strList.push(a.toString())},insertFirst:function(a){QZFL.lang.isString(a)&&this._strList.unshift(a.toString())},appendArray:function(a){if(isArray(a))this._strList=this._strList.concat(a)},toString:function(a){return this._strList.join(!a?"":a)},clear:function(){this._strList.splice(0,this._strList.length)}};QZFL.lang.isValidXMLdom=function(a){return!!(a&&a.xml&&/^<\?xml/.test(a.xml))};QZFL.lang.arg2arr=function(a,b){return Array.prototype.slice.apply(a,[b||0,a.length])};QZFL.lang.getObjByNameSpace=function(a,b){if(typeof a!="string")return a;var c=a.split("."),d=window;try{for(var e=0,h=c.length;e<h;++e){if(typeof d[c[e]]=="undefined")if(b)d[c[e]]={};else return;d=d[c[e]]}return d}catch(n){}};QZFL.lang.objectClone=function(a,b){if(typeof a=="object"){var c=QZFL.lang.isArray(a)?[]:{},d;for(d in a)if(d!=b)c[d]=QZFL.lang.objectClone(a[d],b);return c}else if(typeof a=="function")return Object;return a};QZFL.lang.obj2str=function(a){var b,c;if(typeof a=="object"){if(a===null)return"null";c=QZFL.lang.isArray(a);b=[];for(var d in a)b.push((c?"":'"'+QZFL.string.escString(d)+'":')+obj2str(a[d]));b=b.join();return c?"["+b+"]":"{"+b+"}"}else if(typeof a=="function")return"";else if(typeof a=="undefined")return"undefined";else if(typeof a=="number")return a.toString();return!a?'""':'"'+QZFL.string.escString(a)+'"'};QZFL.lang.propertieCopy=function(a,b,c,d){b=!c||typeof c!="object"?b:c;a=a||{};for(var e in b)if(!d||!(e in a))a[e]=b[e];return a};QZFL.lang.tryThese=function(){for(var a=0,b=arguments.length;a<b;a++)try{return arguments[a]()}catch(c){}return null};QZFL.lang.chain=function(){var a=Array.prototype.slice.call(arguments);return function(){for(var b=0,c=a.length;b<c;b++)if(a[b]&&a[b].apply(null,arguments)===false)return false;return true}};QZFL.lang.uniqueArray=function(a){if(!QZFL.lang.isArray(a))return a;for(var b={},c=0;c<a.length;)if(b[a[c]]==typeof a[c])a.splice(c,1);else{b[a[c].toString()]=typeof a[c];++c}return a};QZFL.XHR=function(a,b,c,d,e,h){b||(b="_xhrInstence_"+(QZFL.XHR.counter+1));var n;if(QZFL.XHR.instance[b]instanceof QZFL.XHR)n=QZFL.XHR.instance[b];else{n=QZFL.XHR.instance[b]=this;QZFL.XHR.counter++}n._name=b;n._nc=!!h;n._method=QZFL.object.getType(c)!="string"||c.toUpperCase()!="GET"?"POST":c="GET";n._isAsync=e!==false?true:e;n._uri=a;n._data=QZFL.object.getType(d)=="object"||QZFL.object.getType(d)=="string"?d:{};n._sender=null;n._isHeaderSetted=false;n._xmlQueue=QZFL.queue("xhr"+b,[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}]);this.onError=this.onSuccess=QZFL.emptyFn;this.charset="gb2312";this.proxyPath="";return n};QZFL.XHR.instance={};QZFL.XHR.counter=0;QZFL.XHR._errCodeMap={400:{msg:"Bad Request"},401:{msg:"Unauthorized"},403:{msg:"Forbidden"},404:{msg:"Not Found"},999:{msg:"Proxy page error"},1E3:{msg:"Bad Response"},1001:{msg:"No Network"},1002:{msg:"No Data"},1003:{msg:"Eval Error"}};QZFL.XHR.xsend=function(a,b){function c(e){try{e._sender=e._sender.callback=e._sender.errorCallback=e._sender.onreadystatechange=null}catch(h){}QZFL.userAgent.safari||QZFL.userAgent.opera?setTimeout('QZFL.dom.removeElement($("_xsend_frm_'+e._name+'"))',50):QZFL.dom.removeElement($("_xsend_frm_"+e._name))}if(!(a instanceof QZFL.XHR))return false;if(QZFL.userAgent.firefox&&QZFL.userAgent.firefox<3)return false;if(a._sender===null||a._sender===void 0){var d=document.createElement("iframe");d.id="_xsend_frm_"+a._name;d.style.width=d.style.height=d.style.borderWidth="0";document.body.appendChild(d);d.callback=QZFL.event.bind(a,function(e){a.onSuccess(e);c(a)});d.errorCallback=QZFL.event.bind(a,function(e){a.onError(QZFL.XHR._errCodeMap[e]);c(a)});a._sender=d}d=QZFL.config.gbEncoderPath;a.GBEncoderPath=d?d:"";a._sender.src=b.protocol+"://"+b.host+(this.proxyPath?this.proxyPath:"/xhr_proxy_gbk.html");return true};
QZFL.XHR.genHttpParamString=function(a,b){b=(b||"gb2312").toLowerCase();var c=[],d;for(d in a)c.push(d+"="+(b=="utf-8"?encodeURIComponent(a[d]):QZFL.string.URIencode(a[d])));return c.join("&")};QZFL.XHR.prototype.send=function(){if(this._method=="POST"&&this._data==null)return false;var a=new QZFL.util.URI(this._uri);if(a==null)return false;this._uri=a.href;if(QZFL.object.getType(this._data)=="object")this._data=QZFL.XHR.genHttpParamString(this._data,this.charset);if(this._method=="GET"&&this._data)this._uri+=(this._uri.indexOf("?")<0?"?":"&")+this._data;if(a.host!=location.host)return QZFL.XHR.xsend(this,a);if(this._sender===null||this._sender===void 0){a=function(){if(!this._xmlQueue.getLen())return null;var c=this._xmlQueue.shift();return c?c:arguments.callee.call(this)}.call(this);if(!a)return false;this._sender=a}try{this._sender.open(this._method,this._uri,this._isAsync)}catch(b){return false}if(this._method=="POST"&&!this._isHeaderSetted){this._sender.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._isHeaderSetted=true}if(this._nc){this._sender.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT");this._sender.setRequestHeader("Cache-Control","no-cache")}this._sender.onreadystatechange=QZFL.event.bind(this,function(){try{if(this._sender.readyState==4){if(this._sender.status>=200&&this._sender.status<300)this.onSuccess({text:this._sender.responseText,xmlDom:this._sender.responseXML});else if(QZFL.userAgent.safari&&QZFL.object.getType(this._sender.status)=="undefined")this.onError(QZFL.XHR._errCodeMap[1002]);else this.onError(QZFL.XHR._errCodeMap[this._sender.status]);delete this._sender;this._sender=null}}catch(c){}});this._sender.send(this._method=="POST"?this._data:void 0);return true};QZFL.XHR.prototype.destroy=function(){var a=this._name;delete QZFL.XHR.instance[a]._sender;QZFL.XHR.instance[a]._sender=null;delete QZFL.XHR.instance[a];QZFL.XHR.counter--;return null};QZFL.FormSender=function(a,b,c,d){this.name="_fpInstence_"+QZFL.FormSender.counter;QZFL.FormSender.instance[this.name]=this;QZFL.FormSender.counter++;this.method=b||"POST";this.uri=a;this.data=typeof c=="object"||typeof c=="string"?c:null;this.proxyURL=typeof d=="string"&&d.toUpperCase()=="UTF-8"?QZFL.config.FSHelperPage.replace(/_gbk/,"_utf8"):QZFL.config.FSHelperPage;this._sender=null;this.onError=this.onSuccess=QZFL.emptyFn};QZFL.FormSender.instance={};QZFL.FormSender.counter=0;QZFL.FormSender._errCodeMap={999:{msg:"Connection or Server error"}};QZFL.FormSender.pluginsPool={formHandler:[]};QZFL.FormSender._pluginsRunner=function(a,b){var c=QZFL.FormSender.pluginsPool[a],d=b,e;if(c&&(e=c.length))for(var h=0;h<e;++h)if(typeof c[h]=="function")d=c[h](d);return d};QZFL.FormSender.prototype.send=function(){function a(d){d._sender=d._sender.callback=d._sender.errorCallback=d._sender.onreadystatechange=null;QZFL.userAgent.safari||QZFL.userAgent.opera?setTimeout('QZFL.dom.removeElement(document.getElementById("_fp_frm_'+d.name+'"))',50):QZFL.dom.removeElement(document.getElementById("_fp_frm_"+d.name))}if(this.method=="POST"&&this.data==null)return false;if(this._sender===null||this._sender===void 0){var b=document.createElement("iframe");b.id="_fp_frm_"+this.name;b.style.cssText="width:0;height:0;border-width:0;display:none;";document.body.appendChild(b);b.callback=QZFL.event.bind(this,function(d){clearTimeout(c);this.onSuccess(d);a(this)});b.errorCallback=QZFL.event.bind(this,function(d){clearTimeout(c);this.onError(d);a(this)});if(typeof b.onreadystatechange!="undefined")b.onreadystatechange=QZFL.event.bind(this,function(){if(this._sender.readyState=="complete"&&this._sender.submited){a(this);this.onError(QZFL.FormSender._errCodeMap[999])}});else var c=setTimeout(QZFL.event.bind(this,function(){try{if(this._sender.contentWindow.location.href.indexOf(this.uri)==0){clearTimeout(c);a(this);this.onError(QZFL.FormSender._errCodeMap[999])}}catch(d){clearTimeout(c);a(this);this.onError(QZFL.FormSender._errCodeMap[999])}}),200);this._sender=b}this._sender.src=this.proxyURL;return true};QZFL.FormSender.prototype.destroy=function(){var a=this.name;delete QZFL.FormSender.instance[a]._sender;QZFL.FormSender.instance[a]._sender=null;delete QZFL.FormSender.instance[a];QZFL.FormSender.counter--;return null};QZFL.JsLoader=function(a){this.debug=a||QZFL.config.debugLevel>1;this.onerror=this.onload=QZFL.emptyFn};QZFL.JsLoader.prototype.load=function(a,b,c){var d={},e=typeof c,h=this;if(e=="string")d.charset=c;else if(e=="object")d=c;d.charset=d.charset||"gb2312";setTimeout(function(){h._load.apply(h,[a,b||document,d]);h=null},0)};QZFL.JsLoader.prototype._load=function(a,b,c){var d=QZFL.userAgent.ie,e=b.createElement("script"),h=this,n=QZFL.dom.removeElement,g=QZFL.event.addEvent,x,z;g(e,d?"readystatechange":"load",function(){if(!(!e||d&&e.readyState!="loaded")){h.onload();h.debug||n(e);e=n=g=h=null}});d||g(e,"error",function(){h.onerror();h.debug||n(e);e=n=g=h=null});for(z in c)if(typeof(x=c[z])=="string"&&z.toLowerCase()!="src")e.setAttribute(z,x);b.getElementsByTagName("head")[0].appendChild(e);e.src=a;c=null};QZFL.jsLoader=QZFL.JsLoader;QZFL.JSONGetter=function(a,b,c,d,e){if(QZFL.object.getType(b)!="string")b="_jsonInstence_"+(QZFL.JSONGetter.counter+1);var h=QZFL.JSONGetter.instance[b];if(!(h instanceof QZFL.JSONGetter)){QZFL.JSONGetter.instance[b]=h=this;QZFL.JSONGetter.counter++;h._name=b;h._sender=null;h._timer=null;this.onTimeout=this.onError=this.onSuccess=QZFL.emptyFn;this.timeout=5E3;this.clear=QZFL.emptyFn;this._baseClear=function(){this._waiting=false;this._squeue=[];this._equeue=[];this.onSuccess=this.onError=QZFL.emptyFn;this.clear=null}}h._uri=a;h._data=c&&(QZFL.object.getType(c)=="object"||QZFL.object.getType(c)=="string")?c:null;h._charset=QZFL.object.getType(d)!="string"?QZFL.config.defaultDataCharacterSet:d;h._jMode=!!e;return h};QZFL.JSONGetter.instance={};QZFL.JSONGetter.counter=0;QZFL.JSONGetter._errCodeMap={999:{msg:"Connection or Server error."},998:{msg:"Connection to Server timeout."}};QZFL.JSONGetter.genHttpParamString=function(a){var b=[],c;for(c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")};QZFL.JSONGetter.prototype.addOnSuccess=function(a){if(typeof a=="function"){if(!(this._squeue&&this._squeue.push))this._squeue=[];this._squeue.push(a)}};QZFL.JSONGetter._runFnQueue=function(a,b,c){var d;if(a&&a.length)for(;a.length>0;){d=a.shift();if(typeof d=="function")d.apply(c?c:null,b)}};QZFL.JSONGetter.prototype.addOnError=function(a){if(typeof a=="function"){if(!(this._equeue&&this._equeue.push))this._equeue=[];this._equeue.push(a)}};QZFL.JSONGetter.pluginsPool={srcStringHandler:[]};QZFL.JSONGetter._pluginsRunner=function(a,b){var c=QZFL.JSONGetter.pluginsPool[a],d=b,e;if(c&&(e=c.length))for(var h=0;h<e;++h)if(typeof c[h]=="function")d=c[h](d);return d};QZFL.JSONGetter.prototype.send=function(a){if(!this._waiting){var b=QZFL.object.getType(a)!="string"?"callback":a,c;a=this._uri;if(this._data)a+=(a.indexOf("?")<0?"?":"&")+(typeof this._data=="object"?QZFL.JSONGetter.genHttpParamString(this._data):this._data);a=QZFL.JSONGetter._pluginsRunner("srcStringHandler",a);if(this._jMode){window[b]=this.onSuccess;var d=new QZFL.JsLoader;d.onerror=this.onError;d.load(a,void 0,this._charset)}else{this._timer=setTimeout(function(g){return function(){g.onTimeout()}}(this),this.timeout);if(QZFL.userAgent.ie)if(QZFL.userAgent.beta&&navigator.appVersion.indexOf("Trident/4.0")>-1){var e=new ActiveXObject("htmlfile");this.clear=c=function(g){clearTimeout(g._timer);if(g._sender){g._sender.close();g._sender.parentWindow[b]=g._sender.parentWindow.errorCallback=null;g._sender=null}g._baseClear()};this._sender=e;var h=function(g){return function(){setTimeout(function(x,z){return function(){g._waiting=false;x.onSuccess.apply(x,z);QZFL.JSONGetter._runFnQueue(g._squeue,z,g);c(x)}}(g,arguments),0)}}(this);d=function(g){return function(){g._waiting=false;var x=QZFL.JSONGetter._errCodeMap[999];g.onError(x);QZFL.JSONGetter._runFnQueue(g._equeue,[x],g);c(g)}}(this);e.open();e.parentWindow[b]=function(){h.apply(null,arguments)};e.parentWindow.errorCallback=d;this._waiting=true;e.write('<script src="'+a+'" charset="'+this._charset+'"><\/script><script defer>setTimeout("try{errorCallback();}catch(ign){}",0)<\/script>')}else{var n=document.createDocumentFragment();d=(QZFL.userAgent.ie==9?document:n).createElement("script");d.charset=this._charset;this._senderDoc=n;this._sender=d;this.clear=c=function(g){clearTimeout(g._timer);if(g._sender)g._sender.onreadystatechange=null;n=g._senderDoc=g._sender=null;g._baseClear()};n[b]=function(g){return function(){g._waiting=false;g.onSuccess.apply(g,arguments);QZFL.JSONGetter._runFnQueue(g._squeue,arguments,g);c(g)}}(this);d.onreadystatechange=function(g){return function(){if(g._sender&&g._sender.readyState=="loaded")try{g._waiting=false;var x=QZFL.JSONGetter._errCodeMap[999];g.onError(x);QZFL.JSONGetter._runFnQueue(g._equeue,[x],g);c(g)}catch(z){}}}(this);this._waiting=true;n.appendChild(d);this._sender.src=a}else{this.clear=c=function(g){clearTimeout(g._timer);if(g._sender){g._sender.src="about:blank";g._sender=g._sender.callback=g._sender.errorCallback=null}QZFL.userAgent.safari||QZFL.userAgent.opera?setTimeout('QZFL.dom.removeElement($("_JSON_frm_'+g._name+'"))',50):QZFL.dom.removeElement($("_JSON_frm_"+g._name));g._baseClear()};h=function(g){return function(){g._waiting=false;g.onSuccess.apply(g,arguments);QZFL.JSONGetter._runFnQueue(g._squeue,arguments,g);c(g)}}(this);d=function(g){return function(){g._waiting=false;var x=QZFL.JSONGetter._errCodeMap[999];g.onError(x);QZFL.JSONGetter._runFnQueue(g._equeue,[x],g);c(g)}}(this);e=document.createElement("iframe");e.id="_JSON_frm_"+this._name;e.style.width=e.style.height=e.style.borderWidth="0";this._sender=e;a='<html><head><meta http-equiv="Content-type" content="text/html; charset='+this._charset+'"/></head><body><script>'+(document.domain==location.host?"":'document.domain="'+document.domain+'";')+";function "+b+'(){frameElement.callback.apply(null, arguments);}<\/script><script charset="'+this._charset+'" src="'+a+'"><\/script><script>setTimeout(frameElement.errorCallback,50);<\/script></body></html>';e.callback=h;e.errorCallback=d;this._waiting=true;if(QZFL.userAgent.chrome||QZFL.userAgent.opera||QZFL.userAgent.firefox<3){e.src="javascript:'"+encodeURIComponent(QZFL.string.escString(a))+"'";document.body.appendChild(e)}else{document.body.appendChild(e);e.contentWindow.document.open("text/html");e.contentWindow.document.write(a);e.contentWindow.document.close()}}}}};QZFL.JSONGetter.prototype.destroy=function(){var a=this._name;delete QZFL.JSONGetter.instance[a]._sender;QZFL.JSONGetter.instance[a]._sender=null;delete QZFL.JSONGetter.instance[a];QZFL.JSONGetter.counter--;return null};QZFL.cookie={set:function(a,b,c,d,e){if(e){var h=new Date;h.setTime(h.getTime()+36E5*e)}document.cookie=a+"="+b+"; "+(e?"expires="+h.toGMTString()+"; ":"")+(d?"path="+d+";":"path=/;")+(c?"domain="+c+";":"domain="+QZFL.config.domainPrefix+";");return true},get:function(a){a=document.cookie.match(RegExp("(?:^|;+|\\s+)"+a+"=([^;]*)"));return!a?"":a[1]},del:function(a,b,c){document.cookie=a+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(c?"path="+c+";":"path=/;")+(b?"domain="+b+";":"domain="+QZFL.config.domainPrefix+";")}};QZFL.Storage={helperUrl:"http://imgcache.qq.com/qzone/storage/storage_helper.html",ifrCallback:null,instance:null,getInstance:function(){var a=this.instance;if(a)return a;return null}};QZFL.Storage.create=function(a,b){if(typeof a=="function"){b=b||{};var c=null,d=b.dbname||"qzone_database",e=b.domain||document.domain,h=b.helper||QZFL.Storage.helperUrl,n=b.share||false,g=["globalStorage","localStorage","userData"];b.noSO||(g=["so"].concat(g));var x=QZFL.Storage,z=function(t,p){var o=document.createElement("iframe");o.id="userData_iframe_"+d;o.style.display="none";o.src=h;QZFL.Storage.ifrCallback=function(){(c=o.contentWindow.create(d,p))?a(t):a(false)};document.body.appendChild(o)},y={};y.userData={isSupport:!!window.ActiveXObject,get:function(t,p){var o=c.getAttribute(t);typeof p=="function"&&p(o);return o},set:function(t,p){try{c.setAttribute(t,p);c.save(d);return true}catch(o){return false}},remove:function(t){c.removeAttribute(t);c.save(d)},init:function(){if(n)z(this,"userData");else{var t=document.documentElement||document.body;t.addBehavior("#default#userdata");t.load(d);c=t;a(this)}},clear:function(){c.expires=(new Date(123456789E4)).toUTCString();c.save(d)}};y.globalStorage={isSupport:!!window.globalStorage,get:function(t,p){var o=(o=c.getItem(t))&&o.value?o.value:o;typeof p=="function"&&p(o);return o},set:function(t,p){try{c.setItem(t,p);return true}catch(o){return false}},remove:function(t){c.removeItem(t)},init:function(){(c=window.globalStorage[n?e:document.domain])?a(this):a(false)},clear:function(){for(var t in c)c.removeItem(t)}};y.localStorage={isSupport:!!window.localStorage,get:y.globalStorage.get,set:y.globalStorage.set,remove:y.globalStorage.remove,init:function(){if(n)z(this,"localStorage");else(c=window.localStorage)?a(this):a(false)},clear:function(){for(var t=c.length;t--;)c.removeItem(c.key(t))}};y.so={isSupport:!!(QZFL.shareObject&&QZFL.shareObject.getValidSO()),get:function(t,p){var o=c.get(t);typeof p=="function"&&p(o);return o},set:function(t,p){try{c.set(t,p);return true}catch(o){return false}},remove:function(t){c.del(t)},clear:function(){c.clear()},init:function(){(c=QZFL.shareObject.getValidSO())?a(this):a(null)}};(function(){for(var t=0,p=g.length;t<p;t++)if(y[g[t]].isSupport){txv.log("storage:"+g[t]);(x.instance=y[g[t]]).init();return}a(false)})()}};(function(a){var b=false,c=[],d;a.setOptions=function(e){d=e};a.init=function(){var e=arguments;if(b)c.push([e[0],e[1]]);else{c.push([e[0],e[1]]);b=true;a.create(function(h){var n;if(h){a.get=h.get;a.set=h.set;a.remove=h.remove;for(a.clear=h.clear;n=c.pop();)h[n[0]].apply(null,n[1])}else if(e[0]=="get")e[1][1](null)},d)}};a.get=function(){a.init("get",arguments)};a.set=function(){a.init("set",arguments)};a.remove=function(){a.init("remove",arguments)};a.clear=function(){a.init("clear",arguments)}})(QZFL.Storage);QZFL.transitions={simple:function(a,b,c,d){return c*a/d+b},regularEaseIn:function(a,b,c,d){return c*(a/=d)*a+b},regularEaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},regularEaseInOut:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a+b;return-c/2*(--a*(a-2)-1)+b}};QZFL.object.map(QZFL.lang||{});var ua=window.ua||QZFL.userAgent,$e=QZFL.element.get,$=QZFL.dom.get,removeNode=QZFL.dom.removeElement,addEvent=QZFL.event.addEvent,removeEvent=QZFL.event.removeEvent,getEvent=QZFL.event.getEvent;QZFL.config.DCCookieDomain="live.qq.com";QZFL.config.domainPrefix="live.qq.com";QZFL.config.defaultDataCharacterSet="utf-8";QZFL.config.defaultShareObject="http://live.qq.com/toolpages/getset.swf";if(window.location.href.indexOf("http://cache.tv.qq.com")>=0)QZFL.config.FSHelperPage="http://cache.tv.qq.com/v9/toolpages/fp_utf8.html";if(typeof Live=="undefined"||!Live){var Live;Live=QZFL;typeof QQLive!="undefined"&&!QQLive&&Live.object.extend(Live,QQLive);Live.isLoaded=false;Live.ver="$Rev: 3924 $";Live.lastmodify="$Date: 2010-08-18 13:36:04 +0800 (星期三, 18 八月 2010) $"}QZFL.element.extendFn({val:function(a){if(a==undefined)return this.getVal();this.setVal(a)},attr:function(a,b){if(b==undefined)return this.getAttr(a);this.setAttr(a,b)},html:function(a){if(a==undefined)return this.getHtml();this.setHtml(a)},text:function(a){var b="innerText";if(!this.elements[0])return"";if(typeof this.elements[0].innerText=="undefined")b="textContent";if(a==undefined)return this.getAttr(b);this.setAttr(b,a)},css:function(a,b){if(b==undefined)return this.getStyle(a);this.setStyle(a,b)},toggle:function(){this.getStyle("display")!="none"?this.setStyle("display","none"):this.setStyle("display","")},focus:function(){this.elements[0]&&this.elements[0].focus()},select:function(){this.elements[0]&&this.elements[0].select()},size:function(){return this.elements.length},removeAttr:function(a){this.each(function(b){b.setAttribute(a,"");b.nodeType==1&&b.removeAttribute(a)})},index:function(a){return QZFL.inArray(a&&a._isElementHandler?a.elements[0]:a,this.elements)},load:function(a,b,c,d){if(QZFL.object.getType(b)=="function"){d=b;b=null;c=0}else if(QZFL.object.getType(c)=="function"){d=c;if(QZFL.object.getType(b)=="number"){c=b;b=null}else if(isHashMap(b))c=0}var e=this;QZFL.ajaxHandle.get(a,b,c,function(h){h=h.replace(/<script(.|\s)*?\/script>/ig,"");e.setHtml(h);QZFL.object.getType(d)=="function"&&d(e,h)})}});QZFL.ajaxHandle={ajaxSettings:{async:true,cache:true,data:null,global:true,url:location.href,type:"get",dataType:"text",timeout:5,charset:"utf-8",jsonCache:0,CSRF:false},time33:function(a){for(var b=0,c=a.length,d=5381;b<c;++b)d+=(d<<5)+a.charAt(b).charCodeAt();return d&2147483647},getToken:function(){var a=QZFL.cookie.get("skey");return a?QZFL.ajaxHandle.time33(a):""},ajax:function(a){function b(){t.beforeSend&&t.beforeSend(t)}function c(f){if(t.success)o=="JSON"?g(f.text):t.success(f[o=="TEXT"?"text":"xmlDom"]);y()}function d(f){t.success&&t.success(f);y()}function e(){typeof t.error=="function"&&t.error();h()}function h(){typeof t.complete=="function"&&t.complete()}function n(){typeof t.complete=="function"&&t.complete()}function g(f){if(t.success)try{if(typeof JSON=="object"&&typeof JSON.parse=="function"){var i=JSON.parse(f);t.success(i);i=null}else{i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;i.lastIndex=0;if(i.test(f))f=f.replace(i,function(k){return"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"").replace(/new Date\(\]\)/g,"]"))){eval("var __json="+f+";");t.success(__json);__json=null}}}catch(j){t.error&&t.error()}}function x(f){if(t.error)t.error(f||"",QZFL.XHR.instance[p._name]);y()}function z(){typeof t.timeout=="function"&&t.timeout(QZFL.XHR.instance[p._name]);y()}function y(){if(t.complete)p&&p._name?t.complete(QZFL.XHR.instance[p._name],t):t.complete(null,t);if(t.async&&p&&(o=="TEXT"||o=="XML"))try{p=p.destroy()}catch(f){}}if(a&&typeof a.type=="string"&&a.type.toUpperCase()=="POST")a.CSRF=true;var t={};QZFL.object.extend(t,this.ajaxSettings);QZFL.object.extend(t,a);if(t.CSRF)t.url+=(t.url.match(/\?/)?"&":"?")+"g_tk="+QZFL.ajaxHandle.getToken();var p=null,o=t.dataType.toUpperCase();if(t.type.toUpperCase()=="POST"){a=new QZFL.FormSender(t.url,"POST",t.data,t.charset);a.onSuccess=function(f){t.success&&t.success(f);h()};a.onError=e;b();a.send()}else switch(o){case"JSON":case"TEXT":case"XML":if(t.jsonCache!=0)t.url+=(t.url.match(/\?/)?"&":"?")+"_="+parseInt((new Date).valueOf()/(t.jsonCache*1E3),10);p=new QZFL.XHR(t.url,t.cname,t.type,t.data,t.async,!t.cache);p.charset=t.charset;p.onSuccess=c;p.onError=x;b();p.send();break;case"JSONP":t.async=true;var r=/=\?(&|$)/g;sType=t.type.toUpperCase();if(!t.url.match(r)&&!t.jsonpFunName)t.url+=(t.url.match(/\?/)?"&":"?")+(t.jsonp||"callback")+"=?";var v=t.jsonCache==0?(new Date).valueOf():parseInt((new Date).valueOf()/(t.jsonCache*1E3),10);if(t.jsonpFunName)a=t.jsonpFunName;else{a=t.jsonpFunName||"jsonp"+v;t.url=t.url.replace(r,"="+a+"$1")}if(t.jsonCache!=0)t.url+=(t.url.match(/\?/)?"&":"?")+"_="+v;p=new QZFL.JSONGetter(t.url,t.cname,t.data,t.charset,t.junctionMode);p.onSuccess=d;p.onError=x;p.onTimeout=z;b();p.send(a);break;case"SCRIPT":if(t.jsonCache!=0)t.url+=(t.url.match(/\?/)?"&":"?")+"_="+parseInt((new Date).valueOf()/(t.jsonCache*1E3),10);a=new QZFL.JsLoader;a.onload=function(){typeof t.success=="function"&&t.success();n()};a.onerror=function(){typeof t.error=="function"&&t.error();n()};b();a.load(t.url,document,t.charset)}},get:function(a,b,c,d,e){if(QZFL.object.getType(b)=="function"){d=b;b=null;c=0}else if(QZFL.object.getType(c)=="function"){d=c;if(QZFL.object.getType(b)=="number"){c=b;b=null}else if(isHashMap(b))c=0}this.ajax({url:a,data:b,dataType:e||"text",type:"get",jsonCache:c,success:d})},getScript:function(a,b){this.ajax({url:a,success:b,dataType:"script"})},getJsonp:function(a,b,c,d){this.get(a,b,c,d,"jsonp")},getJson:function(a,b,c,d){this.get(a,b,c,d,"json")},ajaxQueue:function(a){var b=a.urls,c=a.success||QZFL.emptyFn,d=a.error||QZFL.emptyFn;a=a.beforeSend||QZFL.emptyFn;b=QZFL.object.getType(b)=="array"?b:[b];var e=false;jsonInfo={};var h=b.length;a();for(var n=0;n<h;n++)new function(){var g=n,x=b[g].name;$j.ajax({url:b[g].url,dataType:b[g].dataType,type:"get",data:b[g].data,success:function(z){jsonInfo[x]=z;b.shift();b.length||e||c(jsonInfo)},error:function(){e=true;b.shift();typeof d=="function"&&d(x)},complete:function(){}})}}};window.$j=QZFL.ajaxHandle;Live.lazyLoad=function(){function a(o,r){x=r?r:document.compatMode=="BackCompat"?document.body:document.documentElement;z=o||["img","iframe"]}function b(){for(var o=[],r=0,v=z.length;r<v;r++)for(var f=$e(z[r]+"[lz_src]").elements,i=0,j=f.length;i<j;i++)o.push(f[i]);r=0;for(v=o.length;r<v;r++)typeof o[r]=="object"&&o[r].getAttribute("lz_src")&&h.push(o[r]);r=0;for(v=h.length;r<v;r++){o=h[r];o.style.visibility="hidden";o=Math.round(QZFL.dom.getXY(o)[1]);if(e[o])e[o].push(r);else{f=[];f[0]=r;e[o]=f;n++}}}function c(){return x.clientHeight+(window.pageYOffset||x.scrollTop)}function d(){t++;if(n){var o=c();if(!(g>=o)){g=o;for(var r in e)if(o>r){for(var v=e[r],f=v.length,i=0;i<f;i++){h[v[i]].src=h[v[i]].getAttribute("lz_src");h[v[i]].style.visibility="visible"}delete e[r];n--}for(r in y)if(o>r){v=y[r];f=v.length;for(i=0;i<f;i++)v[i]();delete y[r];n--}}setTimeout(d,200)}else p=true}var e={},h=[],n=0,g=-1,x,z,y={},t=0,p=true;return{init:function(o,r){a(o,r);b();p=false;setTimeout(function(){d()},0)},lazyFunc:function(o,r,v){v=v||0;o.getXY||(o=$e(o));o=o.getXY()[1]+v;if(y[o])y[o].push(r);else{v=[];v[0]=r;y[o]=v;n++}if(p){p=false;d()}},getScreenShowHeight:c}}();Live.tj2={jspath:"http://pingjs.qq.com/ping.js",comscorePath:"http://b.scorecardresearch.com/beacon.js",comscoreParam:{c1:2,c2:6036207},keyPrefix:"ISD.LIVEWEB.",initPGVGlobalParam:function(){pvCurUrl=pvCurDomain=pgvVirtualDomain=""},isLoadingJs:false,hot:function(a){function b(){Live.tj2.initPGVGlobalParam();pgvSendClick({hottag:Live.tj2.keyPrefix+a})}typeof pgvSendClick=="function"?b():$j.getScript(Live.tj2.jspath,b)},button:function(a,b,c){function d(){if(typeof b=="undefined"){var e=a,h=a.split(".");if(h.length>0)e=h[0];e+=".html";b="/virtualpage/"+e}Live.tj2.initPGVGlobalParam();typeof c!="undefined"?pgvSendClick({hottag:Live.tj2.keyPrefix+a,virtualURL:b,virtualDomain:c}):pgvSendClick({hottag:Live.tj2.keyPrefix+a,virtualURL:b})}typeof pgvSendClick=="function"?d():$j.getScript(Live.tj2.jspath,d)},senseParam:null,pv:function(a){function b(){Live.tj2.initPGVGlobalParam();Live.tj2.isLoadingJs=false;if(typeof pvRepeatCount!="undefined")pvRepeatCount=1;if(!a&&!Live.tj2.senseParam)pgvMain();else{var c={};Live.tj2.senseParam&&Live.object.extend(c,{senseParam:Live.tj2.senseParam});if(a){Live.object.extend(c,a);if(a.virtualURL)pvCurUrl=a.virtualURL}pgvMain("",c)}typeof _irt!="undefined"&&location.host!="live.qq.com"&&_irt.init("");location.host=="v.qq.com"&&$j.getScript(Live.tj2.comscorePath,function(){if(typeof Live.tj2.comscoreParam.c10=="undefined")Live.tj2.comscoreParam.c10=Live.cookie.get("pvid");try{COMSCORE.beacon(Live.tj2.comscoreParam)}catch(d){Live.tj2.button("txv.comscore.error")}})}if(typeof pgvMain=="function")b();else if(Live.tj2.isLoadingJs==false){Live.tj2.isLoadingJs=true;$j.getScript(Live.tj2.jspath,b)}else setTimeout(function(){Live.tj2.pv(a)},200)},watch:function(){$e("body").bind("click",function(){if(typeof pgvWatchClick=="function"){Live.tj2.initPGVGlobalParam();pgvWatchClick()}})}};Live.pgv=Live.tj;Live.virtualpgv={virtualHost:"pgv.live.qq.com",virtualPath:"/liveweb/",pv:function(a){Live.tj2.initPGVGlobalParam();Live.tj2.pv({virtualDomain:Live.virtualpgv.virtualHost,virtualURL:[Live.virtualpgv.virtualPath,a].join("")})}};Live.Pager=function(){this.eleContainer=null;this.alwayShow=false;this.totalPage=0;this.pageSize=Live.Pager.Const.PG_DEF_PAGESIZE;this.currentPage=this.previousPage=0;this.offsetPage=Live.Pager.Const.PG_DEF_OFFSETSIZE;this.staus=Live.Pager.Const.PG_STATUS_READY;this.initialized=false;this.onTurnPage=function(){return true};this.totalCnt=0;this.id=Live.Pager.maxId;this.hideEmpty=true;this.Templet={CONTENT:'<form method="get" action="##" id="pager_form_{id}">{begin}<p class="mod_pagenav_main">{previous}<span class="mod_pagenav_count">{first}{prevdot}{pager}{nextdot}{last}</span>{pagecount}{summary}{next}</p><p class="mod_pagenav_option"><span class="mod_pagenav_turn">{goinput}{gobutton}</span></p></form>',FIRST_DISABLE:"",FIRST_ENABLE:'<a href="##" title="1" id="pager_first_{id}"><span>1</span></a>\n',LAST_DISABLE:"",LAST_ENABLE:'<a href="##" title="{totpage}" id="pager_last_{id}"><span>{totpage}</span></a>\n',PREVIOUS_DISABLE:'<span class="mod_pagenav_disable"><span>上一页</span></span>\n',PREVIOUS_ENABLE:'<a href="##" id="pager_previous_{id}" title="上一页"><span>上一页</span></a>\n',NEXT_DISABLE:'<span class="mod_pagenav_disable"><span>下一页</span></span>\n',NEXT_ENABLE:'<a href="##" title="下一页" id="pager_next_{id}"><span>下一页</span></a>\n',PAGE_NORMAL:'<a href="##" id="pager_num_{id}_{pagenum}" title="{pagenum}"><span>{pagenum}</span></a>\n',PAGE_CURRENT:'<span class="current"><span>{pagenum}</span></span>\n',GO_PAGE_INPUT:'<span class="mod_pagenav_turn">转到<input type="text" id="pager_input_{id}" name="PageCount" autocomplete="off"/>页\n',GO_PAGE_BUTTON:'<button type="submit" id="pager_btn_{id}"><span>确定</span></button>\n',PAGE_COUNT:'<span class="mod_pagenav_count2"><span class="current">{curpg}</span>/{totpage}</span>\n',PREVDOT_ENABLE:'<span class="mod_pagenav_more"><span>…</span></span>\n',PREVDOT_DISABLE:"",NEXTDOT_ENABLE:'<span class="mod_pagenav_more"><span>…</span></span>\n',NEXTDOT_DISABLE:"",SUMMARY:"",BEGIN:""};Live.Pager.items[Live.Pager.maxId]=this;Live.Pager.maxId++};Live.Pager.Const={PG_STATUS_READY:0,PG_STATUS_GO:1,PG_DEF_OFFSETSIZE:2,PG_DEF_PAGESIZE:20};Live.Pager.maxId=0;Live.Pager.items={};Live.Pager.prototype.init=function(a,b){if(a&&b){this.eleContainer=a;this.totalPage=b;this.initialized=true}};Live.Pager.prototype.fillPager=function(){if(!(!this.initialized||!this.currentPage||!this.eleContainer)){var a=[],b="",c,d;this.currentPage=parseInt(this.currentPage,10);this.offsetPage=parseInt(this.offsetPage);c=this.currentPage-this.offsetPage>0?this.currentPage-this.offsetPage:1;d=this.currentPage+this.offsetPage<=this.totalPage?this.currentPage+this.offsetPage:this.totalPage;var e;b=this.currentPage-c;b=b>0?b:0;e=d-this.currentPage;e=e>0?e:0;if(b+e<this.offsetPage*2){m=Math.abs(b-e);if(b<e)d+=m;else c-=m}if(d>this.totalPage)d=this.totalPage;if(c<1)c=1;c-1>=2&&this.currentPage-c>=2&&c++;d+2==this.totalPage&&d++;for(b=c;b<=d&&b<=this.totalPage;b++)b==1&&this.currentPage!=1||b==this.totalPage&&this.currentPage!=this.totalPage||(b==this.currentPage?a.push(this.Templet.PAGE_CURRENT.replace(/\{pagenum\}/g,b)):a.push(this.Templet.PAGE_NORMAL.replace(/\{pagenum\}/g,b)));b=this.Templet.CONTENT.replace(/\{pager\}/g,a.join(""));b=b.replace(/\{prevdot\}/g,c-1>1?this.Templet.PREVDOT_ENABLE:this.Templet.PREVDOT_DISABLE);b=b.replace(/\{nextdot\}/g,this.totalPage-d>1?this.Templet.NEXTDOT_ENABLE:this.Templet.NEXTDOT_DISABLE);b=b.replace(/\{first\}/g,this.currentPage==1?this.Templet.FIRST_DISABLE:this.Templet.FIRST_ENABLE);b=b.replace(/\{previous\}/g,this.currentPage==1?this.Templet.PREVIOUS_DISABLE:this.Templet.PREVIOUS_ENABLE);b=b.replace(/\{next\}/g,this.currentPage==this.totalPage?this.Templet.NEXT_DISABLE:this.Templet.NEXT_ENABLE);b=b.replace(/\{last\}/g,this.currentPage==this.totalPage?this.Templet.LAST_DISABLE:this.Templet.LAST_ENABLE);b=b.replace(/\{goinput\}/g,this.Templet.GO_PAGE_INPUT);b=b.replace(/\{gobutton\}/g,this.Templet.GO_PAGE_BUTTON);b=b.replace(/\{summary\}/g,this.Templet.SUMMARY);b=b.replace(/\{pagecount\}/g,this.Templet.PAGE_COUNT);b=b.replace(/\{id\}/g,this.id);b=b.replace(/\{begin\}/g,this.Templet.BEGIN);b=b.replace(/\{totpage\}/g,this.totalPage);b=b.replace(/\{curpg\}/g,this.currentPage);b=b.replace(/\{pagenum\}/g,this.currentPage);b=b.replace(/\{totalcnt\}/g,this.totalCnt);this.eleContainer.style.display=this.totalPage<=1&&this.alwayShow==false?this.hideEmpty?"none":"":"";this.eleContainer.innerHTML=b;for(b=c;b<=d;b++)if(a=$("pager_num_"+this.id+"_"+b))QZONE.event.addEvent(a,"click",QZONE.event.bind(this,"goPage",b));var h=this;if(a=$("pager_first_"+this.id))QZONE.event.addEvent(a,"click",QZONE.event.bind(this,"goPage",1,this.pageSize));if(a=$("pager_previous_"+this.id))QZONE.event.addEvent(a,"click",QZONE.event.bind(this,"goPage",this.currentPage-1,this.pageSize));if(a=$("pager_next_"+this.id))QZONE.event.addEvent(a,"click",QZONE.event.bind(this,"goPage",this.currentPage+1,this.pageSize));if(a=$("pager_last_"+this.id))QZONE.event.addEvent(a,"click",QZONE.event.bind(this,"goPage",this.totalPage,this.pageSize));if(a=$("pager_form_"+this.id))$("pager_form_"+this.id).onsubmit=function(){if(h.checkPage()){var n=$e("#pager_input_"+h.id);n=QZFL.string.trim(n.getVal());h.goPage(n)}return false}}};Live.Pager.prototype.goPage=function(a){a=parseInt(a,10);if(isNaN(a))a=1;if(a<1)a=1;else if(a>this.totalPage)a=this.totalPage;this.previousPage=this.currentPage;this.currentPage=a;if(typeof this.onTurnPage=="function")if(!this.onTurnPage(this.currentPage,this.pageSize))return false;this.fillPager();Live.event.preventDefault();return false};Live.Pager.prototype.checkPage=function(){var a=$e("#pager_input_"+this.id),b=QZFL.string.trim(a.getVal());if(b.length==0){this.showError("您未输入页码，请输入数字页码！");a.focus();a.elements[0].select();return false}if(/^\d+$/.test(b)==false){this.showError("您输入的页码不正确，请重新输入数字页码！");a.elements[0].focus();a.elements[0].select();return false}b=parseInt(b,10);if(b<=0||b>this.totalPage){this.showError("您输入的页码不存在，请重新输入数字页码！");a.elements[0].focus();a.elements[0].select();return false}return true};Live.Pager.prototype.showError=function(a){alert(a)};Live.Pager.prototype.refresh=function(){this.goPage(this.currentPage)};Live.TabShow=function(){this.config={tabItems:null,contentItems:null,getType:"ajax",ajaxAttr:"rel",tabShowCss:"current",mouseEvt:"mouseover",mouseDelay:300,enableClick:true,callback:null,jsonInterval:0,jsonpFun:null,isReturnFalse:true,showCss:null,hideCss:null,afterShowContent:null,defaultIndex:0};_timer=[]};Live.TabShow.prototype={init:function(a){for(var b in a)this.config[b]=a[b];var c=this;this.config.mouseEvt=="mouseover"?this.config.tabItems.each(function(d,e){var h=$e(d);h.attr("hideFocus","true");h.bind("mouseover",function(){_timer[0]=setTimeout(function(){c.change(e)},c.config.mouseDelay)});h.bind("mouseout",function(){if(_timer&&_timer[0]!=-1){clearTimeout(_timer[0]);_timer[0]=-1}});c.config.enableClick&&$e(d).bind("click",function(){c.change(e);if(c.config.isReturnFalse==true)return false})}):this.config.tabItems.each(function(d,e){$e(d).bind(c.config.mouseEvt,function(){c.change(e)})});this.config.defaultIndex>=0&&this.change(this.config.defaultIndex)},change:function(a){var b=this.config.contentItems.size();if(!(b!=1&&(a<0||a>b-1))){var c=b==this.config.tabItems.size()?this.config.contentItems.get(a):this.config.contentItems.get(0),d=this.config.tabItems.get(a),e=this;if(this.config.getType=="ajax"||this.config.getType=="html"||this.config.getType=="json"||this.config.getType=="jsonp"||this.config.getType=="script")if(b!=this.config.tabItems.size()||Live.string.trim(c.html()).length==0)if(this.config.getType=="ajax"||this.config.getType=="html")c.load(this.config.tabItems.get(a).attr(this.config.ajaxAttr),function(){e.config.callback(c,{},d);e.showContent(a);e.afterShowContentHandle(d,c,a)});else if(this.config.getType=="json")$j.getJson(this.config.tabItems.get(a).attr(this.config.ajaxAttr),this.config.jsonInterval,function(h){if(typeof e.config.callback=="function"){e.config.callback(c,h,d);e.showContent(a);e.afterShowContentHandle(d,c,a)}});else if(this.config.getType=="jsonp")$j.ajax({dataType:"jsonp",url:e.config.tabItems.get(a).attr(this.config.ajaxAttr),jsonpFunName:e.config.jsonpFun,jsonCache:e.config.jsonInterval,success:function(h){e.config.callback(c,h,d);e.showContent(a);e.afterShowContentHandle(d,c,a)}});else this.config.getType=="script"&&$j.ajax({dataType:"script",url:e.config.tabItems.get(a).attr(this.config.ajaxAttr),jsonCache:e.config.jsonInterval,success:function(){e.config.callback(c,{},d);e.showContent(a);e.afterShowContentHandle(d,c,a)}});else{e.showContent(a);e.afterShowContentHandle(d,c,a)}else{e.showContent(a);e.afterShowContentHandle(d,c,a)}}},showContent:function(a){if(this.config.showCss||this.config.hideCss){this.config.tabItems.attr("className",this.config.hideCss);this.config.tabItems.get(a).attr("className",this.config.showCss)}else{this.config.tabItems.removeClass(this.config.tabShowCss);this.config.tabItems.get(a).addClass(this.config.tabShowCss)}if(this.config.contentItems.size()==this.config.tabItems.size()){this.config.contentItems.hide();a=this.config.contentItems.get(a);a.show();a=a.find("img");if(!a.attr("src")){a.css("visibility","");a.attr("src",a.attr("_src"))}}},afterShowContentHandle:function(a,b,c){typeof this.config.afterShowContent=="function"&&this.config.afterShowContent(a,b,c)}};Live.SimpleImgShow=function(){this.config={showCnt:6,items:null,playRight:null,playLeft:null,curPage:0,disCss:"over",showImgOnInit:true,defaultIndex:0,isPolish:true,onchange:null}};Live.SimpleImgShow.prototype={init:function(a){for(var b in a)this.config[b]=a[b];var c=this;this.config.playRight.bind("mouseup",function(){c.moveR()});this.config.playLeft.bind("mouseup",function(){c.moveL()});this.config.defaultIndex>=0&&this.show(this.config.defaultIndex)},play:function(a){if(!(a<0&&this.config.curPage==0))if(!(a>0&&this.config.curPage==Math.ceil(this.config.items.size()/this.config.showCnt)-1)){var b=0,c=0;b=this.config.curPage*this.config.showCnt+a;c=(this.config.curPage+1)*this.config.showCnt+a-1;b=b<0?0:b;c=c>this.config.items.size()-1?this.config.items.size()-1:c;if(this.config.isPolish)if(c-b+1<this.config.showCnt)b=b-(this.config.showCnt-(c-b))+1;this.showBySE(b,c,a)}},showBySE:function(a,b,c){for(var d=a;d<=b;d++){var e=this.config.items.get(d);if(!e)return;if(this.config.showImgOnInit){var h=e.find("img");h.attr("src")||h.attr("src",h.attr("_src"))}e.show()}for(d=0;d<a;d++)this.config.items.get(d).hide();d=b+1;for(e=this.config.items.elements.length;d<e;d++)this.config.items.get(d).hide();if(c>0)this.config.curPage++;else c<0&&this.config.curPage--;this.setBtn();if(typeof this.config.onchange=="function")this.config.onchange(a,b,this.config.curPage)},show:function(a){var b=0,c=0;b=a*this.config.showCnt;c=b+this.config.showCnt-1;offset=b-this.config.curPage*this.config.showCnt;this.showBySE(b,c,offset)},moveR:function(){this.play(this.config.showCnt)},moveL:function(){this.play(-1*this.config.showCnt)},setBtn:function(){this.config.curPage<=0?this.config.playLeft.addClass(this.config.disCss):this.config.playLeft.removeClass(this.config.disCss);this.config.curPage==Math.ceil(this.config.items.size()/this.config.showCnt)-1?this.config.playRight.addClass(this.config.disCss):this.config.playRight.removeClass(this.config.disCss)}};if(typeof Live.common=="undefined")Live.common={};Live.FloatMenu=function(a){this.mark2=this.mark1=false;this.menu=this.area=null;this.areaOutdelay=500;this.menuOutdelay=100;this.onHide=this.onShow=null;var b=this,c;for(c in a)this[c]=a[c];this.area.bind("mouseover",function(){b.mark1=true;b.showMenu()});this.menu.bind("mouseover",function(){b.mark2=true;b.showMenu()});this.area.bind("mouseout",function(){b.mark1=false;setTimeout(function(){b.hideMenu()},b.areaOutdelay)});this.menu.bind("mouseout",function(){b.mark2=false;setTimeout(function(){b.hideMenu()},b.menuOutdelay)})};Live.FloatMenu.prototype={showMenu:function(){if(this.mark1||this.mark2){if(this.onShow)this.onShow(this);this.menu.show()}},hideMenu:function(){if(!(this.mark1||this.mark2)){if(this.onHide)this.onHide(this);this.menu.hide()}},getEventTarget:function(a){a=a||window.event;return a.target||a.srcElement}};Live=Live||{};Live.txv={isLoaded:false,ver:"$Rev: 8562 $",lastmodify:"$Date: 2011-05-12 20:14:48 +0800 (星期四, 12 五月 2011) $",isDebug:false};var txv=window.txv=Live.txv;Live.tj2.keyPrefix="txv.";Live.virtualpgv.virtualPath="/txv/";if(QZFL&&QZFL.object){QZFL.object.extend(Live,{inArray:function(a,b){if(Live.object.getType(b)!="array")return-1;for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1}});if(QZFL.userAgent.ie&&QZFL.userAgent.ie<8){QZFL.Storage.helperUrl="http://v.qq.com/storage_helper.html";QZFL.Storage.setOptions({share:true})}}Live.txv.path={trimpath:"http://imgcache.qq.com/tencentvideo_v1/js/trimpath.min.js",filmCritic:"http://sns.video.qq.com/fcgi-bin/liveportal/getfilmcritic?otype=json",userComment:"http://sns.video.qq.com/fcgi-bin/liveportal/comment?otype=json",videoInfo:"http://sns.video.qq.com/tvideo/fcgi-bin/video?otype=json",videoTagInfo:"http://sns.video.qq.com/tvideo/fcgi-bin/vtag?otype=json",search_cgi:"http://v.qq.com/search.html?mi_pagenum=0&ms_search_type=1&ms_sort=0&ms_mode=0&pagetype=3",search_suggest:"http://sns.video.qq.com/fcgi-bin/soso_suggestion?sm_category=3&sm_need_num=10&otype=json&sm_key=",pingfencgi:"http://sns.video.qq.com/fcgi-bin/portalscore?otype=json",favouritecgi:"http://sns.video.qq.com/fcgi-bin/liveportal/favorite",weiboget:"http://sns.video.qq.com/tvideo/fcgi-bin/opmicroblog?otype=json",weiboSend:"http://sns.video.qq.com/tvideo/fcgi-bin/pubmblog",weiboSend_2:"http://sns.video.qq.com/tvideo/fcgi-bin/livepubmblog4po",videoRelate:"http://sns.video.qq.com/tvideo/fcgi-bin/relatedvideo?otype=json",singerMVList:"http://sns.video.qq.com/tvideo/fcgi-bin/GetSingerMV?otype=json",flashReport:"http://rcgi.video.qq.com/tencentvideo_report?",html5_video_cgi:"http://vv.video.qq.com/geturl?otype=json",addMvMusicBox:"http://s.plcloud.music.qq.com/fcgi-bin/fcg_mvlist_add.fcg",queryMvMusicBox:"http://s.plcloud.music.qq.com/fcgi-bin/fcg_mvlist_isadded.fcg",delMvMusicBox:"http://s.plcloud.music.qq.com/fcgi-bin/fcg_mvlist_mod.fcg",videoViewNum:"http://sns.video.qq.com/tvideo/fcgi-bin/viewnum?otype=json"};Live.txv.login={config:{appid:"532001601",uinCookie:"uin",nickCookie:"lw_nick",quickLogin:true,jumpurl:"",clientjumpurl:null,showMask:true,success:null,logout:null,rejectLogin:null,login_cgi:"http://c.video.qq.com/cgi-bin/login?otype=json",show_uniq:false,show_content:""},init:function(a,b){b=!!b;Live.object.extend(this.config,a);txv.login.setStatus(b,false)},ReTryType:{openclient:1,reloadcgi:2},isOpend:false,isLogin:function(){return txv.login.getUin()>1E4},setStatus:function(a,b){if(txv.login.getUin()==0)txv.login.logout();else if(txv.login.getNick()==""||b==true)$j.getScript(txv.login.config.login_cgi+"&_="+(new Date).valueOf(),function(){if(typeof QZOutputJson!="undefined")if(QZOutputJson.result&&QZOutputJson.result.code=="0")if(typeof QZOutputJson.nick!="undefined"){location.host.indexOf("qq.com")>=0&&Live.cookie.set(txv.login.config.nickCookie,QZOutputJson.nick+"|"+txv.login.getUin(),location.host,"/");txv.login.showOnline();a!=false&&typeof txv.login.config.success=="function"&&txv.login.config.success()}else txv.login.showOnline();else{if(QZOutputJson.result&&QZOutputJson.result.code!="0")if(QZOutputJson.result.code=="100001")txv.login.logout();else QZOutputJson.result.code=="2504"&&txv.login.showOnline()}else txv.login.logout()});else{txv.login.showOnline();a==true&&typeof txv.login.config.success=="function"&&txv.login.config.success()}},getUin:function(){if(Live.string.trim(Live.cookie.get("skey"))=="")return 0;var a=parseInt(Live.cookie.get(txv.login.config.uinCookie).replace(/^o0*/g,""),10);if(a<=1E4)return 0;return a},getNick:function(){if(Live.string.trim(Live.cookie.get("skey"))=="")return"";var a=Live.cookie.get(txv.login.config.nickCookie);if(a=="")return a;a=a.split("|");if(a[1]&&a[1]==this.getUin())return decodeURIComponent(a[0]);return""},showOnline:function(){var a=$e("#login_nick");txv.login.config.show_uniq?a.text(["你好，",txv.login.getUin()].join("")):a.text(["你好，",txv.login.getNick(),"(",txv.login.getUin(),")"].join(""));a=$e("#login_action");a.text("[退出]");a.unBind("click");a.bind("click",txv.login.logout)},showNotLogin:function(){var a=$e("#login_nick");txv.login.config.show_uniq?a.text("你好！请先"):a.text("你好，欢迎来到腾讯视频！请先");a=$e("#login_action");a.text("登录");a.unBind("click");a.bind("click",txv.login.openLogin)},showMask:function(a){if($("mask_layer"))$e("#mask_layer").show();else{$e("body").create("div",{id:"mask_layer","class":"mask_layer"});Live.userAgent.ie==6&&$e("#mask_layer").css("height",document.documentElement.scrollHeight)}if(Live.userAgent.ie==7||!Live.userAgent.ie)$e(Live.userAgent.ie?"body":document).bind("scroll",function(){txv.login.showAtCenter($(a))});else window.onscroll=function(){txv.login.showAtCenter($(a))}},hideMask:function(){$e("#mask_layer").hide();if(Live.userAgent.ie==7||!Live.userAgent.ie)$e(Live.userAgent.ie?"body":document).unBind("scroll");else window.onscroll=Live.emptyFn},openLogin:function(a){txv.login.isOpend=true;Live.object.extend(txv.login.config,a);a=txv.login.config.jumpurl;var b=txv.login.config.clientjumpurl;txv.login.config.showMask&&txv.login.showMask("login_win");$("login_win")==null&&$e("body").create("div",{id:"login_win",innerHTML:'<iframe name="_login_frame_quick_" id="_login_frame_quick_" frameborder="no" scrolling="no" width="100%" height="100%" src="about:blank"></iframe>'});var c=$("login_win");c.style.display="none";var d="";window.__j_url=b;d=["http://ui.ptlogin2.qq.com/cgi-bin/login?link_target=blank&target=self&appid=",txv.login.config.appid,"&f_url=loginerroralert&qlogin_auto_login=0&s_url=",escape("http://imgcache.qq.com/liveportal_v1/toolpages/redirect.html?clientjumpurl="+escape(b||window.location.href)+"&jumpurl="+a)].join("");$("_login_frame_quick_").src=d;txv.login.showAtCenter(c)},showAtCenter:function(a,b,c){if(a){var d=document.body.scrollTop;if(0==d)d=document.documentElement.scrollTop;var e=document.documentElement.clientHeight;if(0==e)e=document.body.clientHeight;a.style.top=e/2+d-(c||235)/2+"px";a.style.left=(document.body.scrollWidth-(b||373))/2+"px";a.style.position="absolute";a.style.zIndex="10001";a.style.display="block";a.style.padding="0px"}},logout:function(){Live.cookie.set("uin","",".qq.com","/",-24);Live.cookie.set(txv.login.config.nickCookie,"",location.host,"/",-24);Live.cookie.set("skey","",".qq.com","/",-24);txv.login.showNotLogin();typeof txv.login.config.logout=="function"&&txv.login.config.logout()}};function ptlogin2_onResize(a,b){$("_login_frame_quick_").style.height=b+"px";$("_login_frame_quick_").style.width=a+"px";txv.login.showAtCenter($("login_win"),a,b)}function ptlogin2_onClose(a){$e("#login_win").remove();txv.login.isOpend=false;txv.login.hideMask();if(a)ptlogin2_onSuccess();else typeof txv.login.config.rejectLogin=="function"&&txv.login.config.rejectLogin()}function ptlogin2_onSuccess(){txv.login.setStatus(true,true)}function __rdt__(){if(__j_url)for(;__j_url.indexOf("%")!=-1&&__j_url.indexOf("?")==-1;)__j_url=unescape(__j_url);else window.location.reload();window.location.href=__j_url}Live.txv=Live.txv||{};Live.txv.log=function(a){if(txv.log.isdebug==1)QZFL.console.print(a);else{if(txv.log.isdebug==-1)txv.log.isdebug=txv.common.getUrlParam("debug")=="true"?1:0;txv.log.isdebug==1&&QZFL.console.print(a)}};Live.txv.log.isdebug=-1;Live.txv.common={rootPath:"",getUrlParam:function(a,b){b=b||document.location.toString();var c=a+"=",d=b.indexOf(c);if(d!=-1){var e=b.indexOf("&",d),h=b.indexOf("?",d);if(h!=-1&&(e==-1||e>h))e=h;h=b.indexOf("#",d);if(h!=-1&&(e==-1||e>h))e=h;return e==-1?b.substring(d+c.length):b.substring(d+c.length,e)}return""},initPage:function(a){txv.log("init page");this.bindBtnTj();txv.login.init(a&&a.login?a.login:null,true);txv.history.init();if(txv.common.isWebqq()){$e(".mod_login").hide();$e("a").attr("target","_self");var b=document.sform;if(b)b.target="_self"}Live.lazyLoad.init(["img"]);a&&a.watch==true&&Live.tj2.watch();a&&a.tj2&&a.tj2.forbidden?txv.log("not report pv on initpage"):Live.tj2.pv(a&&a.tj2?a.tj2:null);$e(".mod_nav a,.mod_nav_simple a").each(function(){var c=$e(this);c.bind("click",function(){var d=c.attr("href").replace("http://"+window.location.host,"").replace(".html","").replace("index","").replace(/\//g,"");Live.tj2.button("nav."+(d||"index"))})})},bindBtnTj:function(){$e("._hotkey").bind("click",function(){txv.common.btnTj(this.getAttribute("_hot"))})},btnTj:function(a){Live.tj2.button(a)},isIframe:function(){return window!=top},isWebqq:function(){if(!txv.common.isIframe())return false;try{if(typeof top.webqq!="undefined")return true}catch(a){return false}},showDevImg:function(){},getDetailUrl:function(a,b){b=b||0;var c="";c=b==0||Live.inArray(b,[1,2,98])>=0?"/detail/":"/cover/";return[txv.common.rootPath,c,a.charAt(0),"/",a,".html"].join("")},getPlayUrl:function(a,b){if(!a)return"";if(a.length==15){var c=[txv.common.rootPath,"/cover/",a.charAt(0),"/",a,".html"].join("");if(b)c+="?vid="+b;return c}return[txv.common.rootPath,"/video/play.html?vid=",a].join("")},getVideoPlayUrl:function(a){return[txv.common.rootPath,"/video/play.html?vid=",a].join("")},getVideoSnap:function(a,b){var c;c=1E8;if(a.indexOf("_")>0){c=a.split("_");a=c[0];b=parseInt(c[1])}c=1E8;for(var d=0,e=0;e<a.length;e++){var h=a.charCodeAt(e);d=d*32+d+h;if(d>=4294967296)d%=4294967296}c=d%c;if(b==undefined)b=0;return b==0?["http://vpic.video.qq.com/",c,"/",a,"_160_90_3.jpg"].join(""):["http://vpic.video.qq.com/",c,"/",a,"_160_90_",b,"_1.jpg"].join("")},getFullUrlPath:function(a){var b=window.location.host;if(b=="sns.video.qq.com")b="v.qq.com";return[window.location.protocol,"//",b,txv.common.rootPath,a].join("")},formatVideoTitle:function(a){return a=a.replace(/^(\d{2})(\d{2})(\d{2})([^_]+)(_?\d*)$/ig,"$4 20$1-$2-$3期")},useHtml5:function(){return Live.userAgent.isiPad||Live.userAgent.isiPhone||/\(ipod;/i.test(navigator.userAgent)}};QZFL.object.extend(QZFL.string,{filterAngleBrk:function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")},filterQuote:function(a){return a.replace(/\x27/g,"&acute;").replace(/\x22/g,"&quot;")},filterAngAndQt:function(a){a=QZFL.string.filterAngleBrk(a);return a=QZFL.string.filterQuote(a)}});Live.txv.history={option:{key:null,tit:null,lnk:null},hisList:null,key:"ten_video_history",template:"<li><span class='mod_video_name'><a href='{lnk}' title='{tit}'>{tit}</a></span><span class='mod_video_time'>{time}</span><a href='{lnk}'>{ltxt}</a><button type='button' onclick='txv.history.rm(\"{key}\");' title='删除'>X</button></li>",setCurVideo:function(a){for(var b in a)txv.history.option[b]=a[b]},init:function(){var a=$e("#history"),b=$e("#history_pop"),c=$e("#history_list").elements.length?$e("#history_list"):b;new Live.FloatMenu({menu:b,area:a.find("h6 a"),areaOutdelay:100,onShow:function(){a.addClass("open");if(c.html().length==0){c.html(" 正在努力获取数据..");txv.history.showHistory();txv.common.btnTj("history")}},onHide:function(){a.removeClass("open")}})},getHistory:function(a){QZFL.Storage.get(txv.history.key,function(b){if(b){txv.log("got history data:"+b);if(typeof b!="string"&&typeof b.value=="string")b=b.value;txv.history.hisList=b?b.split("|"):[]}else{txv.log("no history data");txv.history.hisList=[]}a&&a()})},showHistory:function(a){a=a||5;if(txv.history.hisList==null)txv.history.getHistory(function(){txv.history.showHistory(a)});else{txv.log("on showHistory");var b=txv.history.hisList,c=[],d=b.length<a?b.length:a;if(d==0)$e("#history_pop").html(" 您还没有观看任何视频，暂无记录。");else{for(var e=0;e<d;e++){var h=b[e].split(","),n=h[3]*1,g="继续观看";if(n==0||n==-1){n="播放完毕";g="重新观看"}else if(n==-2)n="剩余不到1分钟";else if(n<60)n="观看不到1分钟";else{var x=["观看至"];if(n>3600){x.push(Math.floor(n/3600),"小时");n%=3600}if(n>60)x.push(Math.floor(n/60),"分钟");else x=["观看不到1分钟*"];n=x.join("")}c.push(txv.history.template.replace(/{key}/g,h[0]).replace(/{tit}/g,h[1]).replace(/{lnk}/g,h[2]).replace(/{ltxt}/g,g).replace(/{time}/g,n))}$e("#history_list").elements.length?$e("#history_list").html(c.join("")):$e("#history_pop").html("<ul>"+c.join("")+"</ul>")}}},toString:function(a,b,c,d,e){if(d>0){c+=c.indexOf("?")>0?"&":"?";c+="start="+d}if(e-d>0&&e-d<60)d=-2;return[a,",",b,",",c,",",d].join("")},add:function(a,b,c,d,e){txv.log(["add history:",a,b,c,d,e].join(","));if(txv.history.hisList==null)txv.history.getHistory(function(){txv.history.add(a,b,c,d,e)});else{var h=txv.history.hisList,n=h.length;n>=20&&h.pop();var g=txv.history.toString(a,b,c,d,e);if(n==0)h.unshift(g);else if(h[0].indexOf(a)==0)h[0]=g;else{txv.history.onRemove(a);h.unshift(g)}QZFL.Storage.set(txv.history.key,h.join("|"))}},onRemove:function(a){for(var b=txv.history.hisList,c=0,d=b.length;c<d;c++)if(b[c].indexOf(a)==0){b.splice(c,1);break}},rm:function(a){if(txv.history.hisList==null)txv.history.getHistory(function(){txv.history.rm(a)});else{txv.history.onRemove(a);QZFL.Storage.set(txv.history.key,txv.history.hisList.join("|"));txv.history.showHistory()}}};function _flash_view_history(a,b){!txv.history.option.key||!txv.history.option.tit||!txv.history.option.lnk?txv.log("add history error: not enough options!"):txv.history.add(txv.history.option.key,txv.history.option.tit,txv.history.option.lnk,a,b)}Live.txv.template={_isLoadingJS:false,timer:{waitJS:0},FILL_TYPE:{TPL_ID:1,TPL_STR:2},convertTime:function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),h=a.getSeconds();return{year:a.getFullYear(),month:b,day:c,hour:d<10?"0"+d:d,min:e<10?"0"+e:e,sec:h<10?"0"+h:h}},MODIFIERS:{formatTime:function(a){if(!/\d+/.test(a))return a;a=parseInt(a)*1E3;a=Live.txv.template.convertTime(new Date(a));return[[a.year,a.month,a.day].join("-"),[a.hour,a.min,a.sec].join(":")].join(" ")},getTimeLong:function(a){return""+parseInt(a/60)+"分钟"+a%60+"秒"},getTimeLong2:function(a){return""+parseInt(a/60)+"&#039;"+a%60+"&#034;"},filterComment:function(a){return a.replace(/\\r\\n/ig,"<br/>")},getPlayUrl:function(a){return txv.common.getPlayUrl(a)},getDetailUrl:function(a,b){return txv.common.getDetailUrl(a,b||0)},getVideoPlayUrl:function(a){return txv.common.getVideoPlayUrl(a)},encode:function(a){return encodeURIComponent(a)},searchurl:function(a){return txv.path.search_cgi+"&ms_key="+encodeURIComponent(a)},getVideoSnap:function(a){return txv.common.getVideoSnap(a,0)},filterStr:function(a){return QZFL.string.filterAngAndQt(a)},getTimeDiff:function(a){if(isNaN(a))return a;if(/^\d{10}$/.test(a))a*=1E3;var b=new Date(a),c=new Date;c=c.getHours()*3600+c.getMinutes()*60+c.getSeconds();a=parseInt(((new Date).valueOf()-a)/1E3);var d="";if(a<60)d="刚刚";else if(a>60&&a<3600)d=Math.ceil(a/60)+"分钟前";else{b=Live.txv.template.convertTime(b);d=a>=3600&&a<c?"今天 "+b.hour+":"+b.min:a>c&&a<c+86400?"昨天 "+b.hour+":"+b.min:b.month+"月"+b.day+"日 "+b.hour+":"+b.min}return d}},fillHtml:function(a,b,c,d,e,h,n,g){function x(z,y,t,p,o,r,v,f){txv.template._isLoadingJS=false;if(r=$(t)){if(typeof h=="undefined")h=Live.txv.template.FILL_TYPE.TPL_ID;if(!(h==Live.txv.template.FILL_TYPE.TPL_ID&&!$(y)||h==Live.txv.template.FILL_TYPE.TPL_STR&&!y)){if(typeof p=="undefined")p=true;if(typeof h=="undefined")h=Live.txv.template.FILL_TYPE.TPL_ID;z._MODIFIERS=o||Live.txv.template.MODIFIERS;z=(h==Live.txv.template.FILL_TYPE.TPL_ID?TrimPath.parseDOMTemplate(y):TrimPath.parseTemplate(y)).process(z);if(p)r.innerHTML=z;else r.innerHTML+=z;if(typeof f=="undefined")f=true;f&&txv.common.isWebqq()&&$e("#"+t+" a").attr("target","_self");typeof v=="function"&&v()}}}if(typeof TrimPath=="undefined")if(txv.template._isLoadingJS==false){txv.log("template is not load js");txv.template._isLoadingJS=true;$j.getScript(Live.txv.path.trimpath,function(){x(a,b,c,d,e,h,n,g)})}else{txv.log("template is loading js,wait...");setTimeout(function(){txv.template.fillHtml(a,b,c,d,e,h,n,g)},100)}else x(a,b,c,d,e,h,n,g)}};var _irt={version:"0.0.6",dataHandler:"http://tj.video.qq.com/fcgi-bin/report",sessionDomain:"qq.com",_account:"",_debug:false,_isReport:false,init:function(a){if(!_irt._isReport||typeof txv!="undefined"){_irt._isReport=true;this._account=a;this._track()}},_getSessionId:function(){var a="";return a=this._md5([this.sessionDomain!=null?this.sessionDomain:location.host,location.href,navigator.userAgent,(new Date).valueOf()].join(""))},_trackStart:function(a){if(a.indexOf("-")<0)return"invalid user identify.";this.init(a);return this},_track:function(){var a=this._getCookie("lv_irt_id");a!=""&&a!="undefined"&&a!=null||(a=this._getSessionId());this._setCookie("lv_irt_id",a,120);this._feedBack()},_feedBack:function(){var a=this.dataHandler+"?"+["id="+this._account,"sc="+encodeURIComponent(this._getCookie("lv_irt_id")),"pt="+encodeURIComponent(document.title),"dm="+window.location.host,"pa="+encodeURIComponent(window.location.pathname),"sr="+document.body.clientWidth+"x"+document.body.clientHeight,"ul="+navigator.language,"tv="+this.version,"r="+(new Date).getTime()].join("&");this._img=new Image;this._img.src=a},_getCookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++){c=e[b].substr(0,e[b].indexOf("="));d=e[b].substr(e[b].indexOf("=")+1);c=c.replace(/^\s+|\s+$/g,"");if(c==a)return unescape(d)}},_setCookie:function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);b=escape(b)+(c==null?"":"; expires="+d.toUTCString());document.cookie=a+"="+b+(this.sessionDomain==null?"":"; domain="+this.sessionDomain)+"; path=/";return true},_debugMode:function(){if(!this._debug)this._debug=true},_md5:function(a){function b(f,i){var j,k,u,q,w;u=f&2147483648;q=i&2147483648;j=f&1073741824;k=i&1073741824;w=(f&1073741823)+(i&1073741823);if(j&k)return w^2147483648^u^q;return j|k?w&1073741824?w^3221225472^u^q:w^1073741824^u^q:w^u^q}function c(f,i,j,k,u,q,w){f=b(f,b(b(i&j|~i&k,u),w));return b(f<<q|f>>>32-q,i)}function d(f,i,j,k,u,q,w){f=b(f,b(b(i&k|j&~k,u),w));return b(f<<q|f>>>32-q,i)}function e(f,i,j,k,u,q,w){f=b(f,b(b(i^j^k,u),w));return b(f<<q|f>>>32-q,i)}function h(f,i,j,k,u,q,w){f=b(f,b(b(j^(i|~k),u),w));return b(f<<q|f>>>32-q,i)}function n(f){var i="",j="",k;for(k=0;k<=3;k++){j=f>>>k*8&255;j="0"+j.toString(16);i+=j.substr(j.length-2,2)}return i}var g=[],x,z,y,t,p,o,r,v;a=function(f){f=f.replace(/\r\n/g,"\n");for(var i="",j=0;j<f.length;j++){var k=f.charCodeAt(j);if(k<128)i+=String.fromCharCode(k);else{if(k>127&&k<2048)i+=String.fromCharCode(k>>6|192);else{i+=String.fromCharCode(k>>12|224);i+=String.fromCharCode(k>>6&63|128)}i+=String.fromCharCode(k&63|128)}}return i}(a);g=function(f){var i,j=f.length;i=j+8;for(var k=((i-i%64)/64+1)*16,u=Array(k-1),q=0,w=0;w<j;){i=(w-w%4)/4;q=w%4*8;u[i]|=f.charCodeAt(w)<<q;w++}u[(w-w%4)/4]|=128<<w%4*8;u[k-2]=j<<3;u[k-1]=j>>>29;return u}(a);p=1732584193;o=4023233417;r=2562383102;v=271733878;for(a=0;a<g.length;a+=16){x=p;z=o;y=r;t=v;p=c(p,o,r,v,g[a+0],7,3614090360);v=c(v,p,o,r,g[a+1],12,3905402710);r=c(r,v,p,o,g[a+2],17,606105819);o=c(o,r,v,p,g[a+3],22,3250441966);p=c(p,o,r,v,g[a+4],7,4118548399);v=c(v,p,o,r,g[a+5],12,1200080426);r=c(r,v,p,o,g[a+6],17,2821735955);o=c(o,r,v,p,g[a+7],22,4249261313);p=c(p,o,r,v,g[a+8],7,1770035416);v=c(v,p,o,r,g[a+9],12,2336552879);r=c(r,v,p,o,g[a+10],17,4294925233);o=c(o,r,v,p,g[a+11],22,2304563134);p=c(p,o,r,v,g[a+12],7,1804603682);v=c(v,p,o,r,g[a+13],12,4254626195);r=c(r,v,p,o,g[a+14],17,2792965006);o=c(o,r,v,p,g[a+15],22,1236535329);p=d(p,o,r,v,g[a+1],5,4129170786);v=d(v,p,o,r,g[a+6],9,3225465664);r=d(r,v,p,o,g[a+11],14,643717713);o=d(o,r,v,p,g[a+0],20,3921069994);p=d(p,o,r,v,g[a+5],5,3593408605);v=d(v,p,o,r,g[a+10],9,38016083);r=d(r,v,p,o,g[a+15],14,3634488961);o=d(o,r,v,p,g[a+4],20,3889429448);p=d(p,o,r,v,g[a+9],5,568446438);v=d(v,p,o,r,g[a+14],9,3275163606);r=d(r,v,p,o,g[a+3],14,4107603335);o=d(o,r,v,p,g[a+8],20,1163531501);p=d(p,o,r,v,g[a+13],5,2850285829);v=d(v,p,o,r,g[a+2],9,4243563512);r=d(r,v,p,o,g[a+7],14,1735328473);o=d(o,r,v,p,g[a+12],20,2368359562);p=e(p,o,r,v,g[a+5],4,4294588738);v=e(v,p,o,r,g[a+8],11,2272392833);r=e(r,v,p,o,g[a+11],16,1839030562);o=e(o,r,v,p,g[a+14],23,4259657740);p=e(p,o,r,v,g[a+1],4,2763975236);v=e(v,p,o,r,g[a+4],11,1272893353);r=e(r,v,p,o,g[a+7],16,4139469664);o=e(o,r,v,p,g[a+10],23,3200236656);p=e(p,o,r,v,g[a+13],4,681279174);v=e(v,p,o,r,g[a+0],11,3936430074);r=e(r,v,p,o,g[a+3],16,3572445317);o=e(o,r,v,p,g[a+6],23,76029189);p=e(p,o,r,v,g[a+9],4,3654602809);v=e(v,p,o,r,g[a+12],11,3873151461);r=e(r,v,p,o,g[a+15],16,530742520);o=e(o,r,v,p,g[a+2],23,3299628645);p=h(p,o,r,v,g[a+0],6,4096336452);v=h(v,p,o,r,g[a+7],10,1126891415);r=h(r,v,p,o,g[a+14],15,2878612391);o=h(o,r,v,p,g[a+5],21,4237533241);p=h(p,o,r,v,g[a+12],6,1700485571);v=h(v,p,o,r,g[a+3],10,2399980690);r=h(r,v,p,o,g[a+10],15,4293915773);o=h(o,r,v,p,g[a+1],21,2240044497);p=h(p,o,r,v,g[a+8],6,1873313359);v=h(v,p,o,r,g[a+15],10,4264355552);r=h(r,v,p,o,g[a+6],15,2734768916);o=h(o,r,v,p,g[a+13],21,1309151649);p=h(p,o,r,v,g[a+4],6,4149444226);v=h(v,p,o,r,g[a+11],10,3174756917);r=h(r,v,p,o,g[a+2],15,718787259);o=h(o,r,v,p,g[a+9],21,3951481745);p=b(p,x);o=b(o,z);r=b(r,y);v=b(v,t)}return(n(p)+n(o)+n(r)+n(v)).toLowerCase()}};Live.txv.VideoInfo=function(){this.vid="";this.idx=0;this.duration=this.vidlist="";this.tagStart=0;this.tagDur="";this.historyStart=0;this.tp=Live.txv.VIDEO_TYPE.SECTION;this.pianwei=this.piantou=0};Live.txv.VideoInfo.prototype={setVid:function(a){if(a.indexOf("|")<0){var b=txv.VideoInfo.getRealVid(a);this.vid=b;this.idx=txv.VideoInfo.getIdx(a);this.vidlist=b}else{b=a.split("|");this.vid=txv.VideoInfo.getRealVid(b[0]);this.idx=txv.VideoInfo.getIdx(b[0]);this.vidlist=txv.VideoInfo.getRealVidList(a)}},getTagStart:function(){if(this.idx==0)return 0;if(!this.tagStart)return 0;return parseInt(this.tagStart)},getTagEnd:function(){if(this.idx==0)return 0;if(isNaN(this.tagDur)||this.tagDur==="")return 0;return parseInt(this.tagDur)+this.getTagStart()},getValFromEl:function(a){this.vidlist=a.attr("sv")||this.vidlist||"";this.duration=a.attr("tl")||this.duration||"";this.tagDur=a.attr("tl")||this.tagDur||"";this.tagStart=a.attr("bt")||this.tagStart||0;this.tp=a.attr("tp")||1;this.piantou=a.attr("pt")||this.piantou||0;this.pianwei=a.attr("pw")||this.pianwei||0},clear:function(){this.idx=0;this.tagDur=this.duration=this.vidlist="";this.historyStart=this.tagStart=0;this.tp=Live.txv.VIDEO_TYPE.SECTION;this.pianwei=this.piantou=0},dump:function(){txv.log("----------------");for(var a in this)typeof this[a]!="function"&&txv.log('VideoInfo["'+a+'"]='+this[a])},getVidListCnt:function(){return this.vidlist.split("|").length},getFullVid:function(){return txv.VideoInfo.getFullVid(this.vid,this.idx)},getFullTagId:function(){return this.vid+"_"+this.idx},getTotDuration:function(){for(var a=this.duration.split("|"),b=0,c=0,d=a.length;c<d;c++)b+=parseInt(a[c]);return b},getEndOffset:function(){return this.getTotDuration()-this.pianwei}};Live.txv.VideoInfo.getFirstVid=function(a){if(a.indexOf("|")<0)return a;return a.substring(0,a.indexOf("|"))};Live.txv.VideoInfo.getRealVid=function(a){if(a.indexOf("_")<0)return a;return a.split("_")[0]};Live.txv.VideoInfo.getIdx=function(a){if(a.indexOf("_")<0)return 0;return parseInt(a.split("_")[1])};Live.txv.VideoInfo.getRealVidList=function(a){var b=[];a=a.split("|");for(var c=0;c<a.length;c++)b.push(txv.VideoInfo.getRealVid(a[c]));return b.join("|")};Live.txv.VideoInfo.getFullVid=function(a,b){var c=a;if(b>0)c+="_"+b;return c};Live.txv.baseplayer={init:function(a){if(a){a.width=0;a.height=0;a.isInheritBase=true;for(var b=["init","setCurVideo","addParam","write","play","getNextVideoObj","getPreVid","callback","onAllEnd"],c=0,d=b.length;c<d;c++)a[b[c]]=Live.emptyFn}}};var preplay=QZFL.emptyFn,nextplay=QZFL.emptyFn,thisplay=QZFL.emptyFn;Live.txv.VIDEO_TYPE={SECTION:1,TAGS:2,CLIPS:3};var _flash_report_imgobj;Live.txv.FlashPlayer=function(a,b){function c(g){g=[txv.path.flashReport,"cmd=",g,"&vid="+e.vid,"&rnd=",(new Date).valueOf()].join("");if(e.idx>0)g+="&idx="+e.idx;_flash_report_imgobj=new Image(1,1);_flash_report_imgobj.src=g}var d={autoplay:(typeof txv.playUtil.conf.autoplay!==undefined)?txv.playUtil.conf.autoplay:0,adplay:(typeof txv.playUtil.conf.adplay !==undefined)?txv.playUtil.conf.adplay:1,swfurl:"//static.video.qq.com/TencentPlayer.swf",flashid:"_playerswf",listtype:2,version:"20110401",showcfg:"0",tpid:0},e=new txv.VideoInfo,h=null,n=this;if(typeof txv.playUtil.conf.pic !== "undefined"){d.pic = txv.playUtil.conf.pic;}if(txv.FlashPlayer.instance.length>0)throw"Flash播放器在一个页面只能创建一个实例";else txv.FlashPlayer.instance[0]=n;txv.baseplayer.init(this);this.width=a;this.height=b;this.init=function(g){Live.object.extend(d,g)};this.getFlashPlayer=function(){return Live.userAgent.ie?$(d.flashid):document.embeds[d.flashid]};this.setCurVideo=function(g){for(var x in g)e[x]=g[x]};this.addParam=function(g,x){e[g]=x};this.addConf=function(g,x){d[g]=x};this.write=function(g){if(!h){c(d.autoplay==1?2:1);e.dump();var x="",z;z="version="+d.version;z+="&vid="+(e.vidlist||e.vid);z+="&autoplay="+d.autoplay;if(typeof d.pic != "undefined"){z += "&pic=" + d.pic;}z+=d.listtype!=0?"&list="+d.listtype:"";if(e.getTagEnd()-e.getTagStart()>0){z+="&attstart="+e.getTagStart();z+="&attend="+e.getTagEnd()}z+="&duration="+(e.duration||"");if(e.historyStart>0)z+="&history="+e.historyStart;var y=e.piantou,t=e.getEndOffset();if(y>0||t){z+="&vstart="+y;z+="&vend="+t}if(y=txv.common.getUrlParam("oid"))z+="&oid="+y;if(d.cid)z+="&cid="+d.cid;if(d.adplay)z+="&adplay="+d.adplay;z+="&showcfg="+d.showcfg;if(d.tpid>0)z+="&tpid="+d.tpid;txv.log("flashvars: "+z);if(Live.userAgent.ie){x+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+n.width+'" height="'+n.height+'" id="'+d.flashid+'" align="middle" codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab#version=10,0,0,0">';x+='    <param name="allowScriptAccess" value="always" />';x+='    <param name="movie" value="'+d.swfurl+'" />';x+='    <param name="quality" value="high" />';x+='    <param name="allowFullScreen" value="true"/>';x+='    <param name="play" value="true" />';x+='    <param name="wmode" value="Opaque" />';x+='    <param name="flashvars" value="'+z+'"/>';x+='    <param name="type" value="application/x-shockwave-flash" />';x+='    <param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer" />';x+="</object>"}else x+='<embed wmode="Opaque" flashvars="'+z+'" src="'+d.swfurl+'" quality="high" name="'+d.flashid+'" id="'+d.flashid+'" bgcolor="#000000" width="'+n.width+'" height="'+n.height+'" align="middle" allowScriptAccess="always" allowFullScreen="true"  type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';$(g).innerHTML=x;h=Live.userAgent.ie?$(d.flashid):document.embeds[d.flashid];n.callback(e)}};this.play=function(g){g.dump();if(e.vidlist!=g.vidlist||g.idx==0){var x=g.vidlist||g.vid,z=g.duration||"",y=g.getTagStart(),t=g.getTagEnd(),p=g.historyStart||0,o=g.piantou||0,r=g.getEndOffset()||0;txv.log("send to flash player params is "+[x,z,y,t,p,o,r].join(","));h.loadAndPlayVideoFromVID(x,z,y,t,p,o,r)}else g.getTagEnd()-g.getTagStart()>0&&h.attractionUpdate(g.getTagStart(),g.getTagEnd());c(2);n.setCurVideo(g);n.callback(g)};this.getNextVideoObj=function(){return null};this.getPreVid=function(){};this.callback=function(){};nextplay=function(){txv.log("flash player call [nextplay]");var g=n.getNextVideoObj(e.vid);if(g)n.play(g);else{txv.log("nextParamObj==null");if(typeof n.onAllEnd=="function")n.onAllEnd()}}};Live.txv.FlashPlayer.instance=[];Live.txv.Html5Player=function(a,b){function c(){this.end=this.start=0}function d(j){for(var k="",u=0;u<j;u++)k+="0123456789qwertyuioplkjhgfdsazxcvbnm".charAt(Math.ceil(Math.random()*1E8)%36);return k}function e(j,k){if(!(isNaN(k)||k<=0||k==2147483647)){var u="http://rcgi.video.qq.com/report/play?";d(48);var q=[],w={step:j,val:k,version:"html5"};Live.object.extend(w,o);for(var B in w)q.push(B+"="+encodeURIComponent(w[B]));u+=q.join("&");t=new Image;t.src=u}}function h(j){try{var k=$(r.id);if(k){k.currentTime=j;txv.log("set currentTime = "+j)}}catch(u){setTimeout(function(){h(j)},50)}}function n(j,k){$j.ajax({url:txv.path.html5_video_cgi,data:{vid:j},dataType:"jsonp",success:function(u){if(!(!u||!u.s||u.s!="o"))if(k&&typeof k.onSuccess=="function")k.onSuccess(u)},error:function(){if(k&&typeof k.onError=="function")k.onError()}})}function g(j){var k=$(r.id);if(k){var u="";if(QZFL.object.getType(j)=="array")for(var q=0;q<j.length;q++)u+='<source src="'+j[q]+'"></source>';else u='<source  src="'+j+'"></source>';k.pause();j=$e(k);j.unBind("canplay");j.bind("canplay",function(){var w=0;if(y.idx>0)w=y.tagStart;else if(y.historyStart>0)w=y.historyStart;h(w);y.historyStart=0;k.play()});p.start=new c;j.bind("loadstart",function(){p.start.start=(new Date).valueOf()});j.bind("playing",function(){p.start.end=(new Date).valueOf();e(6,p.start.getTimelong());e(30,p.start.getTimelong());p.start=null;delete p.start});k.innerHTML=u;j.find("source").unBind("error");j.find("source").bind("error",function(){e(30,9E6)});k.load();k.play()}}function x(j){txv.log("ready to get "+j+" video file url");n(j,{onSuccess:function(k){if(!(!k.vd||!k.vd.vi||QZFL.object.getType(k.vd.vi)!="array")){for(var u=[],q=0;q<k.vd.vi.length;q++)if(k.vd.vi[q].st==2)if(!(k.vd.vi[q].url.toLowerCase().indexOf(".mp4")<0))if(k.vd.vi[q].url){k=k.vd.vi[q];u.push(k.url);try{o.duration=parseInt(k.dur);o.vtype=k.vt;o.vurl=k.url.substr(0,k.url.indexOf("?"));o.bt=y.getTotDuration()||o.duration;o.pid=d(48)}catch(w){}break}if(u.length==0)v.onerror();else{f=j;g(u)}}},onError:function(){}})}function z(){$e("#"+r.id).bind("ended",function(){txv.log("video tag onended");var j;j=y.vidlist.split("|");var k=Live.inArray(f,j);j=k<j.length-1?j[k+1]:"";txv.log("next vid is "+j);if(j&&j.length>0){h(0);y.idx=0;y.tagStart=0;y.tp=1;x(j)}else(j=v.getNextVideoObj(y.vid))&&v.play(j)})}var y=new txv.VideoInfo,t=null;c.prototype={getTimelong:function(){return this.end-this.start}};var p={},o={vurl:"",vtype:0,format:2,duration:0,bt:0,pid:""},r={autobuffer:"true",controls:"1",preload:"true",autoplay:"1","x-webkit-airplay":"true",id:"_qqlivevideo"},v=this,f="",i=null;txv.baseplayer.init(this);this.width=a;this.height=b;this.addParam=function(j,k){y[j]=k};this.addConf=function(j,k){r[j]=k};this.setCurVideo=function(j){for(var k in j)y[k]=j[k]};this.play=function(j){j=j||y;j.dump();if(f&&f==j.vid&&j.idx>0){txv.log("vid not changed,only set current time");h(j.tagStart)}else{txv.log("vid changed or not tag,reload video info");x(j.vid)}this.setCurVideo(j);v.callback(j);if(typeof _flash_view_history=="function"){clearInterval(i);i=setInterval(function(){try{for(var k=$(r.id),u=Live.inArray(f,y.vidlist.split("|")),q=y.duration.split("|"),w=0,B=0;B<u;B++)w+=parseInt(q[B]);_flash_view_history(parseInt(k.currentTime)+w,y.getTotDuration())}catch(A){}},1E4)}};this.write=function(j){if(j=$(j)){var k="<video width='"+this.width+"' height='"+this.height+"'",u;for(u in r)k+=" "+u+"='"+r[u]+"'";k+="></video>";j.innerHTML=k;z();if(y.historyStart>0&&y.idx==0){u=y.vidlist.split("|");j=y.duration.split("|");for(var q=k=0,w=Math.min(u.length,j.length);q<w-1;q++){k+=parseInt(j[q]);if(q==0&&k>y.historyStart)break;else if(k>y.historyStart){y.vid=u[q];y.historyStart-=k-j[q];break}}}v.play()}};this.onerror=Live.emptyFn};Live.txv.playUtil={PAGE_TYPE:{COVER:1,VIDEO:2},TPL_TYPE:{BLACK:1,WHITE:2},RELATE_TYPE:{NO:0,WAIJUE:1,RND:2,HOTRANK_RND:3},conf:{pageType:1,autoplay:0,adplay:1,coverid:"",relateType:0,subTypeId:0,tplType:1,coverType:0,coverPic:"",vid:"",isSerial:false,listModId:"mod_videolist",playerModId:"mod_player",modInner:"mod_inner",duration:"",coverTitle:"",secTitle:"",simpleImgCnt:5,scoreSNS:0,videoReName:true,hasPeriod:false,isVideoUnion:false,mburl:"",piantou:0,pianwei:0,playerWidth:0,playerHeight:0,flashvars:{showcfg:"0"},videoTabSize:30,relateCover:"",useHotrankRmd:false,showBook:false},flashplayer:null,mainData:{yearTab:null,monthTab:[],mainTitle:"",defaultTitle:"",curTitle:""},$close:null,$open:null,paramObj:null,$videolinklist:null,simpleImgObj:null,comm:{setBread:function(a){var b=$("mod_paths");if(b)if(!(QZFL.object.getType(a)!="array"||a.length==0)){for(var c=document.createDocumentFragment(),d=0,e=a.length;d<e;d++)if(a[d].text){var h=document.createElement("A");h.setAttribute("href",a[d].href||"javascript:;");var n=document.createTextNode(a[d].text);h.appendChild(n);var g=document.createTextNode(" > ");h.appendChild(n);c.appendChild(h);c.appendChild(g)}b.insertBefore(c,b.childNodes[0])}},initBreadHOTReport:function(a){$e("#mod_paths a").each(function(b,c){$e(b).bind("click",function(){Live.tj2.hot(a+".bread."+c)})})},getHotrankRmdPath:function(){return txv.common.getFullUrlPath("/json/recomm/hot/"+(parseInt(Math.random()*4)+1)+".json")},getUrlVid:function(){var a=txv.common.getUrlParam("vid");if(typeof a=="string"&&a)return a.replace("_0","");return""},getVideoList:function(){if(txv.playUtil.$videolinklist==null||txv.playUtil.$videolinklist.size()==0){txv.playUtil.$videolinklist=null;txv.playUtil.$videolinklist=$e("#"+txv.playUtil.conf.listModId+" li a")}return txv.playUtil.$videolinklist},setWinTitle:function(a,b){var c=txv.playUtil.comm.buildWinTitleStr(a,b);if(c)document.title=Live.string.restHTML(c)},buildWinTitleStr:function(a,b){if(!a)return"";return a+(b?" "+b:"")+" - 高清在线观看 - 腾讯视频"},setH1Title:function(a){$e("#h1_title").html(""+a);txv.playUtil.comm.setCurTitle(a)},saveDefaultTitle:function(a){txv.playUtil.mainData.defaultTitle=a||$e("#h1_title").text().replace("正在播放：","")},setCurTitle:function(a){txv.playUtil.mainData.curTitle=a},getCurTitle:function(){return txv.playUtil.mainData.curTitle},getDefaultTitle:function(){return txv.playUtil.mainData.defaultTitle},setPiantouPianwei:function(){if(txv.playUtil.paramObj)if(txv.playUtil.conf){txv.playUtil.paramObj.piantou=txv.playUtil.conf.piantou||0;txv.playUtil.paramObj.pianwei=txv.playUtil.conf.pianwei||0}else{txv.playUtil.paramObj.piantou=0;txv.playUtil.paramObj.pianwei=0}else txv.log("txv.playUtil.paramObj is not valied")},initWhiteVideoListTab:function(a){a=a||txv.playUtil.paramObj.getFullVid();if(txv.playUtil.conf.tplType==txv.playUtil.TPL_TYPE.WHITE)if($e("#"+txv.playUtil.conf.listModId+" li").size()>txv.playUtil.conf.simpleImgCnt){$e("#list_next").show();$e("#list_prev").show();a=txv.playUtil.comm.getVideoList().index($e("#"+a));txv.playUtil.varietyPage.scrollVideoListByTab(a<0?0:Math.floor(a/txv.playUtil.conf.simpleImgCnt))}},useHtml5:function(){return txv.common.useHtml5()},resetparamObjByTagId:function(){if(txv.playUtil.conf.pageType==txv.playUtil.PAGE_TYPE.COVER&&txv.playUtil.paramObj.idx>0){var a=txv.playUtil.conf.vid.split("|"),b=txv.playUtil.conf.duration.split("|");a=Live.inArray(txv.playUtil.paramObj.vid,a);if(a>=0){txv.playUtil.paramObj.duration=txv.playUtil.conf.duration;txv.playUtil.paramObj.vidlist=txv.playUtil.conf.vid;if(!txv.playUtil.comm.useHtml5()){for(var c=0,d=0;d<=a-1&&d<b.length-1;d++)c+=parseInt(b[d],10);c+=txv.playUtil.paramObj.getTagStart();txv.playUtil.paramObj.tagStart=c}}else txv.playUtil.paramObj.duration=""}},bindVideoListClick:function(){txv.playUtil.comm.getVideoList().bind("click",function(a){var b=$e(this);txv.playUtil.paramObj.clear();txv.playUtil.paramObj.setVid(b.attr("id"));txv.playUtil.comm.setPiantouPianwei();txv.playUtil.paramObj.getValFromEl(b);txv.playUtil.comm.resetparamObjByTagId();txv.playUtil.comm.changeVideo(txv.playUtil.paramObj);if(a&&a.preventDefault)a.preventDefault();else return false});$e("#"+txv.playUtil.conf.listModId+" li>img").bind("click",function(a){var b=$e(this).getParent().find("a");txv.playUtil.paramObj.clear();txv.playUtil.paramObj.setVid(b.attr("id"));txv.playUtil.comm.setPiantouPianwei();txv.playUtil.paramObj.getValFromEl(b);txv.playUtil.comm.resetparamObjByTagId();txv.playUtil.comm.changeVideo(txv.playUtil.paramObj);if(a&&a.preventDefault)a.preventDefault();else return false})},initVideoList:function(){txv.playUtil.comm.initWhiteVideoListTab();txv.playUtil.comm.bindVideoListClick()},initSideBar:function(){if(txv.playUtil.conf.tplType!=txv.playUtil.TPL_TYPE.BLACK){txv.playUtil.$close=$e("#btn_sidebar_close");txv.playUtil.$open=$e("#btn_sidebar_open");txv.playUtil.$close.bind("click",function(){txv.playUtil.comm.closeSideBar()});txv.playUtil.$open.bind("click",function(){txv.playUtil.comm.showSideBar()})}},changeVideo:function(a){txv.playUtil.flashplayer&&txv.playUtil.flashplayer.play(a)},showSideBar:function(){txv.playUtil.$close.show();txv.playUtil.$open.hide();$e("#"+txv.playUtil.conf.modInner).removeClass("center");$e(".mod_video_list_section").show()},closeSideBar:function(){txv.playUtil.$close.hide();txv.playUtil.$open.show();$e("#"+txv.playUtil.conf.modInner).addClass("center");$e(".mod_video_list_section").hide()},hideSideBar:function(){txv.playUtil.$close.hide();txv.playUtil.$open.hide();$e("#"+txv.playUtil.conf.modInner).addClass("center");$e(".mod_video_list_section").hide()},showPlayer:function(){if(txv.playUtil.flashplayer){txv.playUtil.flashplayer.write(txv.playUtil.conf.playerModId);$e("#"+txv.playUtil.conf.playerModId).show()}},setVideoSelected:function(){$e("#"+txv.playUtil.conf.listModId+" li.current").removeClass("current");var a=$e("#li_"+txv.playUtil.paramObj.getFullVid()),b=a.find("img");b.attr("src")||b.attr("src",b.attr("_src"));b.show();a.addClass("current");txv.playUtil.comm.setWhiteVideoTabSelected()},setWhiteVideoTabSelected:function(){var a=$e("#li_"+txv.playUtil.paramObj.getFullVid()),b=txv.playUtil.comm.getVideoList().index($e("#"+txv.playUtil.paramObj.getFullVid()));a=a.attr("offsetTop")||0;var c=txv.playUtil.varietyPage.getVideoListScrollTop()||0;a-=c;if(a>=76*txv.playUtil.conf.simpleImgCnt||a<0)txv.playUtil.varietyPage.scrollVideoList(76*b)},onWhitePlayerStart:function(a,b){txv.playUtil.comm.setVideoSelected();if(txv.playUtil.comm.getVideoList().size()>0){var c=$e("#"+a.getFullVid()).text();if(c.length>0){txv.playUtil.comm.setH1Title(c);txv.playUtil.comm.setWinTitle(txv.playUtil.conf.coverTitle||txv.playUtil.comm.getDefaultTitle(),c)}else{txv.playUtil.comm.setH1Title(txv.playUtil.comm.getDefaultTitle());txv.playUtil.comm.setWinTitle(txv.playUtil.comm.getDefaultTitle())}}typeof b=="function"&&b(a)},getNextVideoObj:function(a){txv.log("[getNextVideoObj]:curvid="+a+",ready to find next vid or vidlist");if(!a)return null;var b=txv.playUtil.comm.getVideoList().size();if(b<=1)return null;a=$e("#"+a);a=txv.playUtil.comm.getVideoList().index(a);if(a>=b-1)return null;b=txv.playUtil.comm.getVideoList().get(a+1);if(b.attr("tagName")==null)return null;txv.log("[getNextVideoObj]:found next vid");if(txv.VideoInfo.getIdx(b.attr("id"))>0){txv.log("[getNextVideoObj]:next vid is tag,skip it");return null}txv.playUtil.paramObj.clear();txv.playUtil.paramObj.setVid(b.attr("id"));txv.playUtil.comm.setPiantouPianwei();txv.playUtil.paramObj.getValFromEl(b);return txv.playUtil.paramObj},setHtml5Cookie:function(){var a=Live.cookie.get("qv_swfrfh"),b=Live.cookie.get("qv_swfrfc");if(!(a=="v.qq.com"&&b=="v10")){Live.cookie.set("qv_swfrfh","v.qq.com","qq.com","/");Live.cookie.set("qv_swfrfc","v10","qq.com","/")}},setJumpSession:function(a){if(window.sessionStorage)window.sessionStorage.pvJump=a;else Live.cookie.set("pvJump",a,window.location.host,"/",5/3600)},getJumpSession:function(){return window.sessionStorage&&window.sessionStorage.pvJump?window.sessionStorage.pvJump:Live.cookie.get("pvJump")},delJumpSession:function(){if(window.sessionStorage&&window.sessionStorage.pvJump){window.sessionStorage.pvJump=null;delete window.sessionStorage.pvJump}else Live.cookie.del("pvJump",window.location.host,"/")}},varietyPage:{_rightVideoListMod:null,_curVideoListTab:0,hidePlayAll:function(){$e("#btn_play_cover").hide()},showPlayAll:function(){$e("#btn_play_cover").show()},enablePlayAll:function(){var a=$e("#btn_play_cover");a.removeClass("disabled");a.show()},disablePlayAll:function(){$e("#btn_play_cover").addClass("disabled")},getRightVideoListMod:function(){if(!txv.playUtil.varietyPage._rightVideoListMod)txv.playUtil.varietyPage._rightVideoListMod=$e("#"+txv.playUtil.conf.listModId+" .mod_cont");return txv.playUtil.varietyPage._rightVideoListMod},scrollVideoListByTab:function(a){if(txv.playUtil.varietyPage._curVideoListTab!=a){txv.playUtil.varietyPage.scrollVideoList(76*txv.playUtil.conf.simpleImgCnt*a);txv.playUtil.varietyPage._curVideoListTab=a}},scrollVideoList:function(a){txv.playUtil.varietyPage.getRightVideoListMod().attr("scrollTop",a||0)},getVideoListScrollTop:function(){return txv.playUtil.varietyPage.getRightVideoListMod().attr("scrollTop")}},videoPage:{dataset:{mainVideoTitle:"",coverTitle:"",curVideoTitle:"",isAddedToMusicBox:false},ajaxtimer:{videoinfo:false,tags:false,timer:0},initVideoList:function(){if(txv.playUtil.comm.getVideoList().size()!=0){txv.playUtil.comm.initWhiteVideoListTab(txv.playUtil.paramObj.getFullTagId());txv.playUtil.comm.bindVideoListClick();txv.playUtil.flashplayer.write(txv.playUtil.conf.playerModId);txv.playUtil.comm.setVideoSelected()}},onVideoPlayStart:function(a){txv.playUtil.comm.onWhitePlayerStart(a,function(b){var c=b.getFullVid(),d="";d=txv.playUtil.comm.getVideoList().size()>0?$e("#"+b.getFullVid()).text():txv.playUtil.mainData.mainTitle;txv.playUtil.videoPage.dataset.curVideoTitle=d;b=txv.common.getVideoPlayUrl(b.getFullVid());txv.log("[setCurVideo]:key="+c+",tit="+d+",lnk="+b);txv.history&&txv.history.setCurVideo({key:c,tit:d,lnk:b})})},loadVideoULike:function(a){$j.ajax({url:txv.path.videoRelate,dataType:"jsonp",data:{vid:txv.playUtil.paramObj.vid,idx:txv.playUtil.paramObj.idx},success:function(b){if(!b||!b.list||b.list.length==0)$e("#mod_recommend_video").hide();else{a=a||0;if(a>0)b.list=b.list.slice(0,Math.min(a,b.list.length));for(var c=0;c<b.list.length;c++)b.list[c].tagid=txv.VideoInfo.getFullVid(b.list[c].id,b.list[c].idx||0);txv.template.fillHtml(b,txv.coverUtil.conf.ulike_tpl_id,txv.coverUtil.conf.ulike_container_id,true,null,txv.template.FILL_TYPE.TPL_ID,function(){var d=Math.ceil(b.list.length/4);b.dotshow=[];for(var e=0;e<d;e++)b.dotshow.push(e);txv.template.fillHtml(b,"tpl_ulike_dotshow","mod_ulike_dotshow");d=$e("#mod_ulike_dotshow");(new Live.DotShow).init({playRight:d.find(".next"),playLeft:d.find(".prev"),pagerItems:d.find("ul li"),items:$e("#ul_ulike_list li"),isLazy:false,showCnt:4})})}},error:function(){$e("#mod_recommend_video").hide()}})},initVideoComment:function(a,b){if(typeof b=="undefined")b=true;a||(b=false);if(b){$e(".mod_microblog").show();var c={};Live.object.extend(c,txv.playUtil.conf);c.weiboTopic=a;txv.comment.init(c)}else $e(".mod_microblog").hide()},onVideoInfoErr:function(){txv.playUtil.paramObj.duration="";txv.playUtil.paramObj.tagStart=0;txv.playUtil.paramObj.vidlist=txv.playUtil.paramObj.vid;txv.playUtil.comm.showPlayer()},showNewsHotrank:function(a){if(!isNaN(a)&&Live.inArray(a,[24,23,4,5])!=-1){var b=null;(new Live.TabShow).init({tabItems:$e("#mod_news_hotrank .mod_tab li"),contentItems:$e("#mod_news_hotrank .mod_toplist .mod_cont"),tabShowCss:"current",getType:"jsonp",jsonpFun:"_videoHotrank",callback:function(c,d){for(var e=d.items.length,h=0;h<e;h++)d.items[h].num=h+1;txv.template.fillHtml(d,"tpl_hotrank_list",c.attr("id"),true,null,txv.template.FILL_TYPE.TPL_ID,function(){var n=c.find("a");n.unBind("click");n.bind("click",function(){Live.tj2.hot("VIDEO.RANK.ITEMS")})});if($e("#mod_news_hotrank .mod_toplist .mod_cont").index(c)>0){clearTimeout(b);b=setTimeout(function(){Live.tj2.hot("VIDEO.RANK.TAB")},200)}}});$e("#mod_news_hotrank").show()}},initSingerAndWeibo:function(a,b,c){if(typeof a!="undefined"&&!isNaN(a)&&a>0)$j.ajax({url:txv.path.singerMVList,dataType:"jsonp",data:{sort:2,id:a,dis:0,page:1},success:function(d){txv.template.fillHtml(d,"tpl_mod_singer","container_mod_singer",true,null,txv.template.FILL_TYPE.TPL_ID,function(){txv.coverUtil.initMoreLink()});$e("#mod_singer").show();if(d.mv)if(d.mv.length==0){$e("#mod_recommend_title").hide();$e("#mod_recommend_video").hide()}else{d.ismv=true;d.mv=d.mv.slice(0,Math.min(16,d.mv.length));d.dotshow=[];for(var e=Math.ceil(d.mv.length/8),h=0;h<e;h++)d.dotshow.push(h);txv.template.fillHtml(d,"tpl_ulike_list","ul_ulike_list",true,null,txv.template.FILL_TYPE.TPL_ID,function(){txv.template.fillHtml(d,"tpl_ulike_dotshow","mod_ulike_dotshow");var n=$e("#mod_ulike_dotshow");(new Live.DotShow).init({playRight:n.find(".next"),playLeft:n.find(".prev"),pagerItems:n.find("ul li"),items:$e("#ul_ulike_list li"),isLazy:false,showCnt:8})});$e("#mod_recommend_title").text(d.name+" 其他MV");e=$e("#lk_singer_more");e.attr("href","/music/singer/singer_0_0_0_0.html?sort=2&id="+d.singerid+"&dis=0&page=1");e.attr("target","_blank");$e("#mod_singer_more").show();d.mv.length>4&&$e("#mod_recommend_video").addClass("two_line")}txv.coverUtil.initMoreLink();e=txv.playUtil.comm.getCurTitle();txv.playUtil.comm.setWinTitle(e,d.name);txv.playUtil.comm.setH1Title(e+" - "+d.name);txv.playUtil.videoPage.initVideoComment(b||d.name,c)},error:function(){var d=txv.playUtil.comm.getCurTitle();txv.playUtil.comm.setWinTitle(d);txv.playUtil.comm.setH1Title(d);txv.playUtil.videoPage.initVideoComment(b||txv.playUtil.videoPage.dataset.curVideoTitle,c)}});else{a=txv.playUtil.comm.getCurTitle();txv.playUtil.comm.setWinTitle(a);txv.playUtil.comm.setH1Title(a);txv.playUtil.videoPage.loadVideoULike(8);a=txv.playUtil.comm.getHotrankRmdPath();txv.coverUtil.initULike({url:a,size:15,typeid:1,hotRptPrefix:"cover.btn.inmovrecomd",containerId:"ul_rmdhot_list",dotshowModId:"mod_rmdhot_dotshow",pageSize:5});$e("#mod_rmdhot_video").show();txv.playUtil.videoPage.initVideoComment(b||txv.playUtil.videoPage.dataset.curVideoTitle,c)}},initAddToMusicBox:function(a){function b(){txv.playUtil.videoPage.showLike(d,false)}var c=$e("#mod_operate_links");if(isNaN(a)||a<=0){d.unBind("click");c.hide()}else{var d=$e("#lk_add_musicbox");d.bind("click",function(){txv.playUtil.videoPage.handleMvToMusicBox(a)});if(txv.login.isLogin())$j.ajax({url:txv.path.queryMvMusicBox,dataType:"jsonp",data:{mvid:a,uin:txv.login.getUin(),out:1},charset:"GBK",jsonpFunName:"addMvCallback",success:function(e){if(e&&e.code==0)e.flag?txv.playUtil.videoPage.showLike(d,true):b()},error:function(){b()},complete:function(){c.show()}});else{b();c.show()}}},hideMvTipsBox:function(){txv.login.hideMask();$e("#mod_mv_suc").hide()},showMvSuc:function(){var a="",b="";if(txv.playUtil.videoPage.dataset.isAddedToMusicBox){b="成功取消喜欢该MV";a='<a href="http://imgcache.qq.com/music/qzone/musicbox_jump.html?url=music_mv" target="_blank" class="c_txt2 unline">查看所有已标记喜欢的MV</a></p>'}else{a='你还可以到QQ空间将该MV设为空间MV秀。</p><p><a href="http://imgcache.qq.com/music/qzone/musicbox_jump.html?url=music_mv" target="_blank" class="c_txt2 unline">查看所有已标记喜欢的MV</a></p>';b="成功标记为喜欢的MV"}a=new txv.tips("Message",b,a);a.SetType(txv.tips.ConstTipsType.Message);a.FillPage()},showMvFull:function(){var a=new txv.tips("Message","您喜欢的MV超过1000首",'您最多可标记喜欢1000首MV</p><p><a href="http://imgcache.qq.com/music/qzone/musicbox_jump.html?url=music_mv" target="_blank" class="c_txt2 unline">查看所有已标记喜欢的MV</a></p>');a.SetType(txv.tips.ConstTipsType.Warning);a.FillPage()},showLike:function(a,b){a=a||$e("#lk_add_musicbox");a.text(!b?"喜欢":"取消喜欢");a.attr("class",!b?"love":"dis_love");txv.playUtil.videoPage.dataset.isAddedToMusicBox=b},handleMvToMusicBox:function(a){function b(d){d=new txv.tips("Message",txv.playUtil.videoPage.dataset.isAddedToMusicBox?"取消标记喜欢失败":"标记为喜欢失败",d||"");d.SetType(txv.tips.ConstTipsType.Warning);d.FillPage()}if(txv.login.isLogin()){var c={uin:txv.login.getUin(),formsender:1};txv.playUtil.videoPage.dataset.isAddedToMusicBox?Live.object.extend(c,{mvrmid:a}):Live.object.extend(c,{mvid:a});$j.ajax({url:txv.playUtil.videoPage.dataset.isAddedToMusicBox?txv.path.delMvMusicBox:txv.path.addMvMusicBox,type:"post",data:c,success:function(d){if(d)if(typeof d.code!="undefined"&&d.code!=0)if(!txv.playUtil.videoPage.dataset.isAddedToMusicBox&&d.code==6)txv.playUtil.videoPage.showMvFull();else{d.code==7&&txv.playUtil.videoPage.showLike(null,!txv.playUtil.videoPage.dataset.isAddedToMusicBox);b({"1":"您未登录或者登录超时，请登录","2":"参数错误，请重试","3":"您无权执行此操作","4":"您无权执行此操作","5":"系统繁忙请稍后再试","6":"您收藏的MV超过最大收藏数量","7":"您已收藏了该MV，无需重复标记","8":"此MV已经下架，您无法标记为喜欢"}[d.code]||""||"操作失败，请重试")}else{txv.playUtil.videoPage.showMvSuc();txv.playUtil.videoPage.showLike(null,!txv.playUtil.videoPage.dataset.isAddedToMusicBox)}else b("")},error:function(){b()}})}else txv.login.openLogin()},showVideoViewNum:function(a){function b(c){if(!/^(\+|-)?(\d+)(\.\d+)?$/.test(c))return c;c=RegExp.$1;for(var d=RegExp.$2,e=RegExp.$3,h=/(\d)(\d{3})(,|$)/;h.test(d);)d=d.replace(h,"$1,$2$3");return c+""+d+""+e}a&&$j.ajax({url:txv.path.videoViewNum,dataType:"jsonp",data:{vid:a},success:function(c){if(c.num){var d=$e("#mod_videoviewnum");d.text("播放量："+b(c.num)+" 次");d.show()}}})}}};Live.txv.playpg={coverPage:{initCoverPage:function(){if(txv.login.isLogin()&&txv.login.getUin()%2==1){var a=txv.playUtil.conf.relateCover||"",b=txv.playUtil.comm.getUrlVid();if(a&&a.length==15)window.location.href=txv.common.getFullUrlPath(txv.common.getPlayUrl(a,b||""))}txv.playUtil.mainData.mainTitle=txv.playUtil.conf.coverTitle;txv.playUtil.comm.saveDefaultTitle(txv.playUtil.conf.isSerial?"":txv.playUtil.conf.coverTitle);a=urlVid=txv.playUtil.comm.getUrlVid();txv.playUtil.comm.setWinTitle(txv.playUtil.conf.coverTitle,a?$e("#"+a).text():"");txv.log("txv.playUtil.comm.getJumpSession()="+txv.playUtil.comm.getJumpSession());(b=txv.playUtil.comm.getJumpSession()==urlVid)&&txv.playUtil.comm.delJumpSession();var c="";c=b&&!(txv.playUtil.conf.coverType in[1,2,3,98])?"/video/play/"+urlVid+".html":"/cover/"+txv.playUtil.conf.coverid.charAt(0)+"/"+txv.playUtil.conf.coverid+"/"+(urlVid?urlVid:"index")+".html";Live.tj2.pv({virtualURL:c});if(txv.playUtil.conf.tplType==txv.playUtil.TPL_TYPE.WHITE){txv.playUtil.comm.initSideBar();urlVid&&txv.playUtil.comm.getVideoList().size()>0&&txv.playUtil.comm.showSideBar()}$e("#mod_player").show();b=$e("#em_cover_title");b.text(Live.string.cut(b.text(),24,"..."));b=txv.common.getUrlParam("start");c=txv.playUtil.conf.duration;a=a||txv.playUtil.conf.vid||$e("#"+txv.playUtil.conf.listModId+" a:eq(0)").attr("id");txv.playUtil.paramObj=new txv.VideoInfo;txv.playUtil.paramObj.setVid(a);txv.playUtil.paramObj.historyStart=parseInt(b)||0;txv.playUtil.comm.setPiantouPianwei();if(a.indexOf("|")<0&&txv.playUtil.conf.vid.indexOf(a)<0){txv.playUtil.paramObj.getValFromEl($e("#"+a));txv.playUtil.comm.resetparamObjByTagId()}else{if(txv.playUtil.conf.vid.indexOf(a)>=0)txv.playUtil.paramObj.vidlist=txv.playUtil.conf.vid;txv.playUtil.paramObj.duration=c}a=txv.playUtil.conf.coverType==1||txv.playUtil.conf.coverType==98?930:600;if(txv.playUtil.comm.useHtml5()){txv.playUtil.comm.setHtml5Cookie();txv.playUtil.flashplayer=new txv.Html5Player(txv.playUtil.conf.playerWidth||a,txv.playUtil.conf.playerHeight||496)}else{txv.playUtil.flashplayer=new txv.FlashPlayer(txv.playUtil.conf.playerWidth||a,496);for(var d in txv.playUtil.conf.flashvars)txv.playUtil.flashplayer.addConf(d,txv.playUtil.conf.flashvars[d])}txv.playUtil.flashplayer.setCurVideo(txv.playUtil.paramObj);txv.playUtil.flashplayer.addConf("cid",txv.playUtil.conf.coverid);txv.playUtil.flashplayer.addConf("tpid",txv.playUtil.conf.coverType);txv.playUtil.flashplayer.getNextVideoObj=txv.playUtil.comm.getNextVideoObj;txv.playUtil.flashplayer.callback=txv.playUtil.conf.tplType==txv.playUtil.TPL_TYPE.BLACK?txv.playpg.coverPage.onBlackPlayStart:txv.playpg.coverPage.onNewsPlayStart;txv.playUtil.flashplayer.onAllEnd=function(){try{var e=txv.playUtil.flashplayer.getFlashPlayer();e&&e.setLightStatus(false);_qqplayer_lightup(true)}catch(h){}};txv.playUtil.flashplayer.write(txv.playUtil.conf.playerModId);txv.playUtil.comm.initVideoList();d=$e("#"+txv.playUtil.paramObj.getFullVid());if(txv.playUtil.conf.isVideoUnion){a=$e("#btn_play_cover");a.show();a.bind("click",function(){if(!$e(this).hasClass("disabled")){txv.playUtil.paramObj.clear();txv.playUtil.paramObj.setVid(txv.playUtil.conf.vid);txv.playUtil.paramObj.duration=txv.playUtil.conf.duration;txv.playUtil.comm.changeVideo(txv.playUtil.paramObj)}});txv.playUtil.comm.getVideoList().index(d)>=0?txv.playUtil.varietyPage.enablePlayAll():txv.playUtil.varietyPage.disablePlayAll()}else txv.playUtil.varietyPage.hidePlayAll()},initVarietyHistory:function(){var a=$e("#variety_year_tab li").size(),b="{for item in items}";b+='\t<li><a href="${item.coverid|getPlayUrl}" target="${target}"><span class="c_txt1">${item.date}</span>{if item.sectitle.length>0}${item.sectitle}{else}${item.title} ${item.date}期{/if}<span class="c_txt1">${item.actor}</span></a></li>';b+="{/for}";for(var c=0;c<a;c++){txv.playUtil.mainData.monthTab[c]=new Live.TabShow;txv.playUtil.mainData.monthTab[c].init({tabItems:$e(".variety_month_list:eq("+c+") a"),contentItems:$e("#review_list"),tabShowCss:"current",mouseEvt:"click",getType:"script",defaultIndex:-1,callback:function(d){_column_json.target=typeof txv.common!=undefined&&txv.common.isWebqq()?"_self":"_blank";txv.template.fillHtml(_column_json,b,d.attr("id"),true,null,txv.template.FILL_TYPE.TPL_STR,function(){var e=d.find("a");e.unBind("click");e.bind("click",function(){Live.tj2.button("COVER.PERIOD.ITEMS")})})}})}txv.playUtil.mainData.yearTab=new Live.TabShow;txv.playUtil.mainData.yearTab.init({tabItems:$e("#variety_year_tab li"),contentItems:$e(".variety_month_list"),tabShowCss:"current",mouseEvt:"click",afterShowContent:function(d,e,h){txv.playUtil.mainData.monthTab&&txv.playUtil.mainData.monthTab[h].change(0)}});$e("#variety_year_tab li").bind("click",function(){Live.tj2.button("COVER.PERIOD.YEAR")});$e(".variety_month_list a").bind("click",function(){Live.tj2.button("COVER.PERIOD.MONTH")})},onBlackPlayStart:function(){txv.log("[onBlackPlayStart]:vid="+txv.playUtil.paramObj.vid);$e("#"+txv.playUtil.conf.listModId+" li.current").removeClass("current");var a=$e("#"+txv.playUtil.paramObj.vid);a.getParent().addClass("current");var b=txv.playUtil.comm.getVideoList().index($e("#"+txv.playUtil.paramObj.vid));txv.coverUtil.videoListTab.show(Math.floor(b/txv.playUtil.conf.videoTabSize));var c=a=b="";if(txv.playUtil.comm.getVideoList().size()>0){a=$e("#"+txv.playUtil.paramObj.getFullVid());b=txv.common.getPlayUrl(txv.playUtil.conf.coverid,txv.playUtil.paramObj.getFullVid());c=a.text();if(txv.playUtil.conf.videoReName){a=c.length>0?a.text():"";txv.playUtil.comm.setH1Title(txv.playUtil.conf.coverTitle+" "+a);txv.playUtil.comm.setWinTitle(txv.playUtil.conf.coverTitle,a);c=txv.playUtil.conf.coverTitle+" "+a}else{c=a=c;txv.playUtil.comm.setH1Title(a);txv.playUtil.comm.setWinTitle(a)}}else{b=txv.common.getPlayUrl(txv.playUtil.conf.coverid);c=a=txv.playUtil.conf.coverTitle;txv.playUtil.comm.setH1Title(txv.playUtil.comm.getDefaultTitle());txv.playUtil.comm.setWinTitle(txv.playUtil.comm.getDefaultTitle())}txv.playUtil.comm.setCurTitle(a);txv.log("[setCurVideo]:key="+txv.playUtil.conf.coverid+",tit="+c+",lnk="+b);txv.history.setCurVideo({key:txv.playUtil.conf.coverid,tit:c,lnk:b})},onNewsPlayStart:function(a){txv.playUtil.comm.onWhitePlayerStart(a,function(b){var c=$e("#"+b.getFullVid());if(txv.playUtil.comm.getVideoList().size()>0){txv.common.getPlayUrl(txv.playUtil.conf.coverid,b.getFullVid());_title=txv.playUtil.conf.coverTitle+" "+c.text()}else{txv.common.getPlayUrl(txv.playUtil.conf.coverid);_title=txv.playUtil.conf.coverTitle}if(txv.playUtil.comm.getVideoList().index(c)>=0&&c.attr("ut")){var d=c.attr("tags"),e=[];if(d.length>0)e=d.split("+");d={video:{uptime:c.attr("ut")||"",tag:e,source:c.attr("source")||""}};Live.object.extend(d.video,b);if(b.idx>0)d.video.duration=b.tagDur;d.video.title=txv.common.formatVideoTitle(c.text());d.video.ftitle=Live.string.cut(d.video.title,24,"...");txv.template.fillHtml(d,"tpl_singler_video_mod_info","mod_videoinfo");$e("#mod_videoinfo").show()}else $e("#mod_videoinfo").hide();if(txv.playUtil.conf.isVideoUnion)b.vidlist==txv.playUtil.conf.vid&&b.idx==0?txv.playUtil.varietyPage.disablePlayAll():txv.playUtil.varietyPage.enablePlayAll()})}},videoPage:{dataset:{isMusic:false,isAjaxSuc:false,isInitPlayer:false},initPlayer:function(){if(!txv.playpg.videoPage.dataset.isInitPlayer){txv.playpg.videoPage.dataset.isInitPlayer=true;if(!txv.playpg.videoPage.dataset.isAjaxSuc&&txv.playUtil.conf.playerWidth!=930)if(document.referrer.indexOf(window.location.host+"/music/")>=0)txv.playUtil.conf.playerWidth=930;if(txv.playUtil.comm.useHtml5())txv.playUtil.flashplayer=new txv.Html5Player(txv.playUtil.conf.playerWidth||600,txv.playUtil.conf.playerHeight||496);else{txv.playUtil.flashplayer=new txv.FlashPlayer(txv.playUtil.conf.playerWidth||600,txv.playUtil.conf.playerHeight||496);for(var a in txv.playUtil.conf.flashvars)txv.playUtil.flashplayer.addConf(a,txv.playUtil.conf.flashvars[a])}txv.playUtil.flashplayer.callback=txv.playUtil.videoPage.onVideoPlayStart;txv.playUtil.flashplayer.getNextVideoObj=txv.playUtil.comm.getNextVideoObj;txv.playUtil.flashplayer.onAllEnd=function(){try{var b=txv.playUtil.flashplayer.getFlashPlayer();b&&b.setLightStatus(false);_qqplayer_lightup(true)}catch(c){}};txv.playUtil.flashplayer.setCurVideo(txv.playUtil.paramObj)}},onVideoInfoSuccess:function(a,b){if(a&&a.result&&a.result.code=="-200")window.location.href="/error.html";if(b&&b.cover&&typeof b.cover.id=="string"&&b.cover.id.length==15){var c=txv.common.getPlayUrl(b.cover.id,txv.playUtil.paramObj.getFullVid());txv.playUtil.comm.setJumpSession(txv.playUtil.paramObj.getFullVid());window.location.href=c}else if(!a||!a.video)txv.playUtil.videoPage.onVideoInfoErr();else{if(a.singer&&a.singer.id){txv.playpg.videoPage.dataset.isMusic=true;$e("#"+txv.playUtil.conf.modInner).attr("class","mod_player_full");txv.playUtil.conf.playerWidth=930;txv.score.init({coverid:txv.playUtil.conf.vid});$e("#mod_grade").show()}txv.playpg.videoPage.initPlayer();txv.playUtil.paramObj.tagDur=""+a.video.duration;txv.playUtil.paramObj.duration=a.sv&&a.sv.duration?""+a.sv.duration:"";txv.playUtil.paramObj.tagStart=a.video.bt||0;txv.playUtil.paramObj.vidlist=txv.playUtil.paramObj.vid;txv.playUtil.flashplayer.addConf("tpid",a.video.ctypeid||0);txv.playUtil.flashplayer.setCurVideo(txv.playUtil.paramObj);txv.coverUtil.initShareToQzone(txv.playUtil.conf,txv.playUtil.paramObj);a.video.title=txv.common.formatVideoTitle(a.video.title);c=a.video.title;var d=txv.coverUtil.getClassChsName(a.video.ctypeid),e=a.video.ctypeid==100?"/open.html":"/"+txv.coverUtil.getClassEn(a.video.ctypeid)+"/index.html";if(d&&e){d=[{href:e,text:d}];!!a.video.columnid>0&&a.video.columnname&&d.push({href:["/",txv.coverUtil.getClassEn(a.video.ctypeid),"/type/",a.video.ctypeid,"_",a.video.columnid,".html"].join(""),text:a.video.columnname});txv.playUtil.comm.setBread(d);txv.playUtil.comm.initBreadHOTReport("play")}txv.playUtil.comm.setCurTitle(c);txv.playUtil.comm.saveDefaultTitle(c);txv.playUtil.videoPage.dataset.curVideoTitle=c;a.video.timename=a.video.ctypeid==22?"日":"期";if(a.video.ctypeid)a.video.ctypeen=txv.coverUtil.getClassEn(a.video.ctypeid);txv.template.fillHtml(a,"tpl_singler_video_mod_info","mod_videoinfo",true,null,txv.template.FILL_TYPE.TPL_ID,function(){txv.playUtil.videoPage.showVideoViewNum(txv.playUtil.conf.vid)});txv.playUtil.mainData.mainTitle=txv.playUtil.paramObj.idx>0&&a.sv?txv.common.formatVideoTitle(a.sv.title):c;txv.playUtil.videoPage.dataset.mainVideoTitle=txv.playUtil.mainData.mainTitle;txv.playUtil.videoPage.showNewsHotrank(a.video.ctypeid);c="";d=true;if(a.video&&a.video.comm){c=a.video.comm.topic||"";d=!!a.video.comm.show}txv.playUtil.videoPage.initSingerAndWeibo(a.singer?a.singer.id:0,c,d);a.mvid&&txv.playUtil.videoPage.initAddToMusicBox(a.mvid)}},onTagInfoSuccess:function(a){if(a)if(a.cover&&typeof a.cover.id=="string"&&a.cover.id.length==15){a=txv.common.getPlayUrl(a.cover.id,txv.playUtil.paramObj.getFullVid());txv.playUtil.comm.setJumpSession(txv.playUtil.paramObj.getFullVid());window.location.href=a}else{Live.tj2.pv({virtualURL:"/video/play/"+txv.playUtil.conf.vid+".html"});txv.playUtil.comm.showPlayer();a.listtype=0;if(a.tags&&a.tags.length>0){for(var b=0;b<a.tags.length;b++)a.tags[b].tagid=txv.VideoInfo.getFullVid(a.tags[b].id,a.tags[b].idx);a.listtype=1}else if(a.clips&&a.clips.length>0)a.listtype=2;if(a.listtype>0){$e("#mod_video_list_section").show();txv.template.fillHtml(a,"tpl_mod_videolist","mod_videolist_container",true,null,txv.template.FILL_TYPE.TPL_ID,txv.playUtil.videoPage.initVideoList);txv.playUtil.comm.showSideBar();if(a.cover&&a.cover.tt)txv.playUtil.videoPage.dataset.coverTitle=txv.common.formatVideoTitle(a.cover.tt);if(txv.playUtil.paramObj.idx>0&&a.cover&&a.cover.id&&a.cover.id.length==15){$e("#btn_play_cover").show();$e("#btn_play_cover").bind("click",function(){txv.playUtil.paramObj.clear();txv.playUtil.paramObj.vidlist=txv.playUtil.paramObj.vid;txv.playUtil.comm.changeVideo(txv.playUtil.paramObj)})}}else txv.playUtil.comm.hideSideBar()}else{txv.playUtil.comm.setH1Title(txv.playUtil.mainData.curTitle);txv.playUtil.comm.showPlayer()}},initVideoPage:function(){var a=txv.playUtil.comm.getUrlVid(),b=txv.common.getUrlParam("start");if(a){txv.playUtil.conf.vid=a;txv.playUtil.paramObj=new txv.VideoInfo;txv.playUtil.paramObj.setVid(a);txv.playUtil.paramObj.historyStart=parseInt(b)||0;txv.coverUtil.initShareToTwitter(txv.playUtil.conf,txv.playUtil.paramObj,txv.playUtil.mainData.curTitle);txv.playUtil.comm.initSideBar();setTimeout(txv.playpg.videoPage.initPlayer,5E3);$j.ajaxQueue({urls:[{name:"videoinfo",url:txv.path.videoInfo,dataType:"jsonp",data:{vid:txv.playUtil.paramObj.vid,idx:txv.playUtil.paramObj.idx}},{name:"taginfo",url:txv.path.videoTagInfo,dataType:"jsonp",data:{vid:txv.playUtil.paramObj.vid,idx:txv.playUtil.paramObj.idx,sz:100}}],success:function(c){txv.playpg.videoPage.dataset.isAjaxSuc=true;txv.playpg.videoPage.onVideoInfoSuccess(c.videoinfo||null,c.taginfo);txv.playpg.videoPage.onTagInfoSuccess(c.taginfo||null);$e("#span_source").text(txv.playUtil.videoPage.dataset.coverTitle||txv.playUtil.videoPage.dataset.mainVideoTitle)},error:function(c){txv.playpg.videoPage.initPlayer();if(c=="videoinfo")txv.playUtil.videoPage.onVideoInfoErr();if(c=="taginfo"){txv.playUtil.comm.hideSideBar();txv.playUtil.comm.showPlayer()}},complete:function(){txv.playpg.videoPage.initPlayer();$e("#"+txv.playUtil.conf.playerModId).show()}})}else txv.log("vid="+a+" ,not valid")}},initPlayPage:function(a){Live.object.extend(txv.playUtil.conf,a);if(txv.playUtil.conf.pageType==txv.playUtil.PAGE_TYPE.COVER){txv.log("ready to init cover page");txv.playpg.coverPage.initCoverPage()}else{txv.log("ready to init video page");txv.playpg.videoPage.initVideoPage()}},init:function(a){txv.playpg.initPlayPage(a)}};/*  |xGv00|1a5ddf0fb91e1b559f80de078c4579d9 */
define("commonUtil",[],function(){function t(t){if(t){if(/^\d{2}:\d{2}$/.test(t))return t;var e="02:00";if(t.length<5){var n=Math.floor(parseInt(t)/60);n<10&&(n="0"+n);var i=parseInt(t)%60;return i<10&&(i="0"+i),e=n+":"+i}var o=t.split(":");return e=o[1]+":"+o[2]}return"02:00"}function e(t){if(t){if(t>1e4){var e=parseInt(t/1e4)+"\u4e07";return e}return t}return"10\u4e07"}return{durationFormat:t,viewTimesformat:e}}),define("dataCtrl",["jquery","promise","commonUtil"],function(t,e,n){var i=function(e,n,i,o){t.ajax({type:"get",async:!0,url:e,dataType:"jsonp",success:function(t){n(t)},error:function(t,e,n){i()}})},o=function(o){var a="http://data.video.qq.com/fcgi-bin/data?tid=352&appid=10001009&appkey=c5a3e1529a7ba805&otype=json&idlist="+o.id;return new e(function(e,s){i(a,function(i){t.each(i.results[0].fields.videos,function(t,e){e.c_tl=n.durationFormat(e.c_tl),e.allnumc=n.viewTimesformat(e.allnumc)}),o.detail=i,e(o)},function(t){console.log(t)})})},a=function(n,a,s,r){var c="http://list.video.qq.com/fcgi-bin/list_common_cgi?otype=json&platform=1&version=10000&intfname=web_column_nba&c_column_id="+n+"&c_checkup_time_year="+a+"&c_checkup_time_month="+(s-0)+"&type=4&playright=2&sort=3&offset=0&tid=374&uappid=10001009&uappkey=c5a3e1529a7ba805";i(c,function(n){var i=[];n.total?(t.each(n.jsonvalue.results,function(t,e){i.push(o(e))}),e.all(i).then(function(t){r(t)})):r(null)},function(t){console.log(t)})},s=function(t,e){var n="http://sns.video.qq.com/fcgi-bin/video_comment_id?vid="+t+"&op=1&otype=json";i(n,function(t){e(t)},function(t){})};return{getVideoList:a,getCommentIdByVid:s}}),!function(){function t(t,e){return(/string|function/.test(typeof e)?r:s)(t,e)}function e(t,n){return"string"!=typeof t&&(n=typeof t,"number"===n?t+="":t="function"===n?e(t.call(t)):""),t}function n(t){return p[t]}function i(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,n)}function o(t,e){if(d(t))for(var n=0,i=t.length;n<i;n++)e.call(t,t[n],n,t);else for(n in t)e.call(t,t[n],n)}function a(t,e){var n=/(\/)[^\/]+\1\.\.\1/,i=("./"+t).replace(/[^\/]+$/,""),o=i+e;for(o=o.replace(/\/\.\//g,"/");o.match(n);)o=o.replace(n,"/");return o}function s(e,n){var i=t.get(e)||c({filename:e,name:"Render Error",message:"Template not found"});return n?i(n):i}function r(t,e){if("string"==typeof e){var n=e;e=function(){return new u(n)}}var i=l[t]=function(n){try{return new e(n,t)+""}catch(i){return c(i)()}};return i.prototype=e.prototype=f,i.toString=function(){return e+""},i}function c(t){var e="{Template Error}",n=t.stack||"";if(n)n=n.split("\n").slice(0,2).join("\n");else for(var i in t)n+="<"+i+">\n"+t[i]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+n),e}}var l=t.cache={},u=this.String,p={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},d=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},f=t.utils={$helpers:{},$include:function(t,e,n){return t=a(n,t),s(t,e)},$string:e,$escape:i,$each:o},m=t.helpers=f.$helpers;t.get=function(t){return l[t.replace(/^\.\//,"")]},t.helper=function(t,e){m[t]=e},"function"==typeof define?define("templateModule",[],function(){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("specialList",function(t,e){"use strict";var n=this,i=(n.$helpers,n.$each),o=t.specials,a=(t.val,t.idx,n.$escape),s=(t.video,t.$index,"");return i(o,function(t,e){s+=' <li class="special"> <div class="ct-title"> <span class="yearmonth">',s+=a(t.fields.publish_date.substring(0,8)),s+='</span> <span class="day">',s+=a(t.fields.publish_date.substring(8)),s+='</span> <span class="zhuanji-title"> ',s+=a(t.fields.title),s+='</span> <a class="more" bosszone="VZD_video_more" target="_blank" href="',s+=a(t.fields.url),s+='"> <span>',s+=a(t.detail.results[0].fields.videos.length),s+='</span>\u4e2a\u89c6\u9891 | \u67e5\u770b\u5168\u90e8 <i class="icon"></i> </a> </div> <ul data-cid="',s+=a(t.id),s+='" class="video-list"> ',i(t.detail.results[0].fields.videos,function(t,n){s+=' <li class="video" data-vid="',s+=a(t.c_vid),s+='" data-idx-special="',s+=a(e),s+='" data-idx-video="',s+=a(n),s+='"> <a href="javascript:;" bosszone="VZD_bfq_list"> <img class="pic" src="',s+=a(t.c_pic_160_90),s+='"/> <p class="mengban"> <span class="mengban-time">',s+=a(t.c_tl),s+='</span> <span class="mengban-view"><i class="icon"></i>',s+=a(t.allnumc),s+="</span> </p> <p>",s+=a(t.c_title),s+="</p> </a> </li> "}),s+=" </ul> </li> "}),new u(s)}),t("timeList",function(t,e){"use strict";var n=this,i=(n.$helpers,n.$each),o=t.years,a=(t.year,t.$index,n.$escape),s=(t.month,"");return i(o,function(t,e){s+=' <li class="year"> <a class="btn-year" href="javascript:;">',s+=a(t.year),s+='<i class="icon"></i></a> <ul class="month-list"> ',i(t.months,function(e,n){s+=' <li class="month" data-year=',s+=a(t.year),s+=' data-month="',s+=a(e),s+='">',s+=a(e),s+="\u6708</li> "}),s+=" </ul> </li> "}),new u(s)}),t("videoList",function(t,e){"use strict";var n=this,i=(n.$helpers,n.$each),o=t.videos,a=(t.video,t.$index,n.$escape),s="";return i(o,function(t,e){s+=' <li class="video" data-vid="',s+=a(t.c_vid),s+='" data-idx-video="',s+=a(e),s+='" bosszone="VZD_bfq_list"> <a href="javascript:;" bosszone="VZD_bfq_list"> <img class="pic" src="',s+=a(t.c_pic_160_90),s+='"/> <p class="mengban"> <span class="mengban-time">',s+=a(t.c_tl),s+='</span> <span class="mengban-view"><i class="icon"></i>',s+=a(t.allnumc),s+="</span> </p> <p>",s+=a(t.c_title),s+="</p> </a> </li> "}),new u(s)})}(),define("ButtonBar",["jquery"],function(t){var e=function(e,n){this.btns=t(e).find(n.btn||".btn"),this.selectIndex=n.selectIndex||0,this.selectedClass=n.selectedClass||"on",this.change=n.change,this._init()};return e.prototype._init=function(){var e=this;this.selectIndex>=0&&(this.curBtn=t(this.btns[this.selectIndex]),this.curBtn.addClass(this.selectedClass),this._triggerChange()),this.btns.click(function(n){e.curBtn=t(this);var i=e.btns.index(this);e.setSelectIndex(i)})},e.prototype._triggerChange=function(){this.change&&this.change(this.selectIndex,this.curBtn)},e.prototype.setSelectIndex=function(e,n){e==-1&&(this.curBtn.removeClass(this.selectedClass),this.selectIndex=-1),this.selectIndex!=e&&(this.btns.removeClass(this.selectedClass),t(this.btns[e]).addClass(this.selectedClass),this.selectIndex=e,(n||"undefined"==typeof n)&&this._triggerChange())},e}),define("timeCtrl",["jquery","moment","templateModule","ButtonBar"],function(t,e,n,i){var o,a,s=t("#ls-year"),r=function(o){for(var r=2015,c=10,l=[],u=e(),p=e().year(),d=e().month()+1,f=p;f>=r;f--){var m={};m.year=f;var u=1;if(f==p)for(m.months=[];d>=u;)m.months.push(u++);else if(f==r){m.months=[];for(var h=12;h>=c;)m.months.push(c++)}else m.months=[1,2,3,4,5,6,7,8,9,10,11,12];l.push(m)}s.html(n("timeList",{years:l})),new i(s,{btn:".btn-year",selectIndex:0,change:function(e,n){s.find(".year").removeClass("current"),t(n).parent().addClass("current")}}),a=new i(s,{btn:".month",selectIndex:-1,change:function(e,n){var i=t(n),a=i.attr("data-year"),s=i.attr("data-month")>9?i.attr("data-month"):"0"+i.attr("data-month");o(a,s)}}),s.find(".current .month").last().trigger("click")},c=function(){return o},l=function(){a.setSelectIndex(-1)};return{init:r,clearSelect:l,getValue:c}}),define("requirePromise",[],function(){"use strict";var t;return t=function(t){return!(!t||"object"!=typeof t)&&(!!(window.Promise&&t instanceof Promise)||"function"==typeof t.then)},{load:function(e,n,i){n([e],function(e){var n,o,a;n=function(){i.error.apply(null,arguments)},o=function(){i.apply(null,arguments)},t(e)?(a=e.done||e.then,"function"==typeof e.fail?(a.call(e,o),e.fail(n)):a.call(e,o,n)):i(e)})}}}),define("login",["jquery","promise"],function(t,e){return new e(function(e,n){t&&t.ajax({url:"//mat1.gtimg.com/sports/kbsweb2/scripts/sports-web-api.js",dataType:"script",scriptCharset:"utf-8"}).done(function(){var n=window.sportsWebApi;if(n){var i=t(".login"),o=i.find(".avatar"),a=i.find(".sports-vip-status");if(!(i.length<=0)){var s={login:[],logout:[]},r=n.isLogin,c=n.userLogout,l=n.getLoginType,u=n.getUserInfo,p=function(i,o){i=i||t.noop,o=o||t.noop,t.ajax({url:"http://matchweb.sports.qq.com/vip/status2",dataType:"jsonp"}).done(function(a){a&&a[1]?(t.ajax({url:"//matchweb.sports.qq.com/guess/tcBalance",dataType:"jsonp"}).done(function(t){t&&0===t.code||(t.data={kb:null}),i(a[1],t.data)}),e({isSportVip:"1"===a[1].vip,on:function(t,e){t&&"function"==typeof e&&s[t]&&s[t].push(e)},isLogin:r,userLogin:n.userLogin,getUserInfo:n.getUserInfo,getLoginMethod:l})):o()})},d=function(t,e){var n=function(t,n,i){o.html(function(){var e="";return e+="<img src='"+t.avatar+"' alt='\u5934\u50cf' onclick='window.open(\"//sports.qq.com/kbsweb/mycenter.htm#myWallet\")'>",e+="0"!==n.vip?'<i class="vipmark-ty">VIP</i>':"",e+='<div class="bubble"><div class="inner" bosszone="SY_Toploginrk">',e+="0"!==n.vip?'<div class="plaintext">\u60a8\u597d\uff01\u5c0a\u8d35\u7684\u4f53\u80b2\u4f1a\u5458</div>':"",e+='  <div class="nickname">',e+=i.kb?'<a class="kb" href="__mycenter__#myWallet" target="_blank" title="\u70b9\u51fb\u67e5\u770b\u6211\u7684K\u5e01">'+(i.kb||"0")+"</a>":"",e+='  <div class="name">'+("0"===n.vip?"\u60a8\u597d\uff01":"")+t.nick+"</div>",e+="  </div>",e+="0"===n.vip?'<a class="getvip" href="http://sports.qq.com/vip/" target="_blank" bosszone="SY_Toploginhyin">\u9a6c\u4e0a\u5f00\u901a\u4f1a\u5458</a>':"",e+="  <hr>",e+='  <div class="links">',e+='  <a href="__mycenter__#message"   target="_blank">\u7cfb\u7edf\u6d88\u606f</a>',e+='  <a href="__mycenter__#reminder"  target="_blank">\u8d5b\u4e8b\u63d0\u9192</a>',e+='  <a href="__mycenter__#community" target="_blank">\u6211\u7684\u793e\u533a</a>',e+='  <a href="__mycenter__#myWallet"  target="_blank">\u6211\u7684\u94b1\u5305</a>',e+='  <a href="__mycenter__#vip"     target="_blank">\u4f53\u80b2\u4f1a\u5458</a>',e+='  <a href="__mycenter__#myQuiz"  target="_blank">\u6211\u7684\u7ade\u731c</a>',e+="  <hr>",e+='  <a class="logout" href="javascript:" target="_self">\u9000\u51fa\u767b\u5f55</a>',e+="  </div>",e+='</div><i class="arrow"></i></div>',e=e.replace(/__mycenter__/g,"//sports.qq.com/kbsweb/mycenter.htm")}),"0"!==n.vip&&a.text("\u4f53\u80b2\u4f1a\u5458"),e&&e()};t?p(function(e,i){n(t,e,i)}):u(function(t){p(function(e,i){n(t,e,i)})})};o.on("click",function(t){r(function(e){e||(n.userLogin(),t.preventDefault())})}),o.on("click",".bubble a.logout",function(t){t.preventDefault(),t.stopPropagation(),c()});var f=n.onLoginSuccess,m=n.onLoginOut;n.onLoginSuccess=function(e){f&&f(),d(e,t.noop),t.each(s.login,function(t,e){e()})},n.onLoginOut=function(){m&&m(),o.html("\u767b\u5f55"),a.html("\u5f00\u901a\u4f1a\u5458"),t.each(s.logout,function(t,e){e()})};var h=function(){o.html("\u767b\u5f55"),n.isLogin(function(t){t||e({isSportVip:!1,on:function(t,e){t&&"function"==typeof e&&s[t]&&s[t].push(e)},isLogin:r,userLogin:n.userLogin,getUserInfo:n.getUserInfo,getLoginMethod:l})})};h()}}})})}),define("player",["jquery","txplayer","promise","requirePromise!login"],function(t,e,n,i){function o(e,n,i){if(0==t("#sports_video_Vip").size()){var o="<div id='sports_video_Vip'><a id='btn-close'>\u2715</a><div id='ct-desc'><p id='title'>\u672c\u7279\u6743\u4e3a\u817e\u8baf\u4f53\u80b2\u4f1a\u5458\u4e13\u4eab</p><a id='btn-vip' href='http://vip.sports.qq.com/' target='_blank'></a><p style='margin: 30px 0 5px;font-size: 15px;'>\u817e\u8baf\u4f53\u80b2\u4f1a\u5458\u7279\u6743</p><p>NBA\u3001NHL\u7b49\u8d5b\u4e8b\u72ec\u5bb6\u76f4\u64ad</p><p>\u4eab\u53d7\u514d\u5e7f\u544a\u3001\u84dd\u5149\u753b\u8d28\u3001\u82f1\u6587\u539f\u97f3</p><p>\u70b9\u51fb\u201c\u5f00\u901a\u201d\u4e86\u89e3\u66f4\u591a\u7279\u6743\uff0c\u5f00\u901a\u540e\u8bf7\u5237\u65b0\u672c\u9875</p></div><div id='ct-qr-code'><p style='color:#fff;font-size: 12px;'>\u626b\u4e00\u626b\u5f00\u901a\u4f53\u80b2\u4f1a\u5458</p></div></div>";i.append(o),t("#sports_video_Vip #btn-close").click(function(){"ad"==n&&e.trigger("1080pVipGuideClose",{action:"closeSkipAd"}),"1080p"==n&&e.trigger("1080pVipGuideClose",{action:"close1080p"}),t("#sports_video_Vip").hide()})}t("#sports_video_Vip").show()}function a(e,o,a){return new n(function(n,a){t("#sports_video_Vip").hide(),r=t("#"+o),s?(s.play(e),n(s)):(c.vid=e,c.containerId=o,i.isLogin(function(t){t?c.getUserType=function(){return i.isSportVip?10:1}:c.getUserType=function(){return 0},s=new Txplayer(c),n(s)}))})}var s,r;window.__tenplay_skipad=function(){return o(s,"ad",r),1},window.__tenvideo_1080ppriv=function(){return o(s,"1080p",r),1};var c={useFlashVIPLayer:-1,width:"100%",height:"100%",videoType:"vod",volume:0,autoplay:!0,chid:8,authfrom:"40001",flashWmode:"transparent"};return{play:a}}),define("comment",["jquery","jscookie","requirePromise!login"],function(t,e,n){function i(){if("qq"==n.getLoginMethod())t("#tip-wx-comment").hide(),n.getUserInfo(function(t){a=e.get("uin"),s=t.nick,r=t.avatar,window.registerCoralEvent.publicLogined(a,s,r)});else{try{window.registerCoralEvent.publicLogout()}catch(i){}t("#tip-wx-comment").show()}}try{document.domain="qq.com"}catch(o){}window.registerCoralEvent={listHiden:0,ownStyle:"http://imgcache.gtimg.cn/tencentvideo_v1/vstyle/web/v3/style/niuping/np_vstyle.css?max_age=86400&v=20140113",commentLink:0,loginEvent:function(){n.userLogin()},publicLogined:function(t,e,n){document.getElementById("commentIframe").contentWindow.publicLogined(t,e,n)},publicLogout:function(){document.getElementById("commentIframe").contentWindow.publicLogout()}},t.getScript("http://mat1.gtimg.com/www/coral3.0/js/coral.js");var a,s,r,c=function(e){window.cmt_id=e,t("#commentIframe").attr("src",t("#commentIframe").attr("src")),t("#commentIframe").on("load",function(){window.registerCoralEvent.publicLogined(a,s,r)})};return n.isLogin(function(t){t&&i()}),n.on("login",i),n.on("logout",window.registerCoralEvent.publicLogout),{refresh:c}}),define("specialPlayer",["jquery","templateModule","player","comment","dataCtrl"],function(t,e,n,i,o){var a,s=t("#ls-video"),r=function(t){a=t,s.html(e("videoList",t.results[0].fields))},c=function(t){var e=a.results[0].fields.videos[t].c_vid;e&&(n.play(e,"big-player").then(function(e){e.off("playStateChange").on("playStateChange",function(e){0==e.state&&c(++t)})}),s.find(".video").removeClass("select").eq(t).addClass("select"),o.getCommentIdByVid(e,function(t){i.refresh(t.comment_id)}))};s.on("click",".video",function(e){c(t(this).attr("data-idx-video"))});var l=!1,u=!1;return t(window).scroll(function(){var e=document.documentElement.scrollTop||document.body.scrollTop;e>700&&!l&&!u?t(".mod_player").addClass("mod_player_float"):t(".mod_player").removeClass("mod_player_float")}),t(".small-head .close").on("click",function(){l=!0,t(".mod_player").removeClass("mod_player_float")}),t(".small-head .nomore").on("click",function(){l?(t(this).find("i").css("background-position","0 0"),l=!1):(t(this).find("i").css("background-position","-20px 0"),l=!0)}),{refresh:r,play:c}}),define("specialList",["jquery","templateModule","specialPlayer"],function(t,e,n){function i(t,e){l!=t?(l=t,c=e,n.refresh(o[t].detail),n.play(e)):c!=e&&(c=e,n.play(e))}var o,a=t("#ls-special"),s=t("#tip-noresult"),r=function(t){o=t,t?(s.hide(),a.html(e("specialList",{specials:t})),c=-1,l=-1,a.find(".video").first().trigger("click")):(a.empty(),s.show())};a.on("click",".video",function(){var e=t(this).attr("data-idx-special"),n=t(this).attr("data-idx-video");i(e,n)});var c,l;return{refresh:r}}),require.config(requireConfig),require(["jquery","dataCtrl","timeCtrl","moment","specialList"],function(t,e,n,i,o){var a=new Date;t("#txt-day").html(a.getDate()>9?a.getDate():"0"+a.getDate()),t("#txt-year").html(a.getFullYear()),t("#txt-month").html(a.getMonth()+1>9?a.getMonth()+1:"0"+(a.getMonth()+1));var s=!0,r=function(t,n,o){e.getVideoList(itype,t,n,function(e){if(e)o(e);else{var a=i(t+"-"+n+"-01").subtract(1,"month");console.log(a),r(a.year(),a.month()+1,o)}})};n.init(function(t,n){s?r(t,n,function(t){s=!1,o.refresh(t)}):e.getVideoList(itype,t,n,function(t){o.refresh(t)})})}),define("index",function(){});
//# sourceMappingURL=index-f47a432596.js.map
/*  |xGv00|69de12eb218ec4fb7d6ebe22c4da8ed0 */
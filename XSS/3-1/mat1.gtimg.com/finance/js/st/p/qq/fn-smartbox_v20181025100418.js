__.BasicModule.register("select","2.0",["lang","dom","selector","event","cookie","widget"],function(){var c,d;__.widget.Select=function(a,b){this._initCfg(b);this.id=a;this.listDisplaying=false;this.values={};this.value=this._config.defaultValue;this.lastActiveItem=null;if(!b.name){this._config.name=a+"_select"}this._createEls();this._initEls();this._addEvents()};__.inherits(__.widget.Select,__.widget.Base);c=__.widget.Select;d="du-select-";c.prototype._cfg={txt:{wrongValue:"the value to be set is wrong"},cls:{container:d+"ctn",icon:d+"icon",value:d+"value",list:d+"list",item:d+"item",active:d+"active",input:d+"input"},status:{},defInstCfg:{width:45,height:20,lineHeight:13,borderColor:"#d0cece",bgColor:"#fff",items:{1:"item 1",2:"item 2"},zIndex:100,defaultValue:1,ctnZindex:1,fontsize:13,bgSrc:"//mat1.gtimg.com/finance/stock/qq_panel/qq_bg2.gif",bgNormal:"-33px -64px",bgActive:"-63px 0",onChange:function(a,b){}}};c.prototype._error=function(a){throw new Error("du-select: "+a)};c.prototype._initCfg=function(b){var f,a=0;b=b||{};this._config=__.lang.clone(this._cfg.defInstCfg);f=this._config;__.each(b,function(e,h){f[h]=e},true);if(__.lang.isUndefined(b.width)){__.each(b.items,function(e){e=String(e);if(e.length>a){a=e.length}},true);f.width=a*(f.fontsize+1)+18}};c.prototype._initEls=function(){var b=__.dom.f(this.id),a=this._cfg.cls;this.els={ctn:b,innerCtn:__.dom.f("."+a.container,b),value:__.dom.f("."+a.value,b),icon:__.dom.f("."+a.icon,b),list:__.dom.f("."+a.list,b),input:__.dom.f("."+a.input,b)}};c.prototype._addEvents=function(){var a=__.event.bind,b=this.els,f=[a(this._hlMouseOver,this),a(this._hlMouseOut,this),a(this._hlClick,this)];__.event.on(b.ctn,"mouseover",f[0]);__.event.on(b.ctn,"mouseout",f[1]);__.event.on(__.doc,"click",f[2]);this._fns=f};c.prototype._hlMouseOut=function(a){this.els.icon.style.backgroundPosition=this._config.bgNormal};c.prototype._hlMouseOver=function(a){var h=a.target||a.srcElement,e=h.className,b=this.els;if(h===b.value||h===b.icon||h===b.value.parentNode){b.icon.style.backgroundPosition=this._config.bgActive}else{while(h!==this.els.ctn){if(__.dom.hasClass(h,this._cfg.cls.item)){this.setActive(h);break}h=h.parentNode}}};c.prototype._hlClick=function(a){var h=a.target||a.srcElement,e=h.className,b=this.els;if(!this.listDisplaying&&(h===b.value||h===b.icon||h===b.icon.parentNode)){this.show()}else{if(__.dom.contains(b.ctn,h)){while(h&&h!==this.els.ctn){if(__.dom.hasClass(h,this._cfg.cls.item)){this.set(__.lang.stripTags(h.innerHTML),true);break}h=h.parentNode}}this.hide()}};c.prototype.setActive=function(a){this.clearActive();a.style.background="#428fdc";a.style.color="#fff";this.lastActiveItem=a};c.prototype.clearActive=function(a){if(this.lastActiveItem){this.lastActiveItem.style.background="#fff";this.lastActiveItem.style.color="#000";this.lastActiveItem=null}};c.prototype.toggle=function(){if(this.listDisplaying){this.hide()}else{this.show()}};c.prototype.show=function(){var a=this.els;if(!this.listDisplaying){a.list.style.display="block";a.value.style.background="#428fdc";a.value.style.color="#fff";a.innerCtn.style.zIndex=this._config.ctnZindex;this.listDisplaying=true}};c.prototype.hide=function(){var a=this.els;if(this.listDisplaying){a.list.style.display="none";a.value.style.background="#fff";a.value.style.color="#000";a.innerCtn.style.zIndex="0";this.listDisplaying=false}};c.prototype.set=function(b,a){a=a===true?true:false;var h,g;if(a&&!__.lang.isUndefined(this.values[b])){g=b;b=this.values[b]}else{g=this._config.items[b]}if(!__.lang.isUndefined(this._config.items[b])){h=this.els.value;h.innerHTML="";__.dom.addText(h,g);this.value=b;this.els.input.value=b;if(this._config.onChange){this._config.onChange(b,g);__.event.fire(this,"change",[b,g])}}else{this._error(this._cfg.txt.wrongValue)}};c.prototype._createEls=function(){var o,q,l,m,a,r,b,p=this._config,n=this;r=__.ua;b=p.width;q="height:1px;font-size:1px;line-height:0;";l=[2];if(r.ie>6){l=[3]}if(r.webkit){l=[1]}m=[];a=this.values;__.each(p.items,function(e,f){m.push({css:"padding:2px 14px 0 3px;width:"+(b-21)+"px;background:#fff;",cls:n._cfg.cls.item,child:{tag:"nobr",css:"",text:e}});a[e]=f},true);o={css:"height:"+p.height+"px;width:"+b+"px;cursor:pointer;font-size:"+this._config.fontsize+"px;position:relative;z-index:0;",cls:this._cfg.cls.container,child:[{css:q+"margin:0 1px;background:"+this._config.borderColor+";width:"+(b-2)+"px;overflow:hidden;float:left;display:inline;"},{css:"background:"+this._config.bgColor+";border:1px solid "+this._config.borderColor+";border-width:0 1px;float:left;",child:[{css:q+"border:1px solid #e3e2e2;border-width:0 1px;border-top-color:#0f0;width:"+(b-4)+"px;float:left;"},{css:"height:"+(this._config.lineHeight+3)+"px;float:left;padding-left:1px;width:"+(b-3)+"px;",child:[{css:"padding:"+l[0]+"px 1px 0 3px;float:left;height:"+this._config.lineHeight+"px;line-height:"+this._config.lineHeight+"px;",cls:this._cfg.cls.value,text:this._config.items[this.value]},{css:"width:11px;height:"+(this._config.lineHeight+3)+"px;float:right;background:transparent url("+p.bgSrc+") no-repeat "+p.bgNormal+";margin-right:1px;",cls:this._cfg.cls.icon},{css:"visibility:hidden;",html:'<input type="hidden" value="'+this._config.defaultValue+'" name="'+this._config.name+'" class="'+this._cfg.cls.input+'"/>'}]},{css:q+"border:1px solid #e3e2e2;border-width:0 1px;width:"+(b-4)+"px;float:left;"}]},{css:q+"margin:0 1px;background:"+this._config.borderColor+";width:"+(b-2)+"px;float:left;display:inline;overflow:hidden;"},{cls:this._cfg.cls.list,css:"float:left;position:absolute;left:0px;top:"+(this._config.lineHeight+5)+"px;display:none;width:"+(b)+"px;z-index:"+this._config.zIndex,child:[{css:"border:1px solid #D0CECE;/*border-bottom:0;*/background:#fff;padding:1px;text-align:left;",child:{tag:"ul",css:"list-style:none;padding:0;margin:0;",child:m}},{}]}]};__.dom.addEl(o,this.id)};c.prototype.disposeInternal=function(){c._super.disposeInternal.call(this);__.event.off(this.els.ctn,"mouseover",this._fns[0]);__.event.off(this.els.ctn,"mouseout",this._fns[1]);__.event.off(__.doc,"click",this._fns[2]);this._fns=null;this.els.ctn=null;this.els.innerCtn=null;this.els.value=null;this.els.icon=null;this.els.list=null;this.els.input=null;this.els=null}});__.BasicModule.register("fn-smartbox","2.0",["lang","dom","selector","event","cookie","fn-table"],function(){var b;__.widget.SmartBox=function(f,h){var a,g=b._cfg;h=h||{};this.status=g.status.READY;this._config=__.lang.clone(g.defInstCfg);a=this._config;__.each(h,function(c,d){a[d]=c},true);a.inputHint=a.inputHint||g.txt.inputHint;this.moreCls=g.cls.more+f;this.zeroList=false;this._errQuery=false;this.listQT="";this.loadingQT="";this.showCount=0;this._listJustCreated=false;this.form=null;this.queryIpt=null;this.subIpt=null;this.typeIpt=null;this.containerId=f;this.resultCtnId=f+g.resultCtnIdPostfix;this._createEls();this._initEls();this._initEvents();if(this._config.autoFocus){this.queryIpt.select()}};__.inherits(__.widget.SmartBox,__.widget.Base);b=__.widget.SmartBox;b._cfg={liIdPrefix:"du-sx-li~",selectIdPrefix:"du-sx-sel-",resultCtnIdPostfix:"-du-sx-result",pstockLink:"http://stockapp.finance.qq.com/pstock/",hintUrl:"//smartbox.gtimg.cn/s3/?v=2&",formActionBase:"http://stock.finance.qq.com/cgi-bin/",txt:{stocksearch:"\u80a1\u7968\u67e5\u8be2",ALL:"\u5168\u90e8",GP:"\u6caa\u6df1",HK:"\u6e2f\u80a1",JJ:"\u57fa\u91d1",AS:"\u7f8e\u80a1",FT:"\u671f\u8d27",check:"\u67e5\u8be2",pstock:"\u6211\u7684\u81ea\u9009\u80a1",inputHint:"\u4ee3\u7801/\u540d\u79f0/\u62fc\u97f3",errHint:"\u60a8\u8f93\u5165\u7684\u67e5\u8be2\u8bcd\u6709\u8bef",emptyHint:"\u8bf7\u8f93\u5165\u67e5\u8be2\u6761\u4ef6\uff1a\u4ee3\u7801/\u540d\u79f0/\u62fc\u97f3",noResult:"\u672a\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c"},cls:{query:"du-sx-query",submit:"du-sx-submit",select:"du-sx-select",type:"du-sx-type",li:"du-sx-li",more:"du-sx-more-"},status:{READY:0,INITED:1,HIDDEN:3,SHOWN:4},typeEnum:["ALL","GP","HK","JJ","AS","FT"],typeMap:{ALL:"all",GP:"gp",HK:"hk",JJ:"jj",AS:"us",FT:"qh"},mktMap:{sh:"\u4e0a\u6d77",sz:"\u6df1\u5733",jj:"\u57fa\u91d1",hk:"\u6e2f\u80a1",us:"\u7f8e\u80a1",qh:"\u671f\u8d27",nq:"\u4e09\u677f"},mktNumMap:{jj:0,sh:1,sz:51,hk:100,us:200,qh:350,nq:61},defInstCfg:{maxLine:13,typeWait:50,showType:true,defaultType:"ALL",showPLink:true,showTitle:true,directionUp:false,onclick:function(a){if(a.length===2){this.onMstats(a[1])}else{__.global.open(__.fnTable.getPageUrl(a[1],a[2])+"?pgv_ref=fi_smartbox&_ver="+__.BasicModule.loadedMods["fn-smartbox"],this.useSelf?"_self":"_blank")}},onsubmit:false,onsubmit2:false,zindex:1,maxQuery:10,showMarket:true,listXOffset:0,listYOffset:0,name:"",inputHint:"",matchRecent:false,autoSelect:false,adjustLimit:2,showAll:true,sendToBoss:true,dataScope:null,useSelf:false,autoFocus:false,preFill:false,blurColor:"#B4B3B3",onMstats:false,iframeMask:false}};b.legalQuery=__.lang.getReg("^[.,0-9a-zA-Z\\u4e00-\\u9fa5]+$");b.getRecentCode=function(){var e,a,f;if(__.lang.isUndefined(this._recentCookieCache)){a=[];f=__.fnTable.mapNumMarket;e=(__.cookie.get("RECENT_CODE")+__.cookie.get("ASRECENT_CODE")).split("|");__.each(e,function(c,d){if(c&&a.length<10){c=c.split("_");if(c.length>1&&!__.lang.isUndefined(f[c[1]])){a.push(f[c[1]]+c[0])}else{if(c.length===1){a.push("jj"+c[0])}}}});this._recentCookieCache=a.join(",").toLowerCase()}return this._recentCookieCache};b.setHover=function(a){if(this._lastHoverLi&&this._lastHoverLi!==a){this._lastHoverLi.style.backgroundColor="#fff"}if(a&&a.style){a.style.backgroundColor="#deefff"}this._lastHoverLi=a};b.prototype._getLine=function(){return{tag:"li",css:"padding:0;margin:4px 3px;float:left;_display:inline;background:#eaeaea;height:2px;line-height:2px;font-size:0;width:254px;"}};b.prototype._showList=function(H){var B,A,E,u,C,t,G,v,a=[],F="",i="",y,x={},w=H.split("~"),D=this.cache[H],z=this;if(this.listQT===H){__.lang.log("Draw cancelled for the same query.");return}this.listQT=H;v=w[1];w=w[0];if(this._config.directionUp){A="push";E="unshift"}else{A="unshift";E="push"}if(!this.resultList){return}this.resultList.innerHTML="";G=function(d,f){var e=w.toUpperCase(),c='<span style="color:#f45243;height:20px;line-height:20px;">'+e+"</span>";d=d.toUpperCase();if(f&&__.lang.endWith(d,e)){d=d.substr(0,d.length-e.length)+c}else{d=d.replace(e,c)}return d};if(this._config.onMstats){if(D[2]){__.each(D[2].split("^"),function(d){var c={};d=d.split("~");c.isMstats=true;c.id=d[0];c.col0=G(d[2]);c.col2=G(d[0]);c.col1=G(d[1]);a.push(z._getLiObj(c))})}}if(__.lang.isUndefined(D[0])){D[0]="N"}__.each(D[0].split("^"),function(c){if(c){i+=c+"~Y^"}});i+=D[1];i=i.split("^");__.each(i,function(c,e){var d;c=c.split("~");d={};if(!c||c.length<4){return}if(a.length>=z._config.maxLine){return}d.code=c[1].toUpperCase();d.numType=b._cfg.mktNumMap[c[0]];d.market=b._cfg.mktMap[c[0]];if(c[4]==="QH-IF"){d.market="\u80a1\u671f";d.numType=300}else{if(c[4]==="ZQ"){d.market="\u503a\u5238"}}d.category=c[4];d.name=c[2];switch(c[4]){case"FJ":case"ETF":d.market="\u57fa\u91d1";break}if(d.numType===200){u=c[1].indexOf(".");d.col0=u>0?c[1].substr(0,u):c[1]}else{d.col0=c[1]}d.col0=G(d.col0,true);d.col1=G(c[2]);d.col2=G(c[3]);d=z._getLiObj(d);if(d){if(F!==c[7]&&a.length>0){a[E](z._getLine())}F=c[7];if(c[0]+"~"+c[3]==="00700~100"){a[A](d)}else{a[E](d)}}});if(a.length>0){if(this._config.showMarket&&this._config.showAll){a[E]({tag:"li",css:"padding:0;float:left;_display:inline;text-align:right;width:250px;height:20px;line-height:20px;",child:{tag:"b",text:"\u67e5\u770b\u5168\u90e8",cls:this.moreCls,css:"color:blue;text-decoration:underline;font-weight:normal;cursor:pointer;"}})}if(__.ua.ie===6){__.dom.f(this.resultCtnId).style.paddingBottom=a.length===1?"0":"3px"}__.dom.addEl(a,this.resultList);this.zeroList=false;b.setHover(this._config.directionUp?this.resultList.lastChild:this.resultList.firstChild);this._listJustCreated=true;this.show(true)}else{this.zeroList=true;this._showError(b._cfg.txt.noResult.replace("##query##",w))}};b.prototype._getLiObj=function(i){var l=false,a,h,j,k;h="height:20px;line-height:20px;overflow:hidden;";k=this._config.showMarket;if(i.numType===200&&i.col2==="*"){a=k?[246,54,142,5,45,0]:[138,44,89,0,0,0];j=false}else{if(i.isMstats){a=[246,54,75,5,60,0]}else{a=k?[246,54,75,5,60,5]:[138,44,48,5,36,0];j={tag:"span",css:"float:left;width:"+a[4]+"px;margin-right:"+a[5]+"px;"+h,html:i.col2}}}if(k){if(i.isMstats){j={tag:"span",css:"float:left;width:"+a[4]+"px;margin-right:"+a[5]+"px;"+h,html:i.col2};l={tag:"span"}}else{if(i.numType===1){if(i.code.substr(0,1)==="9"){l=2}else{if(i.code.substr(0,2)==="58"){l=1}}}else{if(i.numType===51){if(i.code.substr(0,1)==="2"){l=2}else{if(i.code.substr(0,2)==="03"){l=1}}}}l={tag:"span",css:"float:right;width:40px;text-align:right;color:#a9a9a9;"+h,text:i.market}}}return{tag:"li",css:"padding:0;margin:0 2px;cursor:pointer;float:left;_display:inline;_margin:0 1px;",id:b._cfg.liIdPrefix+(i.isMstats?i.id:i.code+"~"+i.numType+"~"+(i.category||"")+"~"+i.name),cls:b._cfg.cls.li,child:{css:"margin:0 5px;float:left;_display:inline;width:"+a[0]+"px;"+h,child:{tag:"nobr",child:[{tag:"span",css:"float:left;width:"+a[1]+"px;margin-right:5px;"+h,html:i.col0},{tag:"span",css:"float:left;font-family:Arial;margin-right:"+a[3]+"px;height:20px;line-height:22px;_line-height:23px;overflow:hidden;width:"+a[2]+"px;",html:i.col1},j,l]}}}};b.prototype._getListCtn=function(h){var i,g,j,a=__.dom.f(this.resultCtnId);j=this._config.showMarket?260:152;if(!a){g={id:this.resultCtnId,css:"width:"+j+"px;overflow:hidden;text-align:left;background:#FFF;position:absolute;font-size:12px;visibility:hidden;z-index:"+this._config.zindex,child:[{tag:"ul",css:"font-family:Arial;margin:0;padding:0;border:1px solid #9c9c9c;padding:3px 0;list-style:none;overflow:hidden;_zoom:1;"}]};if(__.ua.ie===6||this._config.iframeMask){g.child.push({tag:"iframe",css:"width:290px;height:3000px;filter:alpha(opacity=0);position:absolute;top:0;left:-1px;z-index:-1;",frameBorder:"0"})}a=__.dom.addEl(g);__.dom.insertBefore(a,__.doc.body.firstChild);this.resultList=a.getElementsByTagName("ul")[0];i=this.queryIpt;a.style.left=__.dom.getPosition(i,"offsetLeft")+this._config.listXOffset+"px";a.style.top=(__.dom.getPosition(i,"offsetTop")+i.offsetHeight+this._config.listYOffset+1)+"px"}else{if(h){i=this.queryIpt;a.style.left=__.dom.getPosition(i,"offsetLeft")+this._config.listXOffset+"px";a.style.top=(__.dom.getPosition(i,"offsetTop")+i.offsetHeight+this._config.listYOffset+1)+"px"}}return a};b.prototype._sendRequest=function(){var a,m,p,j,l=this.queryIpt,k=this.typeIpt,n=this.cache,o=this;m=__.lang.trim(l.value).toLowerCase();p=k.value;j=m+"~"+p;if(this.listQT===j){__.lang.log("same query:"+j);return}if(this.loadingQT===j){return}if(m===""){this.listQT="";this.hide();return}else{if(!b.legalQuery.test(m)){this.listQT=j;this._errQuery=true;this._showError();return}}if(n[j]){this._showList(j)}else{a=b._cfg.hintUrl+"q="+encodeURIComponent(m)+"&t="+encodeURIComponent(b._cfg.typeMap[p]);if(this._config.onMstats){a+="&c=1"}if(this._config.matchRecent){a+="&c="+encodeURIComponent(b.getRecentCode())}setTimeout(function(){var c=o._config.dataScope||__.global;if(__.lang.trim(l.value).toLowerCase()===m&&o.typeIpt.value===p){__.lang.log("begin load query:"+m);o.loadingQT=j;__.load(a,function(){__.lang.log("data loaded for "+m+"~"+p);o.loadingQT="";if(__.lang.trim(l.value).toLowerCase()===m&&o.typeIpt.value===p){n[j]=[c.v_hint_R,c.v_hint];if(o._config.onMstats){n[j].push(c.v_cate_hint||"")}o._showList(j);__.lang.log("list drawed for "+o.listQT);c.v_cate_hint=undefined;c.v_hint_R=undefined;c.v_hint=undefined}},{charset:"gbk",cache:true,doc:c.document})}},this._config.typeWait)}};b.prototype.cache={};b.prototype._createEls=function(){var e,m,r,q=__.dom.f(this.containerId),s=false,n=false,o=false,p=this._config.preFill||this._config.inputHint,t="ZHENGQUANDM";r=this._config.attach;if(r){if(!r.form[t]){if(__.ua.ie){try{m=__.doc.createElement('<input name="'+t+'" type="hidden">')}catch(a){m=false}}if(!m){m=__.doc.createElement("input");m.name=t;m.type="hidden"}r.form.appendChild(m)}}else{if(this._config.showType){s={css:"margin-left:10px;margin-right:2px;_margin-top:1px;float:left;",id:b._cfg.selectIdPrefix+this.containerId}}if(this._config.showPLink){n={css:"float:left;height:20px;line-height:23px;",child:{tag:"a",text:b._cfg.txt.pstock,href:b._cfg.pstockLink,target:"_blank"}}}if(this._config.showTitle){o={text:b._cfg.txt.stocksearch,css:"float:left;height:20px;line-height:23px;"}}__.dom.addEl({tag:"form",target:"_blank",css:"float:left;z-index:"+this._config.zindex,method:"post",child:{tag:"ul",css:"list-style:none;margin:0;padding:0;font-size:12px;font-family:Arial;color:#333333;",child:[o,s,{css:"float:left",html:'<input type="text" style="width:96px;height:16px;padding:2px 0 0 4px;line-height:16px;border:1px solid #D0CECE;vertical-align:top;margin-right:5px;font-size:12px;color:'+this._config.blurColor+";font-family:Arial;"+(this._config.showType?"":"margin-left:5px;")+'" value="'+p+'" class="'+b._cfg.cls.query+'" name="cl" autocomplete="off" maxlength="'+this._config.maxQuery+'" />'},{css:"float:left;margin-right:15px;display:inline;padding-top:1px;_padding-top:2px;",child:[{tag:"input",type:"submit",css:"width:47px;border:0;cursor:pointer;background:transparent url(//mat1.gtimg.com/finance/stock/images/smartbox-btn2.png) no-repeat scroll 0px 0px;vertical-align:top;font-size:12px;"+(__.ua.ie?"height:19px;padding:3px 5px 0;":"height:19px;padding:0 5px;"),value:b._cfg.txt.check,cls:b._cfg.cls.submit},{tag:"span",html:'<input type="hidden" name="ZHENGQUANDM"/>'+(this._config.showType?"":('<input type="hidden" value="" name="qc_type" class="'+b._cfg.cls.type+'" />'))}]},n]}},q);q.style.height="21px"}m=q=null};b.prototype._hlResize=function(e){var f=this.queryIpt,a=this._getListCtn();a.style.left=__.dom.getPosition(f,"offsetLeft")+this._config.listXOffset+"px";a.style.top=(__.dom.getPosition(f,"offsetTop")+f.offsetHeight+1)+"px";this.hide()};b.prototype._hlScroll=function(d){var a=__.ua;if((a.gecko||a.webkit)&&d.target!==__.doc){return}this.hide()};b.prototype._hlFocus=function(f){var e=f.srcElement||f.target,a;if(e.value===this._config.inputHint){e.value=""}e.style.color="#333333";if(this._config.autoSelect){e.select()}if(this.status===b._cfg.status.HIDDEN&&(this.isQueryChanged()||!this._config.autoSelect)){this.show()}};b.prototype._hlBlur=function(a){var d=a.srcElement||a.target;if(d.value===""){d.style.color=this._config.blurColor;d.value=this._config.inputHint}};b.prototype._hlKeyup=function(a){if(!__.lang.inArray(a.keyCode,[13,27,38,40])){__.lang.log("user key up : "+this.queryIpt.value);this._errQuery=false;this._sendRequest()}};b.prototype._hlKeydown=function(e){var f,a=this.queryIpt;if(this.status===b._cfg.status.SHOWN&&!this._errQuery){switch(e.keyCode){case 38:if(this.zeroList){return}if(!this.resultList){return}f=b._lastHoverLi&&b._lastHoverLi.previousSibling?b._lastHoverLi.previousSibling:this.resultList.lastChild;if(!__.dom.hasClass(f,b._cfg.cls.li)){f=f.previousSibling?f.previousSibling:this.resultList.lastChild}b.setHover(f);__.event.stopEvent(e);break;case 40:if(this.zeroList){return}if(!this.resultList){return}f=b._lastHoverLi&&b._lastHoverLi.nextSibling?b._lastHoverLi.nextSibling:this.resultList.firstChild;if(!__.dom.hasClass(f,b._cfg.cls.li)){f=f.nextSibling?f.nextSibling:this.resultList.firstChild}b.setHover(f);__.event.stopEvent(e);break;case 27:this.hide();break;case 13:this._enterPressed=true;break}}else{if(this.status===b._cfg.status.HIDDEN){if(e.keyCode===38||e.keyCode===40||(a.value.length===1&&a.value.charCodeAt(0)===e.keyCode)||(e.ctrlKey&&e.keyCode===86)){this.show()}}}};b.prototype._hlMouseover=function(f){var a=f.relatedTarget?f.relatedTarget:f.fromElement,e=f.target||f.srcElement;while(e&&e!==__.doc.documentElement&&e.className!==b._cfg.cls.li){e=e.parentNode}if(e.className===b._cfg.cls.li){b.setHover(e)}};b.prototype._hlDocClick=function(f){var e=f.target||f.srcElement,a;if(e===this.subIpt){return}if(e===this.queryIpt){if(this.status===b._cfg.status.SHOWN&&!this._errQuery&&this._config.autoSelect&&!this._listJustCreated){this.hide()}if(this._config.autoSelect){this.queryIpt.select()}this._listJustCreated=false;return}if(e.className===this.moreCls){this._setForm();return}if(this.status!==b._cfg.status.SHOWN){return}while(e&&e!==__.doc.documentElement&&e.className!==b._cfg.cls.li){e=e.parentNode}if(e&&e.className===b._cfg.cls.li){a=e.id.split("~");this._onSelect(a,1)}this.hide()};b.prototype.getResult=function(){if(this.zeroList){return false}if(this._resultQT==__.lang.trim(this.queryIpt.value).toLowerCase()+"~"+this.typeIpt.value){return this._resultIds}if(!this.resultList){return false}var a=this._hasMatchRow(),d=this._config.directionUp?this.resultList.lastChild:this.resultList.firstChild;if(!a&&d){a=d.id.split("~")}return a};b.prototype._hlSubmit=function(j){var k,a,e,l=this,i=this._enterPressed?0:2;this._enterPressed=false;if(this._config.onsubmit2){this._config.onsubmit2(j,b._lastHoverLi,this);return}if(!this.zeroList&&!this.isQueryChanged()){if(!this.resultList){__.event.preventDefault(j);return false}e=this._config.directionUp?this.resultList.lastChild:this.resultList.firstChild;if(i===0){if(this.status===b._cfg.status.SHOWN){if(b._lastHoverLi||e){a=(b._lastHoverLi||e).id.split("~");this._onSelect(a,i);this.hide()}}}else{a=this._hasMatchRow();if(a){this._onSelect(a,i);this.hide()}else{a=e.id.split("~");this._onSelect(a,i);this.hide()}}}else{if(this._checkInput()){if(!this.isQueryChanged()){if(this._config.onsubmit){this._config.onsubmit(this.queryIpt.value,this.typeIpt.value,j)}else{this._setForm(j)}return}else{__.lang.log("b4show redefined");this.b4Show=function(){var c=l._config.directionUp?l.resultList.lastChild:l.resultList.firstChild;a=l._hasMatchRow();if(a){l._onSelect(a,i);l.hide()}else{if(!l.zeroList){a=c.id.split("~");l._onSelect(a,i);l.hide()}else{if(l._config.onsubmit){l._config.onsubmit(l.queryIpt.value,l.typeIpt.value,j)}else{l._setForm(j)}}}l.b4Show=false;return false}}}}__.event.preventDefault(j)};b.prototype.hide=function(){if(this.status===b._cfg.status.SHOWN){__.lang.log("to hide");var d=this._getListCtn();d.style.visibility="hidden";d.style.marginLeft="-10000px";var a=d.getElementsByTagName("iframe");a.length&&(a[0].style.display="none");b.setHover(null);this.status=b._cfg.status.HIDDEN}};b.prototype.show=function(a,g){if(a||!this.isQueryChanged()){g=typeof g==="boolean"?g:(this.showCount++<this._config.adjustLimit);if(!this.b4Show||this.b4Show()){var f=this._getListCtn(g);f.style.visibility="visible";f.style.marginLeft="";var h=f.getElementsByTagName("iframe");h.length&&(h[0].style.display="block");this.status=b._cfg.status.SHOWN}}else{__.lang.log("send from show");this._sendRequest()}};b.prototype.isQueryChanged=function(){return(this.listQT!==__.lang.trim(this.queryIpt.value).toLowerCase()+"~"+this.typeIpt.value)};b.prototype._onSelect=function(e,a){var f;this._resultQT=this.listQT;this._resultIds=e;if(this._config.sendToBoss){f=["//btrace.qq.com/collect?sIp=","&iQQ=",(__.cookie.get("o_cookie")||"0"),"&sBiz=finance.stock.smartbox","&sOp=browse&iSta=0&iTy=179&iFlow=",(new Date())%100000000,"&sInput=",encodeURIComponent(this.queryIpt.value),"&sSubmit=",(a===0?"enter":(a===1?"click":"button")),"&sMarket=",encodeURIComponent(this.typeIpt.value.toLowerCase()),"&sCode=",encodeURIComponent(__.fnTable.mapNumMarket[e[2]]+e[1]),"&sName=",encodeURIComponent(e[4]),"&sRefer=",encodeURIComponent((location.host+location.pathname).substr(0,200))].join("");this._bossImg=new Image();this._bossImg.src=f}this._config.onclick(e)};b.prototype._initEls=function(){var h,i,j,a=b._cfg.cls,g="#"+this.containerId+" .";if(!this._config.attach){this.queryIpt=__.dom.f(g+a.query);this.subIpt=__.dom.f(g+a.submit);this.form=__.dom.f("#"+this.containerId+" form");if(this._config.showType){h={};j=b._cfg.txt;__.each(b._cfg.typeEnum,function(c){h[c]=j[c]});this.typeIpt=new __.widget.Select(b._cfg.selectIdPrefix+this.containerId,{items:h,defaultValue:this._config.defaultType,fontsize:12,name:"qc_type"})}else{this.typeIpt=__.dom.f(g+a.type);this.typeIpt.value=this._config.defaultType}}else{i=this._config.attach;this.form=i.form;this.queryIpt=i.query;this.subIpt=i.submit;this.typeIpt=i.type;if(this._config.preFill){this.queryIpt.value=this._config.preFill}this.typeIpt.value=this._config.defaultType}this.queryIpt.onfocus=null};b.prototype._initEvents=function(){var i=this.queryIpt,j=this,g=__.event,h=g.bind,a;a=[h(j._hlFocus,j),h(j._hlBlur,j),h(j._hlKeyup,j),h(j._hlKeydown,j),h(j._hlMouseover,j),h(j._hlDocClick,j),h(j._hlSubmit,j),h(j._hlResize,j),h(j._hlScroll,j)];g.on(i,"focus",a[0]);g.on(i,"blur",a[1]);g.on(i,"keyup",a[2]);g.on(i,"keydown",a[3]);g.on(this._getListCtn(),"mouseover",a[4]);g.on(__.doc,"click",a[5]);g.on(j.form,"submit",a[6]);g.on(__.global,"resize",a[7],true);g.on(__.global,"scroll",a[8],true);g.on(this.typeIpt,"change",a[2]);j._fns=a;i=null;j=null};b.prototype._hasMatchRow=function(){if(!this.resultList){return false}var g,f=this.queryIpt.value,h=this.resultList.childNodes,a=false;if(!this.zeroList){if(h.length===1){g=0}else{g=__.lang.find(h,function(c){if(!c.id){return false}var d=c.id.split("~")[1];d=d&&d.split(".")[0];return d===f})}if(g!==-1){a=h[g].id.split("~")}}return a};b.prototype._checkInput=function(){var a=b._cfg.txt.errHint,d=this.queryIpt.value;d=d.replace(__.lang.getReg("\\s","gi"),"");if(d===""||d===this._config.inputHint){a=b._cfg.txt.emptyHint}else{if(__.lang.getReg("^[\\*\\/0-9a-zA-Z\\u4e00-\\u9fa5]+$").test(d)&&!__.lang.getReg("[\\\\\\/<>#\\$&]").test(d)){a=true}}if(a!==true){this._showError(a)}return a===true};b.prototype._showError=function(a){if(!this.resultList){return}a=a||b._cfg.txt.errHint;this.resultList.innerHTML="";__.dom.addEl({tag:"li",css:"padding:5px 0 5px 7px;line-height:15px;",html:a},this.resultList);this.show(true)};b.prototype._setForm=function(d){if(d){__.event.stopEvent(d)}var a="//stock.finance.qq.com/sstock/search.php?c=utf8&t=all&q="+encodeURIComponent(this.queryIpt.value.split(".")[0]);__.global.open(a,"_blank")};b.prototype.disposeInternal=function(){var i=this.queryIpt,j=this._fns,a=null,h=this,g=__.event;b._super.disposeInternal.call(this);g.off(i,"focus",j[0]);g.off(i,"blur",j[1]);g.off(i,"keyup",j[2]);g.off(i,"keydown",j[3]);g.off(this._getListCtn(),"mouseover",j[4]);g.off(__.doc,"click",j[5]);g.off(h.form,"submit",j[6]);g.off(__.global,"resize",j[7],true);g.off(__.global,"scroll",j[8],true);g.off(this.typeIpt,"change",j[2]);h._fns=a;h.form=a;h.queryIpt=a;h.subIpt=a;h.typeIpt=a;i=h._config;i.dataScope=a;i.onclick=a;i.onsubmit=a;i.onsubmit2=a}});
/*  |xGv00|b0710bf8b2a89836a10731f54b5cba9b */